<Frame
 CycleDuration="Kernel.CycleDuration"
 Name="TSR"
 Guid="af534e3b-b929-4582-a578-51c36a9b41dd"
>
<SubSequences>
<SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Delete TSR when Orientation is changed"
 Guid="9c91950c-bc0b-4fa4-8822-289416d4d403"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete TSR when orientation is changed"
 Guid="ce250e9b-0134-4f29-9bd9-a89176a8957a"
>
<ReqRef
 Id="291bf774-5d2e-4264-861b-84afd9fb4185"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="790c4df5-dda2-48a7-be08-fdbbbf96858b"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="04eefd9a-ff03-4a79-9368-4f0582a1294f"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="5ee9985e-09ea-4210-afe4-fb4c120ecfa2"
>
<Actions>
<Action
 Guid="2aa1e2d4-b9f1-4f46-bae6-c77a9e4b7153"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide TSR"
 Guid="b048779e-16b4-43c9-ad4b-3b3ad21b2694"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="dc872445-2f4e-49c2-87f2-bf0bc27436e5"
>
<Actions>
<Action
 Guid="9ce2b8e4-7fe0-4dbe-96b9-42c4bdc76a09"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 1515,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Data check"
 Guid="ae526998-cde0-4bce-b57d-105d65acba63"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="cd12a390-9c3d-4751-9592-954f6d1cbc84"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="846f5d72-b2be-479f-b4da-d83e2620a19d"
>Kernel.TSR.TSRs != []</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="07fa8dd9-8282-47e0-859f-287e2c20813e"
>THERE_IS X IN Kernel.TSR.TSRs | X.Id == 1515</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Change Orientation -&gt; Mode RV"
 Guid="882ba6a3-5dff-4350-b739-6c4685b1dc38"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="a7e297ee-58d7-4e6c-877f-7d0d8c1c68e9"
>
<Actions>
<Action
 Guid="44f1ca78-8b36-4159-b1b4-815be97d0e44"
>Kernel.Mode &lt;- ModeEnum.RV</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Data check"
 Guid="890b1a39-c11a-4522-b44f-3e2ac6b7f8db"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="be1a9a3a-5538-479d-ac8e-a3a09f2eff64"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="ccf0ddbf-1096-4dfd-b1ab-b80e791e4739"
>Kernel.TSR.TSRs == []</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Handle several TSRs"
 Guid="4aa44107-861c-425e-b54f-6cc05c821648"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 NeedsRequirement="FALSE"
 Name="Setup"
 Guid="5769e125-11e8-49d9-8278-c954a92ea2d8"
>
<Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="a4131a0e-9c97-4512-8114-669033f10a41"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="bcadc3e5-6032-4945-95ee-be8dee4f40f9"
>
<Actions>
<Action
 Guid="e1cef499-e26f-4590-849b-27224c68379c"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step></Steps>
</TestCase><TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 Name="Provide several TSRs"
 Guid="ff7addfd-6ba7-4b8c-a12e-3ed30f042437"
>
<ReqRef
 Id="3b4583a1-b075-4b17-875f-25dea9123397"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="af8e9f68-75d9-4929-b733-348200d61ec2"
>
</ReqRef><ReqRef
 Id="92457ea4-c640-4322-bf2c-027115a572b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="503dd56d-a35d-425a-814c-3d52d2349759"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide the first TSR"
 Guid="dfa22ec4-0e84-43cd-a4a7-23b6ef82b3d7"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="5644c3f9-0d29-4120-a8fd-77867a580a44"
>
<Actions>
<Action
 Guid="f4957525-c0c9-452f-ba9e-2548e6703d33"
>Odometry.NominalDistance &lt;- 3050.0</Action><Action
 Guid="cb4b3be3-9143-4bed-b71e-40eefc5936ef"
>INSERT BTM.LRBG.PreviousBaliseGroupStruct{
    BaliseGroup =&gt; BTM.LRBG.BaliseGroupStruct
{
    NID_BG=&gt;9616,
    Orientation=&gt;OrientationEnum.Nominal,
    Position=&gt;BTM.PositionStruct
    {
        OverReadingAmountOdo=&gt;2.0,
        Position=&gt;3000.0,
        UnderReadingAmountOdo=&gt;3.0
    }
},
    IsLRBG =&gt; True,
    IsSingle =&gt; False
}

 IN BTM.LRBG.PreviousBaliseGroups</Action><Action
 Guid="517d102c-26a3-4d2d-b342-ab37058d917f"
>Kernel.TSR.TSRs &lt;- []</Action><Action
 Guid="ea643973-5af9-4967-bd6a-28a0e8870e81"
>Kernel.TrainPosition.Position.DirectionalPositionInformation.TrainOrientation &lt;- OrientationEnum.Nominal</Action></Actions>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step2"
 Guid="40dfb864-c4bc-4fad-ac41-615077662e91"
>
<Actions>
<Action
 Guid="8758b5ab-c78d-415d-8107-23e8f297b08b"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 65,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 15,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step3"
 Guid="77401987-725e-4092-b444-dd5bf3426331"
>
<Actions>
<Action
 Guid="8d734e46-ac47-4962-b06a-a53080702fac"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; 32,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 1,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        
    ],
    BitField =&gt; &apos;&apos;
}</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Check the first TSR"
 Guid="33e7fa4a-898e-4b9b-bf3a-00f7f41f05af"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="d9a99789-6bad-4de8-9914-28814edeaed6"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="9e7650a1-c005-4bbe-8081-5816cf068170"
>Kernel.TSR.SpeedRestrictions ( 3000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="2297cbb3-6afe-47d8-940e-948e7e842020"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="7b230b78-38bd-4fc3-80e5-cc111c4d2048"
>Kernel.TSR.SpeedRestrictions ( 5500.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="984edea1-6cda-4d5e-a18a-e9fe4a39f3f0"
>Kernel.TSR.SpeedRestrictions ( 5499.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="22b07291-9112-46e4-be6c-9dcec1ed4c28"
>( COUNT X IN Kernel.TSR.TSRs ) == 1</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide the second TSR"
 Guid="c0ad574e-d5b9-488f-8815-b2439b4ad164"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="af57ae23-04ae-469c-9912-b481de2b42e4"
>
<Actions>
<Action
 Guid="a06722d4-6d73-41be-a514-b3354030f2f0"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2125,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 65,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 16,
                    D_TSR =&gt; 3000,
                    L_TSR =&gt; 3000,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 10
                }
            }
        }
    ]
}</Action></Actions>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step2"
 Guid="205c94f7-1f88-4c15-b307-f47f1c84191b"
>
<Actions>
<Action
 Guid="9727e87d-36c8-4ac7-add4-2fd9154d15c3"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; 32,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 1,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2125,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        
    ],
    BitField =&gt; &apos;&apos;
}</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Check the second TSR"
 Guid="95ba1921-8984-41df-b656-c23f9d401081"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="a5dc2383-0ba2-43e0-83df-d3875837a9e0"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="74e012fc-a069-40b7-9403-8a185fb34273"
>Kernel.TSR.SpeedRestrictions ( 2000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="5c0284c9-20b2-4c63-a01a-197b1cc38e7e"
>Kernel.TSR.SpeedRestrictions ( 3000.0 ) == 50.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="379648d6-5cb5-4fba-a45a-3bf420fae1df"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="fad711de-40e1-4e0e-ab27-34ef4b5543cb"
>Kernel.TSR.SpeedRestrictions ( 5500.0 ) == 50.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="27d2c328-26ce-4be3-8e6d-bebc4520a28e"
>Kernel.TSR.SpeedRestrictions ( 6000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="250ea92d-b3cb-4b60-9a77-ab1a882f5be9"
>( COUNT X IN Kernel.TSR.TSRs ) == 2</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase><TestCase
 Feature="0"
 Case="0"
 Name="Revoke a TSR"
 Guid="3a06a8e6-391d-4ad1-a49e-f73fab250303"
>
<ReqRef
 Id="1c1c2dc5-c171-456d-9a54-a4480effe5a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53e44934-b876-4ddb-a014-adde8866a0bb"
>
</ReqRef><ReqRef
 Id="609c3b11-43bc-4419-aaad-ec6b332308ba"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6f6c5446-f57f-4036-b501-a2ad64da6add"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide revocation of the first TSR"
 Guid="9c86b553-898b-4552-9f32-47319a668fda"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="c0f8b60f-6e2c-436c-b4f2-78072b7460c4"
>
<Actions>
<Action
 Guid="0c720989-5798-4f22-b5f8-4098a5aa69af"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION_REVOCATION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION_REVOCATION.Message
                {
                    NID_PACKET =&gt; 66,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    NID_TSR =&gt; 15
                }
            }
        }
    ]
}</Action></Actions>
</SubStep><SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step2"
 Guid="c8afc3c8-8d4c-4738-9242-9f063afacb1e"
>
<Actions>
<Action
 Guid="248e4063-d21a-4ff8-9e09-d84603ab2881"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; 32,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 1,
    N_TOTAL =&gt; 1,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Unlinked,
    Sequence1 =&gt; 
    [
        
    ],
    BitField =&gt; &apos;&apos;
}</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Check TSR revoked"
 Guid="8b958b4f-1572-4069-ac58-e565f2637025"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="817b79c8-5665-435d-877e-3ca6de9dabd3"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="17dba406-67c4-4979-ab59-3edc501b5f10"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == 50.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="defb84a4-5b12-416f-a373-671ff668d9bc"
>Kernel.TSR.SpeedRestrictions ( 5000.0 ) == 50.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="e7212370-2d8c-418f-9a45-98293c086497"
>Kernel.TSR.SpeedRestrictions ( 6000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="3647fe52-6772-418a-885b-56cdb71b2161"
>Kernel.TSR.SpeedRestrictions ( 3000.0 ) == 50.0</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="5a5520d9-e7a7-45d1-b995-215f2ab3f239"
>( COUNT X IN Kernel.TSR.TSRs ) == 1</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase><TestCase
 Feature="0"
 Case="0"
 Name="Train passes the TSR"
 Guid="bbec6f08-5b93-43e5-b6ae-5e159393c2be"
>
<ReqRef
 Id="2c3a1b3f-8686-4dc8-b3cb-bf0f5c7a0f03"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75cb104d-16ef-4872-b591-99505a149b3e"
>
</ReqRef><ReqRef
 Id="ae963d74-ee48-4c49-819e-a34cf532f1f5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d87c881b-5eef-427b-9e68-86412b77ac9c"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Train has almost passed the TSR"
 Guid="c5da3069-279c-47f0-8e1e-3708f7bfd285"
>
<Comment>Testing that one meter before the distance where the TSR has to be revoked it is still present on the train.</Comment>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="fb7afa5c-5b68-4042-b827-15290d8a691d"
>
<Actions>
<Action
 Guid="d7872246-e268-4edd-a7c0-8758c1e2edf8"
>Odometry.NominalDistance &lt;-
(FIRST X IN Kernel.TSR.TSRs).Location
  +
BaseTypes.LengthToDistance ((FIRST X IN Kernel.TSR.TSRs).Length)
  +
BTM.LRBG.LRBG().Position.Position
  +
Kernel.DistanceToKeepInfoInTheRear
  +
Kernel.TrainPosition.FrontEndPosition ( PointOfInterest=&gt;DistanceIntervalEnum.Nom )
  -
Kernel.TrainPosition.RearEndPosition ( PointOfInterest=&gt;DistanceIntervalEnum.Min )
  -
1.0</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="The TSR is not revoked"
 Guid="876e59b3-c013-40ed-9454-ebb24f6407da"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="25ef986c-b0be-43ca-9760-65d68dd1c990"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="5848d15b-deb3-4be0-b2e4-a6020eb40efa"
>( COUNT X IN Kernel.TSR.TSRs ) == 1</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Train passed the TSR"
 Guid="f717e274-bc95-4cdd-a336-3810a65c67fb"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="56f39005-0305-4c3c-a9e9-35cc1ca839df"
>
<Actions>
<Action
 Guid="2e41450a-411a-4b01-80af-d894beedaf44"
>Odometry.NominalDistance &lt;-
(FIRST X IN Kernel.TSR.TSRs).Location
  +
BaseTypes.LengthToDistance ((FIRST X IN Kernel.TSR.TSRs).Length)
  +
BTM.LRBG.LRBG().Position.Position
  +
Kernel.DistanceToKeepInfoInTheRear
  +
Kernel.TrainPosition.FrontEndPosition ( PointOfInterest=&gt;DistanceIntervalEnum.Nom )
  -
Kernel.TrainPosition.RearEndPosition ( PointOfInterest=&gt;DistanceIntervalEnum.Min )</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Check TSR is revoked"
 Guid="4fd954af-5a56-4209-b691-3dd6ed060361"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="87f26e5e-c315-443a-a950-a228c9f39daf"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="3783b97d-1758-43f6-8bef-96552dc5cd93"
>Kernel.TSR.SpeedRestrictions ( 3000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="c1dcaee5-a104-45fe-99d5-7d1f0fbf232c"
>Kernel.TSR.SpeedRestrictions ( 6000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="1d472a63-c9d4-49cf-8c31-3b8d6f10cd61"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="362755d1-cc47-49d1-a63a-de004939c57e"
>Kernel.TSR.SpeedRestrictions ( 5000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="dd1f337b-a457-4af8-817b-ede0f1270ddc"
>( COUNT X IN Kernel.TSR.TSRs ) == 0</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="Handle single TSR"
 Guid="93143f11-21c1-4ff8-8157-079cba5984f1"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Setup"
 Guid="81fe6358-4a2c-4da9-b4a1-fdb2d8817cd3"
>
<Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="4ac3e532-8f54-42da-9caf-361849a63f44"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="7d5925c8-ed0e-4ec9-8445-5deb6b007475"
>
<Actions>
<Action
 Guid="753e95f1-f522-4a24-a10d-7e2a4603413f"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide TSR"
 Guid="4e646b2e-9934-4b7d-a90b-c042be99341e"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="35575ac7-9210-4693-8275-b8465183b136"
>
<Actions>
<Action
 Guid="ba2efebf-3a75-4162-b47e-9c3762f06cc9"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 255,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action><Action
 Guid="ae8a7840-230d-4020-868f-19592d2d029b"
>Odometry.NominalDistance &lt;- 2000.0</Action><Action
 Guid="b9ade918-73be-4dc3-96e2-3ebac514aa20"
>INSERT BTM.LRBG.PreviousBaliseGroupStruct{
    BaliseGroup =&gt; BTM.LRBG.BaliseGroupStruct
{
    NID_BG=&gt;9616,
    Orientation=&gt;OrientationEnum.Nominal,
    Position=&gt;BTM.PositionStruct
    {
        OverReadingAmountOdo=&gt;3.0,
        Position=&gt;1080.0,
        UnderReadingAmountOdo=&gt;3.0
    }
},
    IsLRBG =&gt; True,
    IsSingle =&gt; False
}

 IN BTM.LRBG.PreviousBaliseGroups</Action><Action
 Guid="79dc16bf-ff4a-4c11-b6d5-8a926dae0223"
>Kernel.TSR.TSRs &lt;- []</Action><Action
 Guid="5d3553bd-74dc-4d2a-99c4-a297301c856e"
>Kernel.TrainPosition.Position.DirectionalPositionInformation.TrainOrientation &lt;- OrientationEnum.Nominal</Action></Actions>
</SubStep></SubSteps>
</Step></Steps>
</TestCase><TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 Name="Ensure TSR is active"
 Guid="cbe936c7-e23e-4eb4-b1a9-747ae7b567cf"
>
<ReqRef
 Id="0ef0898e-cf23-489a-a1ec-efefda2bff98"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9beebfa-28ee-40c4-8681-c309ea822706"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="1"
 Guid="6cc72373-85ed-4407-b5e0-43502d55207c"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="45aeb9de-ce25-44a5-8a5e-23959ae5c436"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="bdb57b13-1b0b-4ffb-95c4-e4a28cd1f905"
>Kernel.TSR.SpeedRestrictions ( 5499.9 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="875b73e9-e3b8-4eae-9fb3-51bec8556e1d"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="8696c1fe-65db-43a1-a880-1ae3ca7e6b56"
>Kernel.TSR.SpeedRestrictions ( 2920.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="84d0a86a-5d62-4083-b79d-387f068fe172"
>Kernel.TSR.SpeedRestrictions ( 5500.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="46370369-06c3-4082-85ff-65ae27ceab8d"
>Kernel.TSR.SpeedRestrictions ( 3999.9 ) == BaseTypes.Speed.MaxSpeed</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="New TSR shall replaced old TSR except if non revocable"
 Guid="56dbe0d7-8c8d-4d4f-9f47-f6fb5b269a0c"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 Name="New TSR shall replaced old TSR except if non revocable"
 Guid="db525937-d17e-4712-b680-508cd0d46bdb"
>
<ReqRef
 Id="0b1bccdc-d6e1-4297-8b07-8f17f74db4cd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5d0de363-6ec7-428b-8eb7-44280aa9498c"
>
</ReqRef><ReqRef
 Id="1c03e6a2-328c-4a04-83b6-be1892d19f38"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="71f6a4d6-2824-4523-88c3-2e93290d8e92"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="add969d8-8eba-47f2-b47f-78d81d282e21"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="d042e958-c703-4194-9403-f68fb5204767"
>
<Actions>
<Action
 Guid="34f262b7-f3cb-45e5-a25d-d24fa0410dd5"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide TSR"
 Guid="7f7fb492-9910-47e1-aa41-bd0edb417088"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="32a0f7f3-7fcc-4b1f-be63-e26bc0a8656d"
>
<Actions>
<Action
 Guid="dc725b9a-2b48-439e-8188-e562a71ab00f"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 150,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="2e865bbb-817a-407c-86cf-0fa91be9f766"
>THERE_IS X IN Kernel.TSR.TSRs |  ( X.Id == 150 AND X.Length == 1500.0 AND X.Location == 4000.0)</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="991f59f0-4ba9-4754-9faf-fa5c4bf03eaf"
>(COUNT X IN Kernel.TSR.TSRs) == 1</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="New TSR with same Id"
 Guid="691cc1d3-f5d1-48ae-b7c4-36799cce3f72"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="a6767b60-f5a1-4473-80c8-de4ddd321055"
>
<Actions>
<Action
 Guid="0eeaf253-8455-4306-b748-b7ff93eb4f7d"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2125,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 150,
                    D_TSR =&gt; 3000,
                    L_TSR =&gt; 1000,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="c1e4e97e-860c-4c79-99b6-cf4ca5dbccdb"
>THERE_IS X IN Kernel.TSR.TSRs |  ( X.Id == 150 AND X.Length == 1000.0 AND X.Location == 3000.0)</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="22630cbc-5071-467b-b566-3a69c2b37875"
>(COUNT X IN Kernel.TSR.TSRs) == 1</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="New TSR with Non Revocable TSR"
 Guid="b99c9ed0-5bc3-42f0-b401-8bce1d8fbd36"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="1cb4779e-d3b2-4a3f-95a2-37485ee9fd94"
>
<Actions>
<Action
 Guid="374e65cd-0acb-411a-b085-d6c1403baeee"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2125,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 255,
                    D_TSR =&gt; 3300,
                    L_TSR =&gt; 1300,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="f966762b-6cc1-4b33-9cc2-b4634b883d81"
>THERE_IS X IN Kernel.TSR.TSRs |  ( X.Id == 255 AND X.Length == 1300.0 AND X.Location == 3300.0)</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="e82a62aa-9ae4-4006-addd-c6be488d5768"
>(COUNT X IN Kernel.TSR.TSRs) == 2</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="New Non Revocable TSR"
 Guid="983c99b6-fdce-423a-9f04-1381db13b953"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="SubStep1"
 Guid="ad8f64a2-3990-4fac-b7db-34a80f4381ab"
>
<Actions>
<Action
 Guid="529eaeab-c2f7-4033-b4bf-8c424da3ddbe"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2125,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 255,
                    D_TSR =&gt; 3500,
                    L_TSR =&gt; 2000,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="93f9a48a-aac5-41f7-800b-bf9d27ec37a5"
>THERE_IS X IN Kernel.TSR.TSRs |  ( X.Id == 255 AND X.Length == 2000.0 AND X.Location == 3500.0)</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="4c773843-0b70-49db-9745-fcaaf775c9ab"
>(COUNT X IN Kernel.TSR.TSRs) == 3</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="TSR depending on train length"
 Guid="0dc08e59-a3e3-427f-8849-75294fae0a10"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 Name="TSR depending on train length"
 Guid="ea9c79bf-fcd0-4947-a3ac-9211c3fdb95e"
>
<ReqRef
 Id="3dd078b7-9ad0-407d-a57a-510c8a7213ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="10399232-e6d6-44f0-b05f-ec4aec3501bb"
>
</ReqRef><ReqRef
 Id="49595724-3359-4536-a90e-542bc90ffc8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="62843834-3e43-4a3d-bf32-d886849f9a85"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="ef0a0dfc-fff6-4a88-8864-abca2706c611"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="1a552bf7-c813-4382-8d90-6b249a2bd109"
>
<Actions>
<Action
 Guid="f2123c43-bf25-4ce4-933d-bade8ad78278"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide TSR"
 Guid="fe760e56-c7ee-4618-810e-47c4a8776f22"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="5ffe5fae-45c5-4383-8866-1a2011f600de"
>
<Actions>
<Action
 Guid="5889be2c-a884-48d9-9c5d-2cd234b08248"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 1515,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.Train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action><Action
 Guid="6651ee7c-9184-42c3-ac16-99c1733ffe82"
>Odometry.NominalDistance &lt;- 2700.0</Action><Action
 Guid="2b298f20-a339-4b70-b5f2-eeca0d359d61"
>INSERT BTM.LRBG.PreviousBaliseGroupStruct{
    BaliseGroup =&gt; BTM.LRBG.BaliseGroupStruct
{
    NID_BG=&gt;9616,
    Orientation=&gt;OrientationEnum.Nominal,
    Position=&gt;BTM.PositionStruct
    {
        OverReadingAmountOdo =&gt; 2.0,
        Position =&gt; 2000.0,
        UnderReadingAmountOdo =&gt; 1.0
    }
},
    IsLRBG =&gt; True,
    IsSingle =&gt; False
}

 IN BTM.LRBG.PreviousBaliseGroups</Action><Action
 Guid="b6fd6292-b81c-4c1b-a57c-44040a3fad73"
>Kernel.TrainData.TrainData.Value.TrainLength &lt;- 150.0</Action><Action
 Guid="158f9fed-8235-4e31-a375-3951c9e1f9d5"
>Kernel.TSR.TSRs &lt;- []</Action><Action
 Guid="1a073c75-9166-437b-b8c1-bb5b9914c0fc"
>Kernel.TrainPosition.Position.DirectionalPositionInformation.TrainOrientation &lt;- OrientationEnum.Nominal</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Check TSR length"
 Guid="69c1838f-6faa-4fab-a42b-ffe3e6c0915b"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="9f82841b-c626-4208-bac9-572447b51b16"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 Guid="a94a4c05-ecb6-4c9f-9796-54c4d5dffda2"
>Kernel.TSR.SpeedRestrictions ( 3000.0 ) == BaseTypes.Speed.MaxSpeed</Expectation><Expectation
 Kind="Instantaneous"
 Guid="cb6dde0c-f0f0-4f54-906e-dd82c5725f6f"
>Kernel.TSR.SpeedRestrictions ( 4000.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="d023dc5c-e165-4d91-a4ff-d722a1c7a90b"
>Kernel.TSR.SpeedRestrictions ( 5499.9 + 150.0 ) == 25.0</Expectation><Expectation
 Kind="Instantaneous"
 Guid="4edc63e1-1644-4553-9a0e-2ebdcd9e2da0"
>Kernel.TSR.SpeedRestrictions ( 5500.0 + 150.0 ) == BaseTypes.Speed.MaxSpeed</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence><SubSequence
 D_LRBG=""
 Level=""
 Mode=""
 NID_LRBG=""
 Q_DIRLRBG=""
 Q_DIRTRAIN=""
 Q_DLRBG=""
 RBC_ID=""
 RBCPhone=""
 Name="TSR shall not replace another with same identity"
 Guid="721a0341-5291-440b-b669-ce3d23d9bd95"
>
<TestCases>
<TestCase
 Feature="0"
 Case="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TSR shall not replace another with same identity"
 Guid="7ed50794-e6ee-420e-b863-88191744dae1"
>
<ReqRef
 Id="f7e20aa8-abb8-4da2-bb20-5ff57e4a56b9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="247f2df7-6172-4ba2-b5b3-2c23e45417db"
>
</ReqRef><Steps>
<Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Setup"
 Guid="c3766e46-e8ab-4dab-9bf8-af1def32ae34"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="5d8805b8-9cab-401f-ab93-a06257c1c68c"
>
<Actions>
<Action
 Guid="da6f5fd1-9730-4bdb-8f3a-557df0db3815"
>Testing.InitializeTestEnvironment
(
    aTrainPosition =&gt; 100.0,
    aMode =&gt; ModeEnum.FS
)</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide TSR"
 Guid="24d65018-122c-46c0-88f3-f87e9b3e9437"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="e723d7fd-7704-4205-a14d-78027ed59124"
>
<Actions>
<Action
 Guid="9b165abc-b71a-4d49-a9b9-f67ccf071d92"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 1515,
                    D_TSR =&gt; 4000,
                    L_TSR =&gt; 1500,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="393e4725-c1ca-46d8-b1be-5d2a80df358b"
>Kernel.TSR.TSRs != []</Expectation></Expectations>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Provide a New TSR with different identity"
 Guid="162f1099-2262-4f8b-8a59-b54e273064f7"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="5cd5d3c7-097b-44f6-aded-1f3ff0693a43"
>
<Actions>
<Action
 Guid="3e531cab-559f-497f-ab04-9b83b29dec2c"
>BTM.Message.SystemVersion2 &lt;- Messages.EUROBALISE.Message
{
    Q_UPDOWN =&gt; Messages.Q_UPDOWN.Up_link_telegram,
    M_VERSION =&gt; Messages.M_VERSION.Version_2_0__introduced_in_SRS_3_0_0,
    Q_MEDIA =&gt; Messages.Q_MEDIA.Balise,
    N_PIG =&gt; 0,
    N_TOTAL =&gt; 0,
    M_DUP =&gt; Messages.M_DUP.No_duplicates,
    M_MCOUNT =&gt; 4,
    NID_C =&gt; 140,
    NID_BG =&gt; 2124,
    Q_LINK =&gt; Messages.Q_LINK.Linked,
    Sequence1 =&gt; 
    [
        Messages.EUROBALISE.SubStructure1
        {
            TRACK_TO_TRAIN =&gt; Messages.PACKET.TRACK_TO_TRAIN.Message
            {
                TEMPORARY_SPEED_RESTRICTION =&gt; Messages.PACKET.TRACK_TO_TRAIN.TEMPORARY_SPEED_RESTRICTION.Message
                {
                    NID_PACKET =&gt; 8,
                    Q_DIR =&gt; Messages.Q_DIR.Both_directions,
                    L_PACKET =&gt; 400,
                    Q_SCALE =&gt; Messages.Q_SCALE._1_m_scaleC,
                    NID_TSR =&gt; 1516,
                    D_TSR =&gt; 3000,
                    L_TSR =&gt; 1000,
                    Q_FRONT =&gt; Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element,
                    V_TSR =&gt; 5
                }
            }
        }
    ]
}</Action></Actions>
</SubStep></SubSteps>
</Step><Step
 Distance="0"
 IO="NA"
 LevelIN="NA"
 LevelOUT="NA"
 ModeIN="NA"
 ModeOUT="NA"
 TranslationRequired="FALSE"
 Name="Data check"
 Guid="2d378678-4cb0-4865-8ab5-21c2b39bfe5a"
>
<SubSteps>
<SubStep
 TimeDelay="NotDelayed"
 Name="Sub-step1"
 Guid="678bab27-5860-4c90-a764-87e6b68cb36d"
>
<Expectations>
<Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="45fbee06-7cf8-4de6-a515-fc68760b7d15"
>Kernel.TSR.TSRs != []</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="60d605f9-aec2-4265-8505-7f6e5a69acda"
>THERE_IS X IN Kernel.TSR.TSRs | X.Id == 1515</Expectation><Expectation
 Kind="Instantaneous"
 DeadLine="1"
 Guid="bd528437-b96f-45eb-a5b6-1280c721ac97"
>THERE_IS X IN Kernel.TSR.TSRs | X.Id == 1516</Expectation></Expectations>
</SubStep></SubSteps>
</Step></Steps>
</TestCase></TestCases>
</SubSequence></SubSequences>
</Frame>
