<NameSpace
 X="1"
 Y="61"
 Width="100"
 Height="50"
 Name="MAWithShiftedLocationReference"
 Guid="b48668cf-152e-4767-a0e0-c4b517c01287"
>
<NameSpaces>
</NameSpaces>
<Functions>
<Function
 Type="Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1"
 Default=""
 X="190"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdatePacket"
 Guid="9c28027a-711c-4bf8-9cfb-365f601b4d2c"
>
<ReqRef
 Id="7e88e2b3-1b73-48bd-95a8-f020f52a8c29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="71275280-38be-4ea8-a36e-ea2496894805"
>
</ReqRef><ReqRef
 Id="47391884-e324-440f-9e6b-4f9c473e65f5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0c3d892b-98a2-4bbe-8891-18d231d51f18"
>
</ReqRef><ReqRef
 Id="2e204bb0-a930-4e96-b8d6-7cc40f786b49"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d53ed44e-6ee7-4150-8a96-d2449c1ab97a"
>
</ReqRef><ReqRef
 Id="151b7606-a494-4c37-b213-78285a81ee36"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e1b2699-bb83-4349-8ad9-e0bfacbcaab1"
>
</ReqRef><ReqRef
 Id="048c6803-4b5c-44eb-a168-96210bf6ea7a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ad8e057-a3b3-4791-9097-3ff16451eae1"
>
</ReqRef><ReqRef
 Id="307e55cd-3b43-43bd-820d-42c2e4cce1cd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="61443633-5c11-45fb-a06b-24b993b02023"
>
</ReqRef><ReqRef
 Id="c084a826-1239-483d-bfcb-a9dd55aec9ae"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a1f44919-384f-4746-a11f-e541441fb6f6"
>
</ReqRef><ReqRef
 Id="7fb56653-6714-4cbb-bedc-707d50e0c8a5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1891f953-8771-4160-93cd-6a70cf410efa"
>
</ReqRef><ReqRef
 Id="ce6b09b6-c260-4d91-b924-d9549fc5567a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2acf4007-adf3-4905-b720-9815706bea42"
>
</ReqRef><ReqRef
 Id="5d46f9fd-947a-4c92-9206-f046a0adcae1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7f1fcd2e-a6c6-4aa4-8d91-721c634ff495"
>
</ReqRef><ReqRef
 Id="7f431043-0c98-4c63-98bd-9290aae694c8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a03e949-0f19-4b4e-a421-8543c46e7f0f"
>
</ReqRef><ReqRef
 Id="86e96b82-5c16-4333-be51-a07f3de01b90"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1624770e-4ea4-46ef-8206-487370225ebf"
>
</ReqRef><ReqRef
 Id="2106299a-b59f-4122-963a-65a6e9d41eb9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3b48fd47-23c6-4342-a34e-22b8ff29b1f7"
>
</ReqRef><ReqRef
 Id="af703b5c-a0d0-4381-aa80-2025e1dd29b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ab1980c4-5ed7-4d9d-82f6-dbfb94a70338"
>
</ReqRef><ReqRef
 Id="113f048f-069d-45e0-a17a-4450fe60e5b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d00bd5d5-0e17-4298-a66e-f2bc19dca161"
>
</ReqRef><ReqRef
 Id="05a23466-35cf-417c-b1e5-933ba8520f1f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a3dbb532-8882-4837-9e14-234de683da83"
>
</ReqRef><ReqRef
 Id="874faace-d40a-4fd0-a263-bc67d3587800"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1433aecf-ccf1-4fb1-91e7-629027744698"
>
</ReqRef><ReqRef
 Id="62691d9e-ba96-454d-9765-7f67f334bf49"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e6eda44-f2ed-450f-8c5f-cf828e9ddaff"
>
</ReqRef><ReqRef
 Id="df94e616-cad0-4d32-a640-e0f632e31f50"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d06e572f-f117-482b-94f9-57d2d2d95b3e"
>
</ReqRef><ReqRef
 Id="6e14d533-4ee6-45a5-abc3-859971cc952f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a3e64c5-1154-41c6-b7c3-510d8891ed0c"
>
</ReqRef><ReqRef
 Id="cf6e35f5-2279-4578-9d49-8349bcde43bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a132a25-f5b3-4472-9c7c-70541d5315a5"
>
</ReqRef><ReqRef
 Id="42c959c1-7e77-4af7-918c-fc1fb7583e63"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="771b4664-9120-4325-81be-5ebfbf57ae47"
>
</ReqRef><ReqRef
 Id="07ca06b7-5fa6-4ecd-b5ce-edbf1224f057"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bc019816-6f82-4232-879b-164aa92d38d8"
>
</ReqRef><ReqRef
 Id="18127870-e699-49e4-bfab-5f3eca361a92"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="628cb46e-3b54-46c6-afe9-fb687dd7e345"
>
</ReqRef><ReqRef
 Id="8791186c-5ae7-4de3-8c2c-d9adb001e607"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ec3673c1-1101-4edc-bef3-0b614c34512e"
>
</ReqRef><ReqRef
 Id="79ed538a-a7a1-4183-9c4e-2cecb1cf8c5a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="92f4a7ab-d043-4c5e-b700-47646ea2f81d"
>
</ReqRef><ReqRef
 Id="5ef113ba-d211-4bc0-b419-9bbfe2e88e23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eeeffa65-aa26-45c9-b397-4ec3fb3b53d2"
>
</ReqRef><ReqRef
 Id="d5fc5777-ec61-4f63-89fb-b6ef2b8daf16"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f707e244-8ee3-437e-937c-e58a7d96f58b"
>
</ReqRef><ReqRef
 Id="dd40b03c-9509-4c43-a706-9f3a39bfd816"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6db2be86-d01c-4517-8685-1648e1879256"
>
</ReqRef><ReqRef
 Id="7acfd5dd-c1e0-4099-afd1-4aec793a4f83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8928d704-f49a-49ee-9b05-58bf0dd4ee3a"
>
</ReqRef><ReqRef
 Id="8334852c-1dc5-44a8-b323-de94b46ece5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="96686b7c-3f35-4565-85ba-dc3588e3cdc6"
>
</ReqRef><ReqRef
 Id="0c10259a-5754-46ad-ac33-e26535fda1b0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c0f16e9d-4259-4960-a7b7-100ac55f0b25"
>
</ReqRef><ReqRef
 Id="09427f89-cbc0-42ac-8b73-9e0670c3a26c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="62c167f3-a912-442d-8975-c79b982ee17c"
>
</ReqRef><ReqRef
 Id="2eca954d-1d12-4569-93ee-d511d8ef6b53"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0c583082-96f7-4d45-96c4-6506aa77cf36"
>
</ReqRef><ReqRef
 Id="1fc4bed7-083a-4502-9ea8-3659fd2119d9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2b178c24-caa4-45a6-b67c-d7da06d1f5c4"
>
</ReqRef><ReqRef
 Id="0a63475f-100b-41f3-92ea-38f5e614968e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="158eab43-1518-432b-89cb-b911b16c7448"
>
</ReqRef><ReqRef
 Id="48847af2-0798-4bc8-893b-ab3c2dc64618"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7784f02-10c3-478c-9198-33b46073a71f"
>
</ReqRef><ReqRef
 Id="c218db07-182a-4d0e-ab42-6e8534725b2b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1c08dc70-6f89-4148-ba14-b832a0fc75e7"
>
</ReqRef><ReqRef
 Id="eb1be6a4-5382-4db6-ad3d-b995d63de9c5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="47c65c40-d4e4-46f0-84c9-02651da30545"
>
</ReqRef><ReqRef
 Id="a5a976a9-3a94-456f-b7f4-515d3865dd17"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28bad4f0-c4c6-4fb4-b606-83403e55f2e9"
>
</ReqRef><ReqRef
 Id="53495f75-2a8f-4dc6-84e1-d6921f3a3a10"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1097b455-c7a6-44ce-9ec6-5d0c1cd2877f"
>
</ReqRef><ReqRef
 Id="68267a57-0018-494f-9160-0f3b019e1d39"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8a69902c-cc49-4969-864e-4f4cebc037a3"
>
</ReqRef><ReqRef
 Id="5cf80099-53b6-4f56-8deb-351646ffc072"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1c33efca-79ba-490e-ad8a-2cf1317d904c"
>
</ReqRef><ReqRef
 Id="e167af29-a6ba-419f-9df8-853452883c41"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aea48e39-df22-4b7f-a354-bee60351bb5a"
>
</ReqRef><ReqRef
 Id="5d37ad2a-29f9-4613-a9ed-7ebb62eb2713"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="203cc450-d1ce-4634-b457-175f4c260078"
>
</ReqRef><ReqRef
 Id="5a9ff7a7-6960-4afb-b2d1-4e64bd0f979e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d68d14c1-a0d6-4a9e-bf83-2e4c334409a3"
>
</ReqRef><Parameters>
<Parameter
 Type="Messages.SystemVersion1.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1"
 Name="aPacket"
 Guid="70169213-ec2e-4d7c-8d37-a5be5e124539"
>
</Parameter><Parameter
 Type="Messages.SystemVersion1.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Collection1"
 Name="aOtherPackets"
 Guid="4b35ab4d-4597-42f0-99b0-8dd8331b56b9"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Packet 3 - National values"
 Guid="08ba8a1e-4415-480d-8c3e-260856f60c1b"
>
<PreConditions>
<PreCondition
 Guid="3abcbc07-b7d5-48d6-80b0-eed653f0015b"
>Available(aPacket.NATIONAL_VALUES)</PreCondition><PreCondition
 Guid="48a481f6-f5ca-4e23-b988-bf507bea5085"
>FORALL X IN aOtherPackets | NOT Available(X.NATIONAL_VALUES_FOR_BRAKING_CURVES)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
    NATIONAL_VALUES =&gt; VersionManagement.Translation.Packets.NationalValues.UpdatedNV(aPacket.NATIONAL_VALUES)
}</Expression>
</Case><Case
 Name="Packet 3 + Packet 203 - Full national values"
 Guid="2af25637-7d22-42a2-86ba-71097f94c474"
>
<PreConditions>
<PreCondition
 Guid="78b58789-f2d2-46e1-a47f-0f2526be16e3"
>Available(aPacket.NATIONAL_VALUES)</PreCondition><PreCondition
 Guid="30f28f81-8458-40cf-9aa8-a1a9d4109ccf"
>THERE_IS X IN aOtherPackets | Available(X.NATIONAL_VALUES_FOR_BRAKING_CURVES)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
    NATIONAL_VALUES =&gt; VersionManagement.Translation.Packets.FullNationalValues.UpdatedNV(aPacket.NATIONAL_VALUES,
(FIRST X IN aOtherPackets | Available(X.NATIONAL_VALUES_FOR_BRAKING_CURVES)
).NATIONAL_VALUES_FOR_BRAKING_CURVES)
}</Expression>
</Case><Case
 Name="Packet 5 - Linking"
 Guid="19253778-a24a-4629-9f41-582709444981"
>
<Comment>Packet 5 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="508f95e2-ef7a-4fbd-a5c8-564496296200"
>Available(aPacket.LINKING)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
LINKING =&gt; aPacket.LINKING
}</Expression>
</Case><Case
 Name="Packet 21 - Gradient profile"
 Guid="54c77705-bc5a-4d47-af00-648272000e1e"
>
<PreConditions>
<PreCondition
 Guid="79823685-aefc-44a5-a139-911bdf75974b"
>Available(aPacket.GRADIENT_PROFILE)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
    GRADIENT_PROFILE =&gt; aPacket.GRADIENT_PROFILE
}</Expression>
</Case><Case
 Name="Packet 27 - ISSP"
 Guid="3c86f1cc-f009-481d-abfd-5f5b71fd021b"
>
<PreConditions>
<PreCondition
 Guid="bc6d8e40-4c4a-445f-95e2-7a657c49eef9"
>Available(aPacket.INTERNATIONAL_STATIC_SPEED_PROFILE)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
INTERNATIONAL_STATIC_SPEED_PROFILE =&gt; VersionManagement.Translation.Packets.InternationalStaticSpeedProfile.UpdatedSSP(aPacket.INTERNATIONAL_STATIC_SPEED_PROFILE)  
}</Expression>
</Case><Case
 Name="Packet 39 - Track condition change of traction system"
 Guid="94caa74e-5fcd-4875-ac72-b9765c917f64"
>
<Comment>Updating packet 39 if the packet 239 is absent and depending on the value of M_TRACTION.
This packet is rejected (see default case) if packet 239 is found or if the value of M_TRACTION is not translatable.</Comment>
<PreConditions>
<PreCondition
 Guid="37c265d0-766d-4b4c-821d-d18b66c55b61"
>Available(
aPacket.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM
)</PreCondition><PreCondition
 Guid="4390b26a-0916-4f53-8da7-247cbf9af5c0"
>FORALL X IN aOtherPackets | NOT Available(X.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM_BL3)</PreCondition><PreCondition
 Guid="eef37bd8-a86b-4e2e-8b5b-835faff83b60"
>VersionManagement.Translation.Packets.TrackConditionChangeOfTractionSystem.IsTranslatable(aPacket.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM.M_TRACTION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM
 =&gt; VersionManagement.Translation.Packets.TrackConditionChangeOfTractionSystem.UpdatedPacket(
    aPacket=&gt; aPacket.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM
)
}</Expression>
</Case><Case
 Name="Packet 41 - Level transition order"
 Guid="89d14c76-6d7a-4287-b670-60c3b659a98f"
>
<Comment>Packet 41 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="5fa19d02-cff5-43b9-8eb1-395fabb42c42"
>Available(aPacket.LEVEL_TRANSITION_ORDER)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
LEVEL_TRANSITION_ORDER=&gt; aPacket.LEVEL_TRANSITION_ORDER
}</Expression>
</Case><Case
 Name="Packet 42 - Session management"
 Guid="c2c2708c-33ee-4955-84dc-2dd9816a17a3"
>
<Comment>Packet 42 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="5543cc13-1b94-4239-bafa-e1ed4ee15250"
>Available(aPacket.SESSION_MANAGEMENT)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
SESSION_MANAGEMENT=&gt; aPacket.SESSION_MANAGEMENT
}</Expression>
</Case><Case
 Name="Packet 44 - Data used by applications outside the ERTMS/ETCS system"
 Guid="d245a5f2-c8b6-43ed-b0d5-3ae6d2a3a4e0"
>
<Comment>Packet 44 is left unchanged in the spec but we need a translation.</Comment>
<PreConditions>
<PreCondition
 Guid="a169afcd-c183-43c3-a062-6adf1321b621"
>Available(aPacket.DATA_USED_BY_APPLICATIONS_OUTSIDE_THE_ERTMS_ETCS_SYSTEM)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
    DATA_USED_BY_APPLICATIONS_OUTSIDE_THE_ERTMS_ETCS_SYSTEM =&gt; VersionManagement.Translation.Packets.DataUsedByApplicationsOutsideTheERTMS_ETCSSystem.UpdatedPacket(aPacket.DATA_USED_BY_APPLICATIONS_OUTSIDE_THE_ERTMS_ETCS_SYSTEM)
  }</Expression>
</Case><Case
 Name="Packet 45 - Radio network registration"
 Guid="f318eaaf-b29f-405e-9cab-4b817d6cce0d"
>
<Comment>Packet 45 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="f09d88a0-7f43-491d-97b9-8a36255282e8"
>Available(aPacket.RADIO_NETWORK_REGISTRATION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
RADIO_NETWORK_REGISTRATION =&gt; aPacket.RADIO_NETWORK_REGISTRATION
}</Expression>
</Case><Case
 Name="Packet 51 - Axle load speed profile"
 Guid="3f471712-b06d-42d9-9bff-15b5c2fa4b42"
>
<Comment>D_TRACKINIT is used only if Q_TRACKINIT is 1, in which case D_TRACKINIT is always 0. We set it to 0 in any case.</Comment>
<PreConditions>
<PreCondition
 Guid="e98a048e-6689-49c8-91bb-37c74e1fdda7"
>Available(aPacket.AXLE_LOAD_SPEED_PROFILE)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
AXLE_LOAD_SPEED_PROFILE =&gt; VersionManagement.Translation.Packets.AxleLoadSpeedProfile.UpdatedPacket(aPacket.AXLE_LOAD_SPEED_PROFILE)
}</Expression>
</Case><Case
 Name="Packet 57 - Movement authority request parameters"
 Guid="ebe8978d-bd5c-48e7-8c87-9ecd5124422b"
>
<Comment>Packet 57 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="4e9fd4df-1e62-465b-a303-51950630f2b4"
>Available(aPacket.MOVEMENT_AUTHORITY_REQUEST_PARAMETERS)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
MOVEMENT_AUTHORITY_REQUEST_PARAMETERS =&gt; aPacket.MOVEMENT_AUTHORITY_REQUEST_PARAMETERS
}</Expression>
</Case><Case
 Name="Packet 58 - Position report parameters"
 Guid="4ba974f7-2293-401f-bbd4-7cc7454ba707"
>
<Comment>Packet 58 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="8771efde-0a9d-41b5-9b41-bb6c141e8822"
>Available(aPacket.POSITION_REPORT_PARAMETERS)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
POSITION_REPORT_PARAMETERS =&gt; aPacket.POSITION_REPORT_PARAMETERS
}</Expression>
</Case><Case
 Name="Packet 65 - Temporary speed restriction"
 Guid="ef923daa-9a07-409f-8a7e-d63b9e9c7d8c"
>
<Comment>Packet 65 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="49d8a22b-26d8-413b-8224-c104f7278f87"
>Available(aPacket.TEMPORARY_SPEED_RESTRICTION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TEMPORARY_SPEED_RESTRICTION =&gt; aPacket.TEMPORARY_SPEED_RESTRICTION
}</Expression>
</Case><Case
 Name="Packet 66 - Temporary speed restriction revocation"
 Guid="738d913c-7043-42ce-80d4-6daa36d7bd8c"
>
<Comment>Packet 66 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="4fb3111a-a015-43bf-a3e6-c28f2bc68870"
>Available(aPacket.TEMPORARY_SPEED_RESTRICTION_REVOCATION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TEMPORARY_SPEED_RESTRICTION_REVOCATION =&gt; aPacket.TEMPORARY_SPEED_RESTRICTION_REVOCATION
}</Expression>
</Case><Case
 Name="Packet 68 - Track condition"
 Guid="33ce4423-1e03-4644-9561-768cdd3dcd23"
>
<Comment>Packet 68 is left unchanged unless packet 206 is present, in which case it replaces packet 68, or the value of M_TRACKCOND is either 1 or 2, in which case M_TRACKCOND becomes 0.</Comment>
<PreConditions>
<PreCondition
 Guid="d91ba53b-ba76-4e85-94d4-73d8b5244e63"
>Available(aPacket.TRACK_CONDITION)</PreCondition><PreCondition
 Guid="6ef5ec8c-f4b2-4f74-8229-1c83c9066989"
>FORALL X IN aOtherPackets | NOT Available(X.TRACK_CONDITION_BL3)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TRACK_CONDITION =&gt; VersionManagement.Translation.Packets.TrackCondition.UpdatedPacket(
    aPacket=&gt; aPacket.TRACK_CONDITION
)
}</Expression>
</Case><Case
 Name="Packet 70 - Route suitability data"
 Guid="f68e8b34-52ec-4415-8514-e5fedcd90baa"
>
<Comment>By default, Packet 70 is rejected, in particular if Packet 207 is present.See however the function RouteSuitabilityData.UpdatedPacket for exceptional cases.</Comment>
<PreConditions>
<PreCondition
 Guid="22e0d17a-50c6-4de4-9b33-a8919983fb63"
>Available(aPacket.ROUTE_SUITABILITY_DATA)</PreCondition><PreCondition
 Guid="cf905d86-e5bf-4d83-bfdb-4f51907c8686"
>FORALL X IN aOtherPackets | NOT Available(X.ROUTE_SUITABILITY_DATA_BL3)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
ROUTE_SUITABILITY_DATA =&gt; VersionManagement.Translation.Packets.RouteSuitabilityData.UpdatedPacket(
    aPacket=&gt; aPacket.ROUTE_SUITABILITY_DATA
)
}</Expression>
</Case><Case
 Name="Packet 71 - Adhesion factor"
 Guid="e4f7d61d-b4b9-45b1-bf01-b0dd782b276a"
>
<Comment>Packet 71 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="ba6f997e-ed23-483a-abd6-d5767dae84ac"
>Available(aPacket.ADHESION_FACTOR)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
ADHESION_FACTOR =&gt;
aPacket.ADHESION_FACTOR
}</Expression>
</Case><Case
 Name="Packet 72 - Packet for sending plain text messages"
 Guid="a134c97d-f4b6-4e52-92f9-fd7a726af912"
>
<Comment>Packet translatation modelled as follows: Q_CONFTEXTDISPLAY and Q_TEXTREPORT are always set to 0 and NID_TEXTMESSAGE, NID_C and NID_RBC are set to their default values by not prescribing them any value (since Q_TEXTREPORT cannot evaluate to 1).</Comment>
<PreConditions>
<PreCondition
 Guid="e8e1d9c3-f5f5-46d3-b36e-c6463ac70e2e"
>Available(aPacket.PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES =&gt; VersionManagement.Translation.Packets.PacketForSendingPlainTextMessages.UpdatedPacket(
    aPacket=&gt; aPacket.PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES)
}</Expression>
</Case><Case
 Name="Packet 79 - Geographical position information"
 Guid="fb8559bd-bd11-4a88-ad01-62b4caf2428c"
>
<Comment>The only change between the two versions is the size of the range M_POSITION. Hence the last acceptable value, understood as infinity, is adapted.</Comment>
<PreConditions>
<PreCondition
 Guid="bbe974fc-f901-47c1-8bd0-e7f135c7f5d7"
>Available(aPacket.GEOGRAPHICAL_POSITION_INFORMATION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
GEOGRAPHICAL_POSITION_INFORMATION =&gt; VersionManagement.Translation.Packets.GeographicalPositionInformation.UpdatedPacket(
    aPacket=&gt; aPacket.GEOGRAPHICAL_POSITION_INFORMATION)
}</Expression>
</Case><Case
 Name="Packet 80 - Mode profile"
 Guid="76e7100f-a1af-4d6e-9da4-13dd235a42e1"
>
<PreConditions>
<PreCondition
 Guid="934bbc89-bdeb-477a-9378-69166e14da19"
>Available(aPacket.MODE_PROFILE)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
MODE_PROFILE =&gt; VersionManagement.Translation.Packets.ModeProfile.UpdatedPacket(
    aPacket=&gt; aPacket.MODE_PROFILE)
}</Expression>
</Case><Case
 Name="Packet 131 - RBC transition order"
 Guid="d9b91001-c742-4b65-9e05-b74d809db0c9"
>
<Comment>Packet 131 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="0e36f607-b6c3-4377-b556-16659400466d"
>Available(aPacket.RBC_TRANSITION_ORDER)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
RBC_TRANSITION_ORDER =&gt; aPacket.RBC_TRANSITION_ORDER
}</Expression>
</Case><Case
 Name="Packet 138 - Reversing area information"
 Guid="ee23dfc6-2b26-4c16-a527-bbfc8f003f9d"
>
<Comment>Packet 138 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="f23a2f54-0fb2-4b8c-8d47-0b62a5f0975e"
>Available(aPacket.REVERSING_AREA_INFORMATION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
REVERSING_AREA_INFORMATION =&gt; aPacket.REVERSING_AREA_INFORMATION
}</Expression>
</Case><Case
 Name="Packet 139 - Reversing supervision information"
 Guid="f89c208d-9fa1-4961-ad2a-6908a354a494"
>
<Comment>Packet 139 is left unchanged.</Comment>
<PreConditions>
<PreCondition
 Guid="3c84a300-89c3-438e-a028-0d87194e9fbe"
>Available(aPacket.REVERSING_SUPERVISION_INFORMATION)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
REVERSING_SUPERVISION_INFORMATION =&gt; aPacket.REVERSING_SUPERVISION_INFORMATION
}</Expression>
</Case><Case
 Name="Packet 140 - Train running number from RBC"
 Guid="ffbbffef-6499-4870-b0bf-5acc46f2424b"
>
<Comment>Packet 140 is left unchanged in our modelisation.</Comment>
<PreConditions>
<PreCondition
 Guid="01bdc9f6-3fd3-4671-b81b-e09740d6bfbd"
>Available(aPacket.TRAIN_RUNNING_NUMBER_FROM_RBC)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TRAIN_RUNNING_NUMBER_FROM_RBC =&gt; aPacket.TRAIN_RUNNING_NUMBER_FROM_RBC
}</Expression>
</Case><Case
 Name="Packet 206 - Track condtion"
 Guid="28ed5194-7e66-485c-bc82-680bf83c275a"
>
<Comment>Packet 206 has its NID_PACKET changed to 68.</Comment>
<PreConditions>
<PreCondition
 Guid="1de6d88d-4b97-4268-8d10-e8a80f7dc671"
>Available(aPacket.TRACK_CONDITION_BL3)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TRACK_CONDITION =&gt; VersionManagement.Translation.Packets.TrackConditionBL3.UpdatedPacket(aPacket.TRACK_CONDITION_BL3)
}</Expression>
</Case><Case
 Name="Packet 207 - Route suitability data"
 Guid="00c42c1c-3aca-4270-967b-3d9d494c54c3"
>
<Comment>Packet 207 has its NID_PACKET changed to 70.</Comment>
<PreConditions>
<PreCondition
 Guid="ec386665-b944-4848-a264-27513cfb66db"
>Available(aPacket.ROUTE_SUITABILITY_DATA_BL3)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
ROUTE_SUITABILITY_DATA=&gt; VersionManagement.Translation.Packets.RouteSuitabilityDataBL3.UpdatedPacket(aPacket.ROUTE_SUITABILITY_DATA_BL3)
}</Expression>
</Case><Case
 Name="Packet 239 - Track condition change of traction system"
 Guid="2afa465f-2e8c-42ee-a7f3-1bd992993974"
>
<Comment>Packet 239 has its NID_PACKET changed to 39.</Comment>
<PreConditions>
<PreCondition
 Guid="487e7f13-2a99-42c4-a48a-33d037765350"
>Available(aPacket.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM_BL3)</PreCondition></PreConditions>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.SubStructure1{
TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM =&gt; VersionManagement.Translation.Packets.TrackConditionChangeOfTractionSystemBL3.UpdatedPacket(aPacket.TRACK_CONDITION_CHANGE_OF_TRACTION_SYSTEM_BL3)
}</Expression>
</Case><Case
 Name="Rejected"
 Guid="1e3b2f86-5baa-4e1b-a3a0-ddf02d369443"
>
<Comment>Default case: packet is rejected.</Comment>
<Expression>EMPTY</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Collection1"
 Default=""
 X="50"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="UpdatedPacketsList"
 Guid="e97a7048-5329-47ee-9258-5193edf33099"
>
<ReqRef
 Id="7e88e2b3-1b73-48bd-95a8-f020f52a8c29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="917012e3-7450-472f-89e7-72696cc49f23"
>
</ReqRef><Parameters>
<Parameter
 Type="Messages.SystemVersion1.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Collection1"
 Name="aPacketsList"
 Guid="d46ddd3a-9e02-43fa-88b7-abffa2372d67"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="8d912174-e9e2-42f8-9da4-78277355791a"
>
<Expression>MAP aPacketsList USING X IN VersionManagement.Translation.Messages.MAWithShiftedLocationReference.UpdatePacket(X, aPacketsList)</Expression>
</Case></Cases>
</Function><Function
 Type="Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Message"
 Default=""
 X="111"
 Y="1"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="UpdatedMessage"
 Guid="965257bc-426f-405f-a571-baafda6356a5"
>
<ReqRef
 Id="ca463c03-7353-453a-bfed-3225d1f0e3a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d1d0b0a-6a43-448a-b281-0b754be9609d"
>
</ReqRef><ReqRef
 Id="7e88e2b3-1b73-48bd-95a8-f020f52a8c29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ccff0b95-dd03-46d7-be8e-9633697d50c0"
>
</ReqRef><Parameters>
<Parameter
 Type="Messages.SystemVersion1.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Message"
 Name="aMessage"
 Guid="3e56da78-2789-471a-89fe-9ec90af66ff7"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="c09d0379-1d40-4dda-9fe8-4cc4a66add0f"
>
<Comment>LEVEL_2_3_MOVEMENT_AUTHORITY is left unchanged.</Comment>
<Expression>Messages.MESSAGE.TRACK_TO_TRAIN.MA_WITH_SHIFTED_LOCATION_REFERENCE.Message
{
  NID_MESSAGE =&gt; aMessage.NID_MESSAGE, 
  L_MESSAGE =&gt; aMessage.L_MESSAGE, 
  T_TRAIN =&gt; aMessage.T_TRAIN, 
  M_ACK =&gt; aMessage.M_ACK, 
  NID_LRBG =&gt; aMessage.NID_LRBG, 
  Q_SCALE =&gt; aMessage.Q_SCALE, 
  D_REF =&gt; aMessage.D_REF, 
  LEVEL_2_3_MOVEMENT_AUTHORITY =&gt; aMessage.LEVEL_2_3_MOVEMENT_AUTHORITY, 
Sequence1 =&gt; VersionManagement.Translation.Messages.MAWithShiftedLocationReference.UpdatedPacketsList( aMessage.Sequence1 )
}</Expression>
</Case></Cases>
</Function></Functions>
</NameSpace>
