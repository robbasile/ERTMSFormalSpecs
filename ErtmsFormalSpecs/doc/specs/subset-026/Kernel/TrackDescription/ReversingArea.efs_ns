<NameSpace
 X="10"
 Y="80"
 Width="100"
 Height="50"
 Name="ReversingArea"
 Guid="4539f8ea-644b-4ee0-848d-20a3d0ff72d9"
>
<NameSpaces>
</NameSpaces>
<Structures>
<Structure
 Default=""
 X="140"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingAreaStruct"
 Guid="c3674828-e194-402c-a734-a3f29b2ff94d"
>
<ReqRef
 Id="588756eb-1786-4776-86ae-3aaa296881a9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44c4fb13-6cd4-4fdb-aba7-eb3f8eea8607"
>
</ReqRef><ReqRef
 Id="571b7bcf-500a-4e43-8f4b-dfb64cfd4845"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b3a5c1c-d2d7-496b-8e92-ce7b9f2f7e79"
>
</ReqRef><ReqRef
 Id="65b30702-1fb1-4a4a-9f95-15a687c5840a"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="707c0abf-3f3c-40d6-b39b-71be6a9aad45"
>
</ReqRef><Comment>Represents the reversing area information: the length and the location.</Comment>
<StructureElement
 TypeName="BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="ab39d192-5f11-4bba-bf9b-67206e5bc20f"
>
<ReqRef
 Id="440cd70b-ba2e-4784-94eb-e86061e6397c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b0bbce5-367d-4cc2-b31d-4919055e56ec"
>
</ReqRef></StructureElement><StructureElement
 TypeName="BaseTypes.Length"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Length"
 Guid="84cf01dd-5f46-4f69-919a-d91b3a76eced"
>
<ReqRef
 Id="faec86d1-d6e7-42ac-88c2-a547be018a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="609c3865-2bcc-41b6-b91e-2e19db23e729"
>
</ReqRef></StructureElement><Interfaces>
<StructureRef
 Name="BaseTypes.LocationLengthInterface"
 Guid="031a2cc1-5433-4fcd-9c84-8173b171c49c"
>
</StructureRef></Interfaces>
</Structure><Structure
 Default=""
 X="260"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingSupervisionStruct"
 Guid="4a01a853-bb88-4a69-8f63-bc0badb98d21"
>
<ReqRef
 Id="796923a0-8b8a-4e7b-8af3-43f3398b27dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bcc59573-ea77-436f-a69d-abef8162a623"
>
</ReqRef><ReqRef
 Id="72e8fefb-6f1b-4b89-973e-be9bf554e996"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cbf80240-3553-473f-bf07-0aaea5113b57"
>
</ReqRef><ReqRef
 Id="65b30702-1fb1-4a4a-9f95-15a687c5840a"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="0c4c9fcc-f9ba-41f8-bdee-c0ad0fd56168"
>
</ReqRef><Comment>Represents the reversing supervision information: max distance to run in RV + reversing speed limit.</Comment>
<StructureElement
 TypeName="BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MaxDistance"
 Guid="aeb3d42c-0f35-48cf-9734-a4c61ad905ac"
>
<ReqRef
 Id="9576c9d7-f121-46e0-aae3-27170e0d7846"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67f0cf5b-5457-4395-8063-152ea5397cd8"
>
</ReqRef><ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="370d604e-a1b5-46ef-9a89-9047903db048"
>
</ReqRef><ReqRef
 Id="8532ef0e-00e7-4d13-832b-f44401f8d74a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6580f323-920f-4853-bd9d-4e30bc68744e"
>
</ReqRef></StructureElement><StructureElement
 TypeName="BaseTypes.Speed"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Speed"
 Guid="78661f79-1b8a-4b8e-92ed-3dad0d60184f"
>
<ReqRef
 Id="93098cba-bfd3-4dc4-ba29-a6f4fdc5a8cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="40348f25-0926-4d20-8d40-3d6d01c2d2b4"
>
</ReqRef><ReqRef
 Id="46aa1e33-5007-43a9-9c7f-3241bba8bbed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c577d8ea-46d9-4c98-9514-0eaefd361a8d"
>
</ReqRef><ReqRef
 Id="3518255f-a436-4201-afb9-867bb586c371"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="794a7a2f-1359-417b-a189-44815dc342be"
>
</ReqRef><ReqRef
 Id="12251a60-68aa-4b3a-a148-aaf3ecf250f4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3c557a3b-9a96-493d-b35f-f5e3d3d7c12d"
>
</ReqRef></StructureElement></Structure></Structures>
<Functions>
<Function
 Type="Boolean"
 Default=""
 X="140"
 Y="230"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingAllowed"
 Guid="7751e3f3-0673-4505-94ca-9d2297be4161"
>
<ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="649df0e1-36bd-48b6-a739-fb8a6ffdd7c9"
>
</ReqRef><ReqRef
 Id="e5f97755-8416-4822-93e4-2c3e935d4b0e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="69601603-4046-465b-a379-612b99f7ce26"
>
</ReqRef><ReqRef
 Id="29dc5283-29cc-4891-9d74-78e5761b8a31"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5e624a40-5a9c-4fb5-a5b9-8d5c4b0bd8db"
>
</ReqRef><Comment>Indicates whether the rain is allowed to begin a reversing movement.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="ba42e7be-863c-45f9-bd68-21517dcdd4d3"
>
<Expression>Odometry.TrainIsAtStandstill()
  AND  
FrontEndIsInRVArea()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="20"
 Y="230"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FrontEndIsInRVArea"
 Guid="fb0bafd4-6346-47e0-9207-f58a17267093"
>
<ReqRef
 Id="8fbfc24f-85cf-4a9a-92c5-bdff11b4a94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5439cb31-deba-4813-96b1-6fbe68096755"
>
</ReqRef><ReqRef
 Id="29dc5283-29cc-4891-9d74-78e5761b8a31"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0464e484-ea6a-471c-8712-eef44870e051"
>
</ReqRef><Comment>Determines whether there is a stored RV area and if the estimated front end is inside it.</Comment>
<Cases>
<Case
 Name="No reversing profile"
 Guid="1a52b72e-dc04-42c3-a3ca-da5afb577096"
>
<PreConditions>
<PreCondition
 Guid="e40d0492-5c16-4c23-8c3c-0de08498de85"
>NOT Available ( Kernel.TrackDescription.ReversingArea.ReversingAreaProfile )</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Value"
 Guid="938e2924-f1a7-4689-815b-691b530a3554"
>
<Expression>Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Location &lt;= Kernel.TrainPosition.FrontEndPosition ( DistanceIntervalEnum.Nom )
  AND  
Kernel.TrainPosition.FrontEndPosition ( DistanceIntervalEnum.Nom ) &lt; Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Location + BaseTypes.LengthToDistance ( Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Length )</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="140"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DeleteReversingAreaBeyondLocation"
 Guid="69d23a05-abc3-46db-8b51-5385b7137ffc"
>
<ReqRef
 Id="90495c82-f890-47b7-9b0f-0c7d08603ea7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="420740d2-9bda-4f6b-b563-942e9e6485fb"
>
</ReqRef><ReqRef
 Id="69c41e0d-de0a-4c0e-9b6d-32a32fdf13e2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d05d059-fbce-4f2e-9035-74207bfafdcd"
>
</ReqRef><ReqRef
 Id="8cd5d7d8-c20a-4927-9990-dacc4a577a3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6fe12e18-8c66-4e2d-8fa1-92e22a2680cc"
>
</ReqRef><ReqRef
 Id="9cfe52e2-c938-4965-bdaa-d8fc20e83a9a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7fa1081a-6e9e-47a0-92b3-76de48daadda"
>
</ReqRef><Comment>Deletes the reversing area profile beyond the provided location.</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="aLocation"
 Guid="b468f5cd-d0e4-4601-8d33-43bd462ac941"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete reversing area beyond the given location"
 Guid="c0a2db0c-fb17-471f-804f-d69076e7345e"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Delete reversing area beyond the given location"
 Guid="dd89a391-d6db-4bac-a852-25eeb6eee4bc"
>
<PreConditions>
<PreCondition
 Guid="7a7f772f-391c-46ae-b299-32807d8f04a7"
>Kernel.TrackDescription.ReversingArea.ReversingAreaProfile != EMPTY</PreCondition><PreCondition
 Guid="ddaf9e33-1bce-41a4-8818-1ad6d5f1c885"
>Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Location + Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Length &gt; aLocation</PreCondition></PreConditions>
<Actions>
<Action
 Guid="605cb642-b824-4661-af62-7896b4c53420"
>Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Length &lt;- BaseTypes.DistanceToLength(aLocation - Kernel.TrackDescription.ReversingArea.ReversingAreaProfile.Location)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="20"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingAreaOrSupervisionInformationReceived"
 Guid="2646b97c-1311-4a25-b2a4-2ffcdd752126"
>
<ReqRef
 Id="571b7bcf-500a-4e43-8f4b-dfb64cfd4845"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="98f2ed36-8ed1-4e62-831e-8f5bcecf2791"
>
</ReqRef><ReqRef
 Id="e9d57d91-d39a-4190-841c-fb33c0eeee48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="18294bc1-f929-49b7-a615-764ab0e4bc5e"
>
</ReqRef><ReqRef
 Id="54c20a27-60da-4df1-80ba-7ba841d7258f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ea3cabba-d55b-4ae6-9d2d-413d52ce6a4b"
>
</ReqRef><ReqRef
 Id="f3aec789-8e42-4041-befb-bf3d53519577"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a74fe8eb-a664-4e7c-99c3-885958e3fe3a"
>
</ReqRef><ReqRef
 Id="46356051-e464-4ceb-b54c-41ef8dc6017f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="983f8efe-7bfe-41d2-b2a6-e1d0a851d644"
>
</ReqRef><ReqRef
 Id="ffdc9150-a628-4750-a762-a41c20c3dd26"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3a92c8e9-67ca-48ef-9f31-6030140a6d5b"
>
</ReqRef><ReqRef
 Id="456d49d8-e372-4a93-b53b-700d92362a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd379e1f-cf22-4c98-a393-e008f7182c22"
>
</ReqRef><ReqRef
 Id="209659eb-aa53-4a6d-a58e-491a42b89b61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c277946d-237f-4b90-bbb9-f6551636ec73"
>
</ReqRef><ReqRef
 Id="3b4bfa4e-f425-4b5d-a82e-aaaf923dad11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd7a47a0-8224-465d-8ecc-d85bca74a13d"
>
</ReqRef><ReqRef
 Id="c57326e0-6fe8-4373-825f-149a86761548"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a95f40b4-c745-4055-8759-be34dd440294"
>
</ReqRef><ReqRef
 Id="6c2271aa-b854-4ce6-ba1f-4892e06164b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e260f94e-4b0f-4deb-89ea-f50eec740704"
>
</ReqRef><Comment>Handles reception of the reversing area and the reversing supervision.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.REVERSING_AREA_INFORMATION.Message"
 Name="RvAreaPacket"
 Guid="0881858c-9ede-4516-9c4a-fee99d69f2d5"
>
</Parameter><Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.REVERSING_SUPERVISION_INFORMATION.Message"
 Name="RvSupPacket"
 Guid="1ff6d64d-0b80-4a3e-abda-e390e20c9e53"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="d9ce8cd7-5c0c-4dc3-ad4c-71f42374cd17"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update Reversing Area information"
 Guid="78ef45d7-f4d4-48af-bc3e-6b1f73959123"
>
<ReqRef
 Id="5c6d17a2-fb76-49ca-a5dd-f555641e5dac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="de92bfd6-2172-4a07-ab26-45a16fc5532f"
>
</ReqRef><ReqRef
 Id="1cb531d4-2809-484c-bf3f-445bebb332ef"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="020da505-1223-49ef-9277-6a1ad548c78d"
>
</ReqRef><ReqRef
 Id="a52cd2e6-58e1-4320-84fc-de81d25edd20"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1f7e1d4a-ccb3-4a22-b733-e6c86008130c"
>
</ReqRef><ReqRef
 Id="1ae6444b-a835-402b-8bcb-d8f22f5d6aab"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bb825b48-5667-46f1-8ada-5abaf30eaab7"
>
</ReqRef><Comment>If available, the reversing area is handled first. The newly received information replaced the previous information.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update Reversing Area information"
 Guid="4612bbee-35e2-445b-83a2-bb53c0b0651d"
>
<PreConditions>
<PreCondition
 Guid="a3235e9b-ce8d-4391-b487-4ca2b69ae988"
>Kernel.Mode != ModeEnum.TR</PreCondition><PreCondition
 Guid="46ec0f5f-6fde-4864-a522-01cc7166f231"
>RvAreaPacket != EMPTY</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c9a4ad75-65e9-41d9-8526-ceb6c810d342"
>ReversingAreaProfile &lt;-  ReversingAreaStruct
{
    Location =&gt; aDistanceFromRef + MessageTypes.QScaleDistance ( distance =&gt; RvAreaPacket.D_STARTREVERSE, scale =&gt; RvAreaPacket.Q_SCALE ),
    Length =&gt; MessageTypes.QScaleLength ( length =&gt; RvAreaPacket.L_REVERSEAREA, scale =&gt; RvAreaPacket.Q_SCALE )
}</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update Reversing Supervision information"
 Guid="43a5230e-ee0c-454c-bdda-c158be8c2ff2"
>
<ReqRef
 Id="796923a0-8b8a-4e7b-8af3-43f3398b27dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="424aa89a-116f-4acf-9a98-09054694799e"
>
</ReqRef><ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9090afc1-e2d8-4633-bca1-ca2054dca61b"
>
</ReqRef><ReqRef
 Id="93098cba-bfd3-4dc4-ba29-a6f4fdc5a8cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b64cc309-451f-4e68-839d-cada341bfd8a"
>
</ReqRef><ReqRef
 Id="c0badaef-72d8-45d1-ab9f-8d178e73e47d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b4adc0b9-effe-45df-91b5-23279031b9a0"
>
</ReqRef><ReqRef
 Id="53afec70-5418-4e7d-9064-ba5f0d67662c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="def646f5-8d8a-4687-a22e-874db0ed9a71"
>
</ReqRef><ReqRef
 Id="1fc082d9-dd7b-437d-98f2-570cb6d352e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e4af5025-2bd1-4b11-bd32-95290b26c50f"
>
</ReqRef><Comment>After the reversing area, the reversing supervision information is handled. The newly received information replaces the previous information.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Update Reversing Supervision information"
 Guid="16dfd974-def9-41cb-afc1-1750d9851aca"
>
<PreConditions>
<PreCondition
 Guid="8ff6903f-16b5-48f5-99cd-994b7321e363"
>Kernel.Mode != ModeEnum.TR</PreCondition><PreCondition
 Guid="08e37fad-2997-469b-a1ca-1e531c444271"
>RvSupPacket != EMPTY</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5c73cf17-afa1-4f3d-9de7-197f6d552d0a"
>ReversingSupervisionInformation &lt;- ReversingSupervisionStruct
{
  MaxDistance =&gt; MessageTypes.QScaleDistance ( distance =&gt; RvSupPacket.D_REVERSE, scale =&gt; RvSupPacket.Q_SCALE ),
  Speed =&gt; MessageTypes.SpeedResolution ( speed =&gt; RvSupPacket.V_REVERSE, resolution =&gt; 5.0 )
}</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update Fixed Reference Location"
 Guid="20d843a0-7594-431a-8fbb-92e6835ed343"
>
<ReqRef
 Id="53afec70-5418-4e7d-9064-ba5f0d67662c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fc464801-434f-4ea1-8980-383edcbd3624"
>
</ReqRef><ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b106d08d-21e7-4415-a47d-1bb21c72dd31"
>
</ReqRef><Comment>If a new reversing area is received, the new fixed reference location is computed according to the received data. Otherwise, in case only the reversing supervision information is updated, the fixed reference location is not updated.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="New reversing area"
 Guid="88520c30-e91d-4a9a-8925-8fc84a2760ae"
>
<PreConditions>
<PreCondition
 Guid="993fb3cc-c001-41c7-9f52-9b4d9c9010b4"
>RvAreaPacket != EMPTY</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0ab15d1c-00e9-4104-b40f-6d39a27d33f5"
>ReferenceLocation &lt;- aDistanceFromRef + ReversingAreaProfile.Location + BaseTypes.LengthToDistance( aLength =&gt; ReversingAreaProfile.Length)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="ReversingArea.ReversingAreaStruct"
 DefaultValue="EMPTY"
 VariableMode="Internal"
 X="140"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingAreaProfile"
 Guid="56008f14-0b02-47d7-be00-a5b02d6c7d92"
>
<ReqRef
 Id="571b7bcf-500a-4e43-8f4b-dfb64cfd4845"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e184734-cac1-4df1-a2b6-1ceb0b199b57"
>
</ReqRef><ReqRef
 Id="e9d57d91-d39a-4190-841c-fb33c0eeee48"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8730bc4d-852c-4b1b-ad08-774ca6c8b1fd"
>
</ReqRef><ReqRef
 Id="f32ad7de-67d9-4075-bb38-75a13996ad98"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7c87ad45-99cc-4709-86e1-66f5ce7e7443"
>
</ReqRef><ReqRef
 Id="690dfc40-042d-4c8d-9e60-17b85d455fd3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5f81e6c2-802c-496e-a5b6-45edbb10bb3c"
>
</ReqRef><ReqRef
 Id="456d49d8-e372-4a93-b53b-700d92362a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0853ab31-f9d5-440f-b736-088e6444ad7f"
>
</ReqRef><ReqRef
 Id="209659eb-aa53-4a6d-a58e-491a42b89b61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f2480912-c0c1-4ad8-869a-f86c43cd10c4"
>
</ReqRef><ReqRef
 Id="3b4bfa4e-f425-4b5d-a82e-aaaf923dad11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1a882570-7a4a-494b-bb31-9462ad50ebff"
>
</ReqRef><ReqRef
 Id="c57326e0-6fe8-4373-825f-149a86761548"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e6e78ba-81a0-47a4-913e-7e94f522994d"
>
</ReqRef><ReqRef
 Id="65b30702-1fb1-4a4a-9f95-15a687c5840a"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="cce34809-691f-48ba-8cf4-7b2357af98c0"
>
</ReqRef><Comment>Represents the location and supervision information of the reversing area.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Incoming"
 X="20"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DriverTriesReversing"
 Guid="8e6bc53c-889f-4e9e-802a-15a2c00d851e"
>
<ReqRef
 Id="e3631d58-4959-4120-ba5d-9c47c20697ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8edbd34-39d9-4d5b-a5f2-1fafd2f98962"
>
</ReqRef><Comment>Information provided by the direction controller in the reverse position indicating that the driver tries to initiate reverse movement.</Comment>
</Variable><Variable
 Type="ReversingSupervisionStruct"
 DefaultValue="EMPTY"
 VariableMode="Internal"
 X="260"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReversingSupervisionInformation"
 Guid="2ac38805-34f7-41ef-9be4-066157b1d213"
>
<ReqRef
 Id="796923a0-8b8a-4e7b-8af3-43f3398b27dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4c15ea5f-842e-4c4b-ad4a-b7b2821a3cde"
>
</ReqRef><ReqRef
 Id="f08e576d-1c61-4c2b-b742-29f729a5728f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6f5f2c4b-31cd-4339-af68-f6631a25ebd2"
>
</ReqRef><ReqRef
 Id="c93e250c-fc42-406f-9706-6ec7488b8982"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="32d064c1-21ed-4805-8537-1d4fa289b05e"
>
</ReqRef><ReqRef
 Id="456d49d8-e372-4a93-b53b-700d92362a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7f1b8847-f1bd-42e2-9f1f-b192efdb6dd9"
>
</ReqRef><ReqRef
 Id="209659eb-aa53-4a6d-a58e-491a42b89b61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="49f645a0-3138-4fcd-99ef-9688f629efcd"
>
</ReqRef><ReqRef
 Id="3b4bfa4e-f425-4b5d-a82e-aaaf923dad11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f103bf7-a847-4d02-9267-c4cbb9bd8c31"
>
</ReqRef><ReqRef
 Id="c57326e0-6fe8-4373-825f-149a86761548"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="213c7e30-29f1-4585-a6a6-13325ea7b425"
>
</ReqRef><ReqRef
 Id="65b30702-1fb1-4a4a-9f95-15a687c5840a"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="5d6b95a1-94e0-4a00-bdb6-d5b1875dce96"
>
</ReqRef></Variable><Variable
 Type="BaseTypes.Distance"
 DefaultValue="BaseTypes.Distance.Unknown"
 VariableMode="Internal"
 X="380"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ReferenceLocation"
 Guid="755d8b17-55c8-4242-9a44-9315c04f874f"
>
<ReqRef
 Id="f4d58bfc-b004-4e15-9756-926a4d1205e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9498b94-71c2-4b12-b984-5d4a366221ee"
>
</ReqRef><ReqRef
 Id="456d49d8-e372-4a93-b53b-700d92362a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1deffc85-156d-46bf-923c-308760a2eb87"
>
</ReqRef><ReqRef
 Id="209659eb-aa53-4a6d-a58e-491a42b89b61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56cf3c76-8126-4d3a-a84b-c1b1938ba218"
>
</ReqRef><ReqRef
 Id="3b4bfa4e-f425-4b5d-a82e-aaaf923dad11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1eeb6c9d-a24b-463e-8327-6b24d0a26695"
>
</ReqRef><ReqRef
 Id="c57326e0-6fe8-4373-825f-149a86761548"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9325b54-b59a-4b56-a7c1-1ae1bd8b4a59"
>
</ReqRef><Comment>Represents the fixed reference location o the reversing area.</Comment>
</Variable></Variables>
<Rules>
<Rule
 Priority="Processing"
 X="20"
 Y="390"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Display reversing is possible"
 Guid="f30a4340-e68f-4699-8d96-297121cc4043"
>
<ReqRef
 Id="e5f97755-8416-4822-93e4-2c3e935d4b0e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7646c3c6-c98f-4c1c-948d-23407b55e499"
>
</ReqRef><ReqRef
 Id="29dc5283-29cc-4891-9d74-78e5761b8a31"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="be872f04-05c7-4c07-9c4e-ced3f4785f92"
>
</ReqRef><ReqRef
 Id="8fbfc24f-85cf-4a9a-92c5-bdff11b4a94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d9eae696-5553-4e54-9fe1-9c7d36984134"
>
</ReqRef><ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="65c73fb8-ab7a-49cc-9b2d-2a836436236d"
>
</ReqRef><ReqRef
 Id="8d1e3977-b707-4d35-b1ef-efbfffcd16e6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3add7575-2795-47ce-b0eb-81f7e629736b"
>
</ReqRef><ReqRef
 Id="e3631d58-4959-4120-ba5d-9c47c20697ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="543bcaec-0dac-471f-9f68-2f89ef07d96f"
>
</ReqRef><Comment>If the train is at standstill and is inside the reversing area, the on-board proposes to the driver to select reversing.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Display reversing is possible"
 Guid="34c1c15d-2542-4693-8f4c-fa21656c0db9"
>
<Comment>If the train is at standstill and is inside the reversing area, the on-board proposes to the driver to select reversing.</Comment>
<PreConditions>
<PreCondition
 Guid="a54d0740-d9d6-4ecd-930d-ad366a334730"
>ReversingAllowed()</PreCondition><PreCondition
 Guid="a87006bb-b89e-40ff-a62f-44b80838edb8"
>DMI.MasterDMI().In_AcknOfRVMode.InputInformation.RequestStatus == RequestEnum.Disabled</PreCondition><PreCondition
 Guid="02c224ed-0cc3-46ef-b8e8-dec3d21df680"
>Kernel.TrackDescription.ReversingArea.DriverTriesReversing</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ed5d42aa-ccad-44b5-b83e-130460638fea"
>DMI.MasterDMI().In_AcknOfRVMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Hide ack of reversing mode"
 Guid="766ca48e-df02-455a-8bef-cfd05e623a92"
>
<Comment>If the train can no longer enter RV mode but the request has been displayed, hide it.</Comment>
<PreConditions>
<PreCondition
 Guid="db77783c-afb6-44f1-9658-6c35954a36ca"
>DMI.MasterDMI().In_AcknOfRVMode.InputInformation.RequestStatus == RequestEnum.Request</PreCondition><PreCondition
 Guid="2eb95408-f48b-4c00-b4bc-c0fd04394790"
>NOT
(
ReversingAllowed()
  OR  
DriverTriesReversing
)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7e30fdb1-7e05-4e31-8293-5b5edb798c12"
>DMI.MasterDMI().In_AcknOfRVMode.InputInformation.Disable()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="140"
 Y="390"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Supervise reverse movement"
 Guid="96e4d638-cb3b-4edf-994b-45983e30891f"
>
<ReqRef
 Id="ec69a33a-c4a2-4cac-a583-23ae4a1ea22d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c168ed5a-07bd-4788-82cc-1a7540b86cb7"
>
</ReqRef><ReqRef
 Id="c37afeb1-2b13-4b84-9827-12fd7e37b1aa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8afc8e91-0db4-4985-80ee-5bf4ecd80d14"
>
</ReqRef><ReqRef
 Id="f9c64995-d84e-42ac-b3e5-517223de7279"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d41bcdad-5650-4eaa-95f1-fe37cac215fb"
>
</ReqRef><ReqRef
 Id="8fbfc24f-85cf-4a9a-92c5-bdff11b4a94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5bc883d0-b268-4ff3-884f-dfe1ab5ec57d"
>
</ReqRef><ReqRef
 Id="8532ef0e-00e7-4d13-832b-f44401f8d74a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="62f53321-6de9-4538-b654-6d2e0413115a"
>
</ReqRef><ReqRef
 Id="72e8fefb-6f1b-4b89-973e-be9bf554e996"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1e70ec18-af93-4cb9-9faf-3f7f1b372a67"
>
</ReqRef><ReqRef
 Id="a85ab6e7-f105-415b-8ed9-68a01b932a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bcaaba49-c4ad-41ba-806e-240aa255e962"
>
</ReqRef><ReqRef
 Id="b596a179-fa52-42d4-92cc-16da956cad47"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="08e064ae-8ec5-470a-8822-d20d9ee97805"
>
</ReqRef><Comment>If the maximum distance to run in RV mode is exceeded, the emergency brake is applied. We suppose that the nominal distance provided by the odometry decreases during the reverse movement.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Apply EB if maximum distance is exceeded"
 Guid="fc2a7c3f-5f94-4cae-9403-45b15efec8f6"
>
<ReqRef
 Id="2f6bd005-a2d8-47d5-81dd-123d253a456b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f113f460-eb5b-443d-8c2c-21f268d21912"
>
</ReqRef><Comment>In the distance to run in RV is exceeded and if the train runs in the direction opposite to the train orientation, the EB is commanded.</Comment>
<PreConditions>
<PreCondition
 Guid="c917897a-fe88-44d7-a417-513bc8bb12ad"
>Kernel.Mode == ModeEnum.RV</PreCondition><PreCondition
 Guid="85b941c3-958b-4c2e-af86-eb66a71aa284"
>Kernel.TrainPosition.FrontEndPosition( PointOfInterest =&gt; DistanceIntervalEnum.Nom ) &lt; ReferenceLocation - ReversingSupervisionInformation.MaxDistance</PreCondition><PreCondition
 Guid="671a67d5-7071-40f9-986a-0cce362a6c85"
>NOT Odometry.TrainIsAtStandstill()</PreCondition><PreCondition
 Guid="82bda9bd-d076-4255-a4cf-c6d009269cf9"
>NOT BrakeCommands.EBCommanded( reason =&gt; BrakeCommands.BrakeReasonEnum.ReversingDistanceExceeded )</PreCondition><PreCondition
 Guid="09aaf27a-083d-41df-a7a7-4acc01d67f65"
>TrainPosition.Position.DirectionalPositionInformation.TrainOrientation != TrainPosition.Position.DirectionalPositionInformation.TrainRunningDirection</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c9fe4921-5934-4929-bd63-e8b768bf5ac1"
>BrakeCommands.CommandEmergencyBrake( Reason =&gt; BrakeCommands.BrakeReasonEnum.ReversingDistanceExceeded )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Revoke EB if the train is at standstill"
 Guid="ac05dbc7-47d1-4bd6-bf5c-9a18a55f55c5"
>
<ReqRef
 Id="1689bc46-9302-42da-8c46-cd0d3a17a1f3"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="2936c96c-26b4-4618-939c-695d0dd8512d"
>
</ReqRef><Comment>If the train is at standstill, the EB command due to RV disatnce exceeded is revoked.</Comment>
<PreConditions>
<PreCondition
 Guid="3fe2b1b4-f921-4f65-a48a-678d726aff56"
>Odometry.TrainIsAtStandstill()</PreCondition><PreCondition
 Guid="f5e3bdfa-6b5e-4e76-9de8-97452d0bcb45"
>BrakeCommands.EBCommanded( reason =&gt; BrakeCommands.BrakeReasonEnum.ReversingDistanceExceeded )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="df8d1958-62a8-4aa8-8c8e-1b31ec0f6666"
>BrakeCommands.ReleaseEBCommand( Reason =&gt; BrakeCommands.BrakeReasonEnum.ReversingDistanceExceeded )</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
