<NameSpace
 X="340"
 Y="80"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Name="StaticSpeedProfile"
 Guid="37f49c98-ec42-40bc-82fe-e4efc8fb3ab6"
>
<NameSpaces>
</NameSpaces>
<Structures>
<Structure
 Default=""
 X="220"
 Y="90"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StaticSpeedRestrictionStruct"
 Guid="cb90d3f3-a659-44e2-90dc-850a8fa9cf8c"
>
<ReqRef
 Id="3e4a183c-969d-4574-ac8c-666dd8215c79"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="84bee6c8-b94a-4d43-937a-3679ab73e37f"
>
</ReqRef><ReqRef
 Id="9e0c6d45-0f4a-482d-9a28-dbe1f41746ed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2202fdc7-4401-423c-bf25-6481cb76baf7"
>
</ReqRef><ReqRef
 Id="a3ac36c4-3d89-44f1-81b7-c601a5576fc2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c944e532-5b9f-4b7d-82de-ce7a8c8ac76f"
>
</ReqRef><ReqRef
 Id="588756eb-1786-4776-86ae-3aaa296881a9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b8fc016-d527-48a6-862e-c4f9b65d8943"
>
</ReqRef><Comment>Represents one of the static speed restrictions of the static speed profile.</Comment>
<StructureElement
 TypeName="BaseTypes.Distance"
 Default="0.0"
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="4bb03621-7f97-4a52-8e8f-29fb58de949f"
>
<ReqRef
 Id="d15c6258-268a-45c4-838f-e367029786bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="972f6893-acfe-4345-9bed-757635e7f5de"
>
</ReqRef></StructureElement><StructureElement
 TypeName="BaseTypes.Speed"
 Default="BaseTypes.Speed.MaxSpeed"
 Mode="Internal"
 Implemented="TRUE"
 Name="BasicSpeed"
 Guid="4ad44ecb-369b-403d-a273-efed41dbf0bf"
>
<ReqRef
 Id="51a2d119-ce1a-4cb1-9eec-ab1079e376a3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86823eca-3aa8-40b8-8b28-2fa9d6fe4389"
>
</ReqRef></StructureElement><StructureElement
 TypeName="Messages.Q_FRONT"
 Default="Messages.Q_FRONT.No_train_length_delay_on_validity_end_point_of_profile_element"
 Mode="Internal"
 Implemented="TRUE"
 Name="TrainLengthDelay"
 Guid="df00566b-e898-4720-b823-9c1fcd71b627"
>
<ReqRef
 Id="4721d317-67ec-4171-b836-61c80b2d2d4c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="48a460c4-afe2-4ca5-8136-5a7ff5efaedb"
>
</ReqRef><ReqRef
 Id="ac670d16-d189-473e-b200-ded164824365"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cfa77d57-0ab9-446b-8d95-28d4b62639c4"
>
</ReqRef><ReqRef
 Id="49595724-3359-4536-a90e-542bc90ffc8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf325d74-32aa-485a-8c3b-e78dc3b27538"
>
</ReqRef></StructureElement><StructureElement
 TypeName="SSPCategoriesCol"
 Default="[]"
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Categories"
 Guid="2edb5adf-a12c-4bf7-86e9-cfe64fda040a"
>
</StructureElement><Interfaces>
<StructureRef
 Name="BaseTypes.LocationInterface"
 Guid="ed0c65f2-8fb8-4608-b620-132604a83015"
>
</StructureRef></Interfaces>
</Structure><Structure
 Default=""
 X="440"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SSPCategory"
 Guid="38e0f6db-7b3b-48d9-9975-5a3794f18d2d"
>
<ReqRef
 Id="7ba0f65c-e1b5-422f-a1fb-e947e73cd4f9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2aaf9019-ad91-417e-b85a-2179df4732f9"
>
</ReqRef><Comment>Represents a speed limitation for a specific train category. The qualifier indicates the type of the current category (Cant Deficiency or Other Specific) and in the case of Other Specific category it indicates if its value replaces that of the Cant Deficiency category.</Comment>
<StructureElement
 TypeName="Messages.NC_CDDIFF"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="CantDeficiency"
 Guid="a3db071f-b055-4053-95bf-688694283e3c"
>
<ReqRef
 Id="e4e5b993-7f8a-4d6b-9e5f-fde455c8e6db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4a8c0b15-72c5-4d99-a45a-253382dc4941"
>
</ReqRef><ReqRef
 Id="968938fa-6a64-41cb-9406-2036110d6747"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="655252ea-7cb3-454f-a70c-fc44b68fe324"
>
</ReqRef></StructureElement><StructureElement
 TypeName="TrainData.TrainCategoryEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="OtherSpecific"
 Guid="7eb5e8a6-4168-4045-92b5-72e4a3f87222"
>
<ReqRef
 Id="acaf62ba-5b8e-4cf3-82a2-c81ae54cd1ed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e99bb5d8-8420-46f9-917f-8c98e39efb3b"
>
</ReqRef><ReqRef
 Id="3dfb6b48-a52e-4097-89f5-65ada9dbcbe5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad8a7310-f6d4-44bd-8971-a19fa3035c51"
>
</ReqRef><Comment>Any train category that does not correspond to the standard values in CantDeficiency.</Comment>
</StructureElement><StructureElement
 TypeName="Messages.Q_DIFF"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Qualifier"
 Guid="c63da54a-6768-4922-b6a6-ebe54fc91664"
>
<ReqRef
 Id="d4d1dca3-3feb-42f4-9fb0-78e4de18d3a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c27c787f-43fd-4856-8367-db90137a0055"
>
</ReqRef></StructureElement><StructureElement
 TypeName="BaseTypes.Speed"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Speed"
 Guid="64b79643-5482-420d-b15d-623780a410c5"
>
<ReqRef
 Id="ddc9bc3c-f8fd-43a4-b45f-0a7b49ab9c74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f58c9e4a-cc34-480a-b217-ef19e125bd99"
>
</ReqRef><ReqRef
 Id="e4e5b993-7f8a-4d6b-9e5f-fde455c8e6db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9076978a-961d-4f88-a7d5-5f1ea4a7c1cd"
>
</ReqRef></StructureElement></Structure></Structures>
<Collections>
<Collection
 TypeName="SSPCategory"
 MaxSize="30"
 Default="[]"
 X="440"
 Y="90"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SSPCategoriesCol"
 Guid="d39ee7dd-0392-4d3e-a844-e1b7df48eaf7"
>
<Comment>A collection of speed restrictions for train categories, received from the trackside.</Comment>
</Collection><Collection
 TypeName="StaticSpeedRestrictionStruct"
 MaxSize="50"
 Default="[]"
 X="220"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StaticSpeedRestrictionsCol"
 Guid="e150645e-2133-46d1-a4ed-82ce79f51dff"
>
<ReqRef
 Id="6a081658-e5b2-4c8a-a8ba-45dadd7e9e38"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a1615ed2-d3d1-46e9-9a11-01bcae22b4c1"
>
</ReqRef><ReqRef
 Id="70632e82-a390-4696-a790-49fc7e83e650"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="b87d1437-f723-4bd6-ba76-c78506eabbd5"
>
</ReqRef><Comment>A collection of static speed restrictions of the static speed profile, received from the trackside.</Comment>
</Collection></Collections>
<Functions>
<Function
 Type="BaseTypes.Length"
 Default=""
 X="330"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SSPLength"
 Guid="1d1987db-72f2-4a65-8392-ba68f79d7e76"
>
<ReqRef
 Id="ac670d16-d189-473e-b200-ded164824365"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa67a18e-c619-4ca9-8c9a-20ab6b1a5e5c"
>
</ReqRef><ReqRef
 Id="49595724-3359-4536-a90e-542bc90ffc8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55774aeb-2cf7-408c-9d95-eb2d18994764"
>
</ReqRef><Comment>Provides the length of a static speed restriction together with the train&apos;s length, if needed.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSP"
 Guid="737d63a4-ba8a-431b-83b0-d1a93b352e6a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="TrainLengthDelay"
 Guid="edae9863-3316-4e77-a6d3-810db9a7e761"
>
<PreConditions>
<PreCondition
 Guid="7f6dc22b-756b-4bbd-a279-def78e406e66"
>aSSP.TrainLengthDelay == Messages.Q_FRONT.Train_length_delay_on_validity_end_point_of_profile_element</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPEnd(aSSP) - aSSP.Location + TrainData.TrainData.Value.TrainLength</Expression>
</Case><Case
 Name="NoTrainLengthDelay"
 Guid="e5943792-4cfa-46ac-befd-3c30fe17d42b"
>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPEnd(aSSP) - aSSP.Location</Expression>
</Case></Cases>
</Function><Function
 Type="SSPCategory"
 Default=""
 X="110"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SelectCantDeficiencyCategory"
 Guid="9ba5fb81-4abf-450f-a3df-e9c182a2325b"
>
<ReqRef
 Id="e4e5b993-7f8a-4d6b-9e5f-fde455c8e6db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6f32f40d-9ab1-4cf0-9c9a-ee9302655044"
>
</ReqRef><ReqRef
 Id="583de37e-19f0-4cf2-8ecd-dcb4f78f645d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="de620256-f5e7-44d8-909c-bbbb9429bdd0"
>
</ReqRef><ReqRef
 Id="583de37e-19f0-4cf2-8ecd-dcb4f78f645d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5d9c0bd1-8747-4b97-b71b-3c4e7909e69f"
>
</ReqRef><Comment>Provides the highest Cant Deficiency value below the value of the train&apos;s &quot;Cant Deficiency&quot; train category.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSR"
 Guid="b801973a-5099-4ab2-b810-01ca1067e7fd"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="No categories"
 Guid="b0c46966-2e55-49a6-be47-254376361bb9"
>
<PreConditions>
<PreCondition
 Guid="8c5b000c-86c6-4b5e-b712-d682869dd9a0"
>aSSR.Categories == []</PreCondition></PreConditions>
<Expression>EMPTY</Expression>
</Case><Case
 Name="Value"
 Guid="b3fadbe3-c52f-409c-bf9e-f100bb6a5585"
>
<Expression>REDUCE
    aSSR.Categories | X.Qualifier == Messages.Q_DIFF.Cant_Deficiency_specific_category AND X.CantDeficiency &lt;= NC_CTRAIN_to_NC_CDDIFF_Converter(TrainData.TrainData.Value.TrainCategories.CantDeficiency)
USING X IN
    Kernel.TrackDescription.StaticSpeedProfile.MaxCategory (X =&gt; X, Y =&gt; RESULT)
INITIAL_VALUE
    EMPTY</Expression>
</Case></Cases>
</Function><Function
 Type="SSPCategory"
 Default=""
 X="440"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="MaxCategory"
 Guid="d90e5a9e-48d6-4db8-b5b9-0b22ec335b30"
>
<Comment>Provides the maximum Cant Deficiency category from the two category received as parameters.</Comment>
<Parameters>
<Parameter
 Type="SSPCategory"
 Name="X"
 Guid="c38d4084-d497-4f48-a755-f24ec89c7166"
>
</Parameter><Parameter
 Type="SSPCategory"
 Name="Y"
 Guid="a63a248d-148f-4548-af7b-557e20401678"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="X EMPTY"
 Guid="a8021f1e-0041-4812-b06e-3bcab4c890d8"
>
<PreConditions>
<PreCondition
 Guid="6e972528-0113-46ef-ad5f-71192f9074f4"
>X == EMPTY</PreCondition></PreConditions>
<Expression>Y</Expression>
</Case><Case
 Name="Y EMPTY"
 Guid="9055f2bf-4536-42f0-9994-b7d1dc8b3266"
>
<PreConditions>
<PreCondition
 Guid="25d545da-8383-401c-8103-22a5eec9dc61"
>Y == EMPTY</PreCondition></PreConditions>
<Expression>X</Expression>
</Case><Case
 Name="X greater than, or equal to, Y"
 Guid="030ce8bd-83c9-45ba-bf34-92ad8d648d7e"
>
<PreConditions>
<PreCondition
 Guid="3439aa7f-c1a8-4659-99fc-67203724f191"
>X.CantDeficiency &gt;= Y.CantDeficiency</PreCondition></PreConditions>
<Expression>X</Expression>
</Case><Case
 Name="Y greater than X"
 Guid="091bce79-6dd0-484e-9902-ce3ee5a8f725"
>
<Expression>Y</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="220"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="CantDeficiencySpeedRestriction"
 Guid="ccb070e1-5c53-44fe-8e42-5b82c8e91f57"
>
<ReqRef
 Id="583de37e-19f0-4cf2-8ecd-dcb4f78f645d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56a86ad3-0443-4a1a-9d31-5b5416e084c2"
>
</ReqRef><Comment>Provides the speed restriction for Cant Deficiency train category. If no speed restriction for Cant Deficiency categories were provided by the trackside, the function returns the basic speed associated to the current static speed restriction.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSR"
 Guid="342a3b79-f226-4427-906f-5e0144fc557b"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Corresponding category found"
 Guid="202abc72-7361-4378-ac53-0831b5f188a1"
>
<PreConditions>
<PreCondition
 Guid="2432c430-e04e-4177-8da1-4373117c2229"
>Available(SelectCantDeficiencyCategory(aSSR))</PreCondition></PreConditions>
<Expression>SelectCantDeficiencyCategory(aSSR).Speed</Expression>
</Case><Case
 Name="Otherwise"
 Guid="8f4d0b87-40f8-45b5-8034-5898a9603aea"
>
<Expression>aSSR.BasicSpeed</Expression>
</Case></Cases>
</Function><Function
 Type="StaticSpeedRestrictionStruct"
 Default=""
 X="440"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CreateFirstSSP"
 Guid="cc34b5dc-e45e-4ce9-b090-6cd801495b15"
>
<ReqRef
 Id="ddc9bc3c-f8fd-43a4-b45f-0a7b49ab9c74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="336862c2-41bf-4caa-98a0-f4ef9f6fb4e0"
>
</ReqRef><ReqRef
 Id="d4d1dca3-3feb-42f4-9fb0-78e4de18d3a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c472c32d-5622-41f9-adfc-705f6179feeb"
>
</ReqRef><ReqRef
 Id="968938fa-6a64-41cb-9406-2036110d6747"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b57451fb-c469-4261-b8df-434185f12518"
>
</ReqRef><ReqRef
 Id="3dfb6b48-a52e-4097-89f5-65ada9dbcbe5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cd93c3ad-2c52-4097-97ec-1abe2b5bc7cd"
>
</ReqRef><Comment>Creates an EFS static speed restriction structure from the first ERTMS static speed restriction element provided by the trackside.</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Location"
 Guid="1751ecc8-361f-4acc-bb57-3ea694d3e77c"
>
</Parameter><Parameter
 Type="BaseTypes.Speed"
 Name="BasicSpeed"
 Guid="b8f24440-0226-475a-b34d-8c750bedcea0"
>
</Parameter><Parameter
 Type="Messages.Q_FRONT"
 Name="TrainLengthDelay"
 Guid="d73fa418-2d37-4c09-ac24-2d96d9cb29bc"
>
</Parameter><Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.INTERNATIONAL_STATIC_SPEED_PROFILE.Collection1"
 Name="Categories"
 Guid="3508a4e8-baea-4e6b-9328-1861b8888426"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="134941ae-1481-4334-b669-a6472f89ec8c"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="911f9e12-9e9e-444b-9f69-eb1556d30683"
>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.StaticSpeedRestrictionStruct
{
    Location =&gt; aDistanceFromRef + Location,
    BasicSpeed =&gt; BasicSpeed,
    TrainLengthDelay =&gt; TrainLengthDelay,
    Categories =&gt; MAP Categories USING X IN CreateSSPCategory ( Qualifier =&gt; X.Q_DIFF, Speed =&gt;MessageTypes.SpeedResolution ( X.V_DIFF, 5.0 ), CantDeficiency =&gt; X.NC_CDDIFF, OtherSpecific =&gt; ERTMSCategory_To_EFSCategory ( X.NC_DIFF ) )
}</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="440"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="AbsoluteDistance"
 Guid="3c33afea-03bf-48fe-82d8-b7b458770237"
>
<Comment>Provides the absolute distance of a certain SSP provided by trackside.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.INTERNATIONAL_STATIC_SPEED_PROFILE.Collection3"
 Name="SSRs"
 Guid="8d4b4431-c2bc-4a5b-9b11-45bbd76c0e6a"
>
</Parameter><Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.INTERNATIONAL_STATIC_SPEED_PROFILE.SubStructure2"
 Name="aSSR"
 Guid="9a252118-e36a-4564-b76f-079f1dee93c1"
>
</Parameter><Parameter
 Type="Messages.Q_SCALE"
 Name="Scale"
 Guid="41beff3a-86a4-418c-ab5e-65b2c1bed73e"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="408ad485-2dd6-4279-a542-443ea10f6e5c"
>
<Expression>(
SUM
    SSRs |
        Before ( ExpectedFirst =&gt; X, ExpectedSecond =&gt; aSSR, Collection =&gt; SSRs )
USING X IN
    MessageTypes.QScaleDistance ( distance =&gt; X.D_STATIC, scale =&gt; Scale)
)
+ MessageTypes.QScaleDistance(
        distance =&gt; aSSR.D_STATIC,
        scale =&gt; Scale
    )</Expression>
</Case></Cases>
</Function><Function
 Type="SSPCategory"
 Default=""
 X="330"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CreateSSPCategory"
 Guid="d102b23e-3929-45a8-a138-355c52b284d8"
>
<Comment>Creates an EFS static speed profile category from an ERMS static speed profile category provided by the trackside.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_DIFF"
 Name="Qualifier"
 Guid="a6b47cd7-24c8-4b73-b0c8-5696c9375c35"
>
</Parameter><Parameter
 Type="BaseTypes.Speed"
 Name="Speed"
 Guid="882363df-791e-4a7b-94b1-4274cd8d4a4c"
>
</Parameter><Parameter
 Type="Messages.NC_CDTRAIN"
 Name="CantDeficiency"
 Guid="31c47ca2-f778-412f-94aa-bae30b5e6ed9"
>
</Parameter><Parameter
 Type="TrainData.TrainCategoryEnum"
 Name="OtherSpecific"
 Guid="198d728c-c591-4535-ab16-4ad372ce5752"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="048d6281-de53-424b-9ec4-cc5558abc150"
>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPCategory
{
    Qualifier =&gt; Qualifier,
    Speed =&gt; Speed,
    CantDeficiency =&gt; CantDeficiency,
    OtherSpecific =&gt; OtherSpecific
}</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="0"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SpeedRestrictions"
 Guid="01c090d3-dbc4-4806-a8f6-03ca3dd16197"
>
<ReqRef
 Id="3e4a183c-969d-4574-ac8c-666dd8215c79"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8657d837-e2d3-4862-bd66-571946896100"
>
</ReqRef><ReqRef
 Id="bfa09769-fb03-456f-b92b-14ab4cf7977b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7382bd6e-22b2-4d5c-b5e6-6ad987db8373"
>
</ReqRef><ReqRef
 Id="b2a3ff3a-3f41-4dde-9bf8-ee649ce14d86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e27df68-a6d4-4fac-84f6-7777bb23607c"
>
</ReqRef><ReqRef
 Id="78901f0f-a70f-415d-8d57-e5156f7206d0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef3dfa22-93e4-4adf-90f6-c626edfcb629"
>
</ReqRef><Comment>Provides the speed restrictions profile due to static speed profile.</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="1b90369d-fe96-4a0c-925e-61763d385f5a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="8d62abad-1517-484b-86ff-ad3ee8024e41"
>
<Expression>(REDUCE Kernel.TrackDescription.StaticSpeedProfile.SSP 
    USING X IN  
        MIN ( First =&gt; FUNCTION d : Default.BaseTypes.Distance =&gt; Kernel.TrackDescription.StaticSpeedProfile.ComputeStaticSpeedRestriction( aSSP =&gt; X, Distance =&gt; d ), 
                  Second =&gt; RESULT )
INITIAL_VALUE BaseTypes.MaxSpeedFunction) (Distance)</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="0"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ComputeStaticSpeedRestriction"
 Guid="8959058c-12eb-4e66-8f02-ae33b355cdb1"
>
<ReqRef
 Id="3e4a183c-969d-4574-ac8c-666dd8215c79"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eb2bc7c5-7d5a-4596-ae27-bafbdef4154c"
>
</ReqRef><ReqRef
 Id="7b939cca-c775-4101-b7dd-1944169ceeb2"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="ed8d1e64-c857-49c9-9ec0-63f1509f1029"
>
</ReqRef><Comment>Provides the speed profile due to a static speed restriction.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSP"
 Guid="56feb81c-ddb2-42c4-a6fb-d5925061bfd2"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="Distance"
 Guid="c28b6dfd-5373-4b64-960e-a9496e7d632c"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="EndOfSSP"
 Guid="70ac4f93-7f04-4a90-9bda-e749e2574e2d"
>
<PreConditions>
<PreCondition
 Guid="f61d368f-d291-45c0-8bc4-1c445008961b"
>aSSP.BasicSpeed == BaseTypes.Speed.Infinity</PreCondition></PreConditions>
<Expression>BaseTypes.Speed.MaxSpeed</Expression>
</Case><Case
 Name="Last SSP"
 Guid="3a817aca-20b1-458b-af48-d585b43aec8a"
>
<PreConditions>
<PreCondition
 Guid="cdc88c52-cc87-4d46-a489-8483578cb5ef"
>Kernel.TrackDescription.StaticSpeedProfile.SSPEnd ( aSSP ) == BaseTypes.Distance.Infinity</PreCondition><PreCondition
 Guid="c8d3a048-82af-4fc8-afee-2031cb5b8abf"
>Distance &gt;= aSSP.Location</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPSpeed(aSSP)</Expression>
</Case><Case
 Name="During SSP"
 Guid="82fa0622-8426-4627-a328-c92df7a6646f"
>
<PreConditions>
<PreCondition
 Guid="15221f58-b9e6-4991-9f91-ce91e073c79b"
>aSSP.Location &lt;= Distance</PreCondition><PreCondition
 Guid="a3494ca1-2ab4-45f5-9d76-b4fec8b96902"
>Distance &lt; BaseTypes.AddDistance (X1 =&gt; aSSP.Location, X2 =&gt; Kernel.TrackDescription.StaticSpeedProfile.SSPLength(aSSP))</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPSpeed ( aSSP )</Expression>
</Case><Case
 Name="Outside SSP"
 Guid="003d9321-b254-46ed-8c99-ee86f755db21"
>
<Expression>BaseTypes.Speed.MaxSpeed</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="220"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SSPEnd"
 Guid="86a23a5b-b502-49f7-b2ab-778f95d080c7"
>
<ReqRef
 Id="1a3c2b61-54c8-49b4-b142-4128f826e0d9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6772781d-5d88-4419-8891-cdee1c87046b"
>
</ReqRef><ReqRef
 Id="e475882b-f9a1-42e9-8001-c3a154f9acf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="65edfa3c-f452-4dcb-a13d-a3239d0f2287"
>
</ReqRef><Comment>Provides the end of the current static speed restriction.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="Current"
 Guid="1f758756-d147-4b5d-a37d-377031c83a6f"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="SSP information stops at current location"
 Guid="d86dbdbc-ed45-4031-855c-265cbc09fad0"
>
<PreConditions>
<PreCondition
 Guid="cec64693-6bb4-4a7e-9ce8-96d1779abf66"
>Current.BasicSpeed == BaseTypes.Speed.Infinity</PreCondition></PreConditions>
<Expression>Current.Location</Expression>
</Case><Case
 Name="Always"
 Guid="0501d6cc-b928-4ac2-9c0d-339b2d643872"
>
<Expression>REDUCE
    Kernel.TrackDescription.StaticSpeedProfile.SSP | X.Location &gt; Current.Location
USING X IN
    BaseTypes.MinDistance( X.Location, RESULT )
INITIAL_VALUE
    BaseTypes.Distance.Infinity</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="0"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SSPSpeed"
 Guid="e35705fa-d350-4ac8-a3e5-39fc13b64e89"
>
<ReqRef
 Id="627aeec8-b2b3-4c29-bc48-4f8796e011b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7822f5ef-09e2-4683-ab61-2d4039165ffe"
>
</ReqRef><Comment>Provides the speed value associated to the current static speed restrition, according to train categories values.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSP"
 Guid="9723b4d6-987f-461d-a853-76ef74a11e00"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="OSC_ReplacesCD"
 Guid="fc6a6177-aa61-4d1c-af3e-40324e4b58a3"
>
<PreConditions>
<PreCondition
 Guid="05c53579-36a6-4932-abd9-2d1343543f1f"
>REDUCE
    aSSP.Categories | X.Qualifier == Messages.Q_DIFF.Other_specific_category__replaces_the_Cant_Deficiency_SSP
USING X IN
    Kernel.TrackDescription.StaticSpeedProfile.FindOSC(X.OtherSpecific) OR RESULT
INITIAL_VALUE
    False</PreCondition></PreConditions>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.OtherSpecificSpeedRestriction(aSSP)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="48589ce8-2529-4885-ad78-5daf74a941b6"
>
<Expression>BaseTypes.MinSpeed(Kernel.TrackDescription.StaticSpeedProfile.OtherSpecificSpeedRestriction(aSSP), Kernel.TrackDescription.StaticSpeedProfile.CantDeficiencySpeedRestriction(aSSP))</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="110"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FindOSC"
 Guid="eaaba9ec-7584-494a-94d1-b127c98fd320"
>
<ReqRef
 Id="64f509d0-a576-4ed1-a3e8-19a41d794900"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6810181c-3b47-489e-a398-ee9dc9ca2506"
>
</ReqRef><ReqRef
 Id="627aeec8-b2b3-4c29-bc48-4f8796e011b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e1559fb8-b2d1-4290-a590-893330624032"
>
</ReqRef><Comment>Indicates if the train belongs to the other specific category provided as parameter. Used to match the corresponding categories received by the trackside.</Comment>
<Parameters>
<Parameter
 Type="TrainData.TrainCategoryEnum"
 Name="Category"
 Guid="cb6b9b96-40cf-4c9d-b7bf-4f22136e6a22"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="39b3f53b-79a9-41ad-bc42-6742ae462189"
>
<Expression>THERE_IS X IN TrainData.TrainData.Value.TrainCategories.OtherInternational | X == Category</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="220"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="OtherSpecificSpeedRestriction"
 Guid="24b20a21-860c-4983-a904-dbbfa4c2b517"
>
<ReqRef
 Id="64f509d0-a576-4ed1-a3e8-19a41d794900"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="10a49bfe-ed66-49ec-91f8-b351b91aa84b"
>
</ReqRef><ReqRef
 Id="627aeec8-b2b3-4c29-bc48-4f8796e011b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4dc8cddb-3ae9-451f-87a6-cf597290d934"
>
</ReqRef><Comment>Provides the most restrictive speed restrictions associated to Other Specific train categories provided by the trackside mathing the Other International categories of the train.</Comment>
<Parameters>
<Parameter
 Type="StaticSpeedRestrictionStruct"
 Name="aSSP"
 Guid="07940cee-c6c5-43dd-9cad-a38350866b44"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="ea8182ca-98f7-40d2-b986-acbb3a2a1e25"
>
<Expression>REDUCE
    aSSP.Categories | X.Qualifier in [Messages.Q_DIFF.Other_specific_category__replaces_the_Cant_Deficiency_SSP, Messages.Q_DIFF.Other_specific_category__does_not_replace_the_Cant_Deficiency_SSP] AND Kernel.TrackDescription.StaticSpeedProfile.FindOSC(X.OtherSpecific)
USING X IN
    BaseTypes.MinSpeed(X.Speed, RESULT)
INITIAL_VALUE
    BaseTypes.Speed.MaxSpeed</Expression>
</Case></Cases>
</Function><Function
 Type="TrainData.TrainCategoryEnum"
 Default=""
 X="330"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="ERTMSCategory_To_EFSCategory"
 Guid="9c8e2904-7c8f-462a-a1a2-8309ac542f92"
>
<Comment>Converts the category value received in the packet to an enum value for EFS.</Comment>
<Parameters>
<Parameter
 Type="Messages.NC_DIFF"
 Name="aCategory"
 Guid="08568679-5e91-4574-bfbd-a7628894ceae"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Freight train in P"
 Guid="2f055bab-2cf6-4c5d-9585-5a3b69254bec"
>
<PreConditions>
<PreCondition
 Guid="5cbb582c-d00b-4837-93bc-f0095b7a41f5"
>aCategory == Messages.NC_DIFF.Specific_SSP_applicable_to_Freight_train_braked_in__P__position</PreCondition></PreConditions>
<Expression>TrainData.TrainCategoryEnum.FreightTrainInP</Expression>
</Case><Case
 Name="Freight train in G"
 Guid="62203bb1-6a2d-444d-b836-4b0954c2b96f"
>
<PreConditions>
<PreCondition
 Guid="a4c20fad-c406-41e5-ae86-78005f34945d"
>aCategory == Messages.NC_DIFF.Specific_SSP_applicable_to_Freight_train_braked_in__G__position</PreCondition></PreConditions>
<Expression>TrainData.TrainCategoryEnum.FreightTrainInG</Expression>
</Case><Case
 Name="Passenger train"
 Guid="d33744f8-9650-4bc2-8e19-c1a8cfe405ec"
>
<Expression>TrainData.TrainCategoryEnum.PassengerTrain</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Cacheable="TRUE"
 Default=""
 X="110"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SSPStart"
 Guid="897030b6-5757-406a-9f8b-8b167459aa7d"
>
<Comment>Returns the start location of the static speed profile.</Comment>
<Cases>
<Case
 Name="No SSP"
 Guid="94b60146-98fa-4e69-b98e-07e6716d248d"
>
<PreConditions>
<PreCondition
 Guid="cb66de97-90ab-4a91-92d2-e3d00eaa5426"
>Kernel.TrackDescription.StaticSpeedProfile.SSP == []</PreCondition></PreConditions>
<Expression>BaseTypes.Distance.Unknown</Expression>
</Case><Case
 Name="Value"
 Guid="ad59596b-0db0-4f50-b0fb-cfc610a8a2b4"
>
<Expression>REDUCE Kernel.TrackDescription.StaticSpeedProfile.SSP
 USING X IN 
  BaseTypes.MinDistance(
    X1 =&gt; X.Location,
    X2 =&gt; RESULT
  )
 INITIAL_VALUE BaseTypes.Distance.Infinity</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="0"
 Y="410"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StaticSpeedProfileReceived"
 Guid="a4455d75-40f1-4d65-8435-236f68b42c74"
>
<ReqRef
 Id="6a081658-e5b2-4c8a-a8ba-45dadd7e9e38"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="584ede64-4010-46c3-8f44-b61893c2e915"
>
</ReqRef><ReqRef
 Id="beb70c99-c336-489a-a97e-b8236a026061"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="76187a97-137c-4027-a4a5-cce96969f769"
>
</ReqRef><ReqRef
 Id="9be8a6ae-9abe-4a16-8a19-f28a0581c994"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ea57e07d-2b94-4ee9-acc1-17eb5f9fed55"
>
</ReqRef><ReqRef
 Id="ffdc9150-a628-4750-a762-a41c20c3dd26"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f39a22a2-46a9-48ba-a389-7af180cdd0b0"
>
</ReqRef><ReqRef
 Id="1800bf83-b2c2-4d37-8406-ca0c31b30f0b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="84f6df78-2a38-4d8d-b18b-70aa1183720e"
>
</ReqRef><ReqRef
 Id="3c43fca9-0194-4760-80c8-6a85be01ba76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a66ce65c-2e71-4027-8e2a-552bd02bf0ec"
>
</ReqRef><ReqRef
 Id="2a687eea-d3dd-4626-9d3b-b7befc8e354b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="99f4627d-e942-490e-a9ac-39f20915d5a5"
>
</ReqRef><ReqRef
 Id="21ba223d-f14f-4cdc-9cef-7559c61b77d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="36f96352-4846-40c6-a2e5-f0cc53755146"
>
</ReqRef><ReqRef
 Id="88ae9a57-b890-4d8c-9a0e-bfba19896b12"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0bd7ed8c-5ea5-43ff-acf7-20e0156d1852"
>
</ReqRef><ReqRef
 Id="55b068ea-cee1-4911-bfef-1991df1f43eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="57f189f7-4b16-4070-873d-c91b07b61370"
>
</ReqRef><ReqRef
 Id="f9cf4b4c-a8b9-4cbd-b8c3-50dfd18b8759"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ef510a8-4905-4ac7-a058-6532fc3215c7"
>
</ReqRef><ReqRef
 Id="6c2271aa-b854-4ce6-ba1f-4892e06164b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="27157ccf-01fd-461a-9052-b04a15d43ef1"
>
</ReqRef><Comment>This procedure is called when a new static speed profile is received. If an other static speed profile has already been received, all the information from the start location of the new information is deleted.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.INTERNATIONAL_STATIC_SPEED_PROFILE.Message"
 Name="Packet"
 Guid="faa5a717-42f5-48f8-991b-8393a7bbf1e9"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="aa26ecaf-aea7-4216-aaea-3420279fb9ad"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Remove old information"
 Guid="d16672d4-c19a-4a4f-9c40-379b9955fcc6"
>
<ReqRef
 Id="066c1468-0f45-4978-bc8d-a3cec1f01661"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="18925b23-ae99-4b42-b211-072846f9afe7"
>
</ReqRef><ReqRef
 Id="d15c6258-268a-45c4-838f-e367029786bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="792160a3-52e4-4d11-b842-329a4776c3b2"
>
</ReqRef><ReqRef
 Id="1cb531d4-2809-484c-bf3f-445bebb332ef"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e77e1efc-2db4-415f-b0f0-268a053eb6f5"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Remove old information"
 Guid="32b0ef9b-e1ed-4271-8527-6cd1d4dd0cec"
>
<PreConditions>
<PreCondition
 Guid="c91e4218-6727-4554-8526-ff60ecb48e17"
>Kernel.Mode != ModeEnum.TR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="cc434071-3c30-4ef5-ac05-dfbaaf5a9c9c"
>REMOVE ALL
    X.Location &gt;= aDistanceFromRef + MessageTypes.QScaleDistance ( distance =&gt; Packet.D_STATIC, scale =&gt; Packet.Q_SCALE)
IN
    SSP</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Insert first SSR"
 Guid="1a70db67-e6d6-45a0-a7c1-6c48294ee07b"
>
<ReqRef
 Id="51a2d119-ce1a-4cb1-9eec-ab1079e376a3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55fb088c-937b-457e-bab0-1aa45636cb77"
>
</ReqRef><ReqRef
 Id="d15c6258-268a-45c4-838f-e367029786bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef00bbc6-2495-4de2-a056-1e489c7475f0"
>
</ReqRef><ReqRef
 Id="e475882b-f9a1-42e9-8001-c3a154f9acf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e2e80761-8b80-4a35-b7e5-ef742926f4fc"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Last SSP"
 Guid="09131747-3e87-45b0-b635-9ea3150d0705"
>
<PreConditions>
<PreCondition
 Guid="cad0ebcd-1de5-4a6d-84d3-498b13ce5bc3"
>Packet.V_STATIC == 127</PreCondition><PreCondition
 Guid="b944bd42-2395-49b2-b993-a87989972d98"
>Kernel.Mode != ModeEnum.TR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e59b778c-47ac-4e37-94a0-45b10846d56a"
>INSERT
  Kernel.TrackDescription.StaticSpeedProfile.CreateFirstSSP
  (
    Location =&gt; MessageTypes.QScaleDistance ( distance =&gt; Packet.D_STATIC, scale =&gt; Packet.Q_SCALE ),
    BasicSpeed =&gt;BaseTypes.Speed.Infinity,
    TrainLengthDelay =&gt; Packet.Q_FRONT,
    Categories =&gt; Packet.Sequence1,
    aDistanceFromRef  =&gt; aDistanceFromRef 
  )
IN
    Kernel.TrackDescription.StaticSpeedProfile.SSP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Otherwise"
 Guid="0ad8c835-4900-44ae-a183-e74d3f93dae5"
>
<ReqRef
 Id="d15c6258-268a-45c4-838f-e367029786bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="67ffe883-aed5-459a-8fc9-e4ff4e1a0f0e"
>
</ReqRef><ReqRef
 Id="51a2d119-ce1a-4cb1-9eec-ab1079e376a3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5ff2d65d-095f-4553-b47d-05b2d599170b"
>
</ReqRef><ReqRef
 Id="4721d317-67ec-4171-b836-61c80b2d2d4c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89a85498-1be0-4359-a7af-8680f38566ee"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="2ec09015-103d-44f3-b420-26001a56aa72"
>INSERT
    Kernel.TrackDescription.StaticSpeedProfile.CreateFirstSSP(
    Location =&gt; MessageTypes.QScaleDistance ( distance =&gt; Packet.D_STATIC, scale =&gt; Packet.Q_SCALE ),
    BasicSpeed =&gt; MessageTypes.SpeedResolution ( speed =&gt; Packet.V_STATIC, resolution =&gt; 5.0),
    TrainLengthDelay =&gt; Packet.Q_FRONT,
    Categories =&gt; Packet.Sequence1,
    aDistanceFromRef =&gt; aDistanceFromRef  )
IN
    Kernel.TrackDescription.StaticSpeedProfile.SSP</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Insert Following SSRs"
 Guid="dfe2766d-4ca1-4892-8819-77ec11e88335"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Insert following SSRs"
 Guid="b95f2783-aeb0-4f80-972f-fa17c79c395b"
>
<PreConditions>
<PreCondition
 Guid="db763405-16a3-419b-97f0-7a3d86ec89e0"
>Kernel.Mode != ModeEnum.TR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1353f5e7-b5ab-4b5e-9b25-07b8c3448625"
>APPLY
    Kernel.TrackDescription.StaticSpeedProfile.AddSSP ( aSSP =&gt; X,
                    Location =&gt; aDistanceFromRef + Kernel.TrackDescription.StaticSpeedProfile.AbsoluteDistance ( SSRs =&gt; Packet.Sequence3, aSSR =&gt; X, Scale =&gt; Packet.Q_SCALE ) + MessageTypes.QScaleDistance ( distance =&gt; Packet.D_STATIC, scale =&gt; Packet.Q_SCALE ) )
ON
    Packet.Sequence3</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="110"
 Y="410"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="AddSSP"
 Guid="381ee710-ec44-40fb-96a7-e970c7f36f9e"
>
<ReqRef
 Id="d4d1dca3-3feb-42f4-9fb0-78e4de18d3a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="920fd390-90bc-4eae-802a-f19cec3e1fd8"
>
</ReqRef><ReqRef
 Id="4721d317-67ec-4171-b836-61c80b2d2d4c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da753b51-9f3f-4d3c-9355-ee14b3ebc48f"
>
</ReqRef><ReqRef
 Id="ddc9bc3c-f8fd-43a4-b45f-0a7b49ab9c74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f361d5ab-965b-4559-864f-6985a056bb37"
>
</ReqRef><ReqRef
 Id="51a2d119-ce1a-4cb1-9eec-ab1079e376a3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fde59997-fc51-42d3-a048-ef850e661800"
>
</ReqRef><ReqRef
 Id="968938fa-6a64-41cb-9406-2036110d6747"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ca9f20c8-0b11-46b3-a1ba-1d557b18916f"
>
</ReqRef><ReqRef
 Id="3dfb6b48-a52e-4097-89f5-65ada9dbcbe5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c627aeea-8329-4479-980e-2f3d186c0daa"
>
</ReqRef><ReqRef
 Id="3c43fca9-0194-4760-80c8-6a85be01ba76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="04936154-e9e1-4202-9da7-87730b15384b"
>
</ReqRef><ReqRef
 Id="2a687eea-d3dd-4626-9d3b-b7befc8e354b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="04e3b70b-e334-4aa4-aaa7-421a51a5ef81"
>
</ReqRef><ReqRef
 Id="21ba223d-f14f-4cdc-9cef-7559c61b77d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="10fdef69-d97c-483c-a62b-3287fc1b21f1"
>
</ReqRef><ReqRef
 Id="88ae9a57-b890-4d8c-9a0e-bfba19896b12"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2c186ab2-bb28-45ed-844b-e0e66584de1e"
>
</ReqRef><ReqRef
 Id="55b068ea-cee1-4911-bfef-1991df1f43eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f8456690-532b-4ca3-90f3-8ee2f83586c8"
>
</ReqRef><ReqRef
 Id="f9cf4b4c-a8b9-4cbd-b8c3-50dfd18b8759"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6719d055-df25-4879-a1c5-ed998105c851"
>
</ReqRef><ReqRef
 Id="6c2271aa-b854-4ce6-ba1f-4892e06164b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a6cfabff-7fb7-4352-9c32-44da3bba7c52"
>
</ReqRef><Comment>Adds a new static speed restriction to the axle load profile.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.INTERNATIONAL_STATIC_SPEED_PROFILE.SubStructure2"
 Name="aSSP"
 Guid="faadb6ed-5adf-4312-862f-6eb9d9ddafe4"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="Location"
 Guid="8100d5b7-efb3-43e4-8d23-620ad52782bc"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="AddSSR"
 Guid="4f612043-4708-43b6-acf9-4b2dab56b1d1"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="AddSSR"
 Guid="6488c209-5cd9-4792-928e-df18d7664664"
>
<PreConditions>
<PreCondition
 Guid="76370e9f-037b-4af0-9e28-c91b757b2024"
>aSSP.V_STATIC != 127</PreCondition></PreConditions>
<Actions>
<Action
 Guid="368e58a1-239c-4e8a-bd8b-37f1d4c829d8"
>INSERT
    Kernel.TrackDescription.StaticSpeedProfile.StaticSpeedRestrictionStruct
    {
        Location =&gt; Location,
        BasicSpeed =&gt; MessageTypes.SpeedResolution ( speed =&gt; aSSP.V_STATIC, resolution =&gt; 5.0 ),
        TrainLengthDelay =&gt; aSSP.Q_FRONT,
        Categories =&gt; MAP aSSP.Sequence2 USING X IN CreateSSPCategory ( Qualifier =&gt; X.Q_DIFF, Speed =&gt;MessageTypes.SpeedResolution ( speed =&gt; X.V_DIFF, resolution =&gt; 5.0 ), CantDeficiency =&gt; X.NC_CDDIFF, OtherSpecific =&gt; ERTMSCategory_To_EFSCategory ( X.NC_DIFF ) )
    }
IN
    Kernel.TrackDescription.StaticSpeedProfile.SSP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="AddLastSSR"
 Guid="4908efda-5ea6-4211-8a0c-8670fb31fc13"
>
<ReqRef
 Id="e475882b-f9a1-42e9-8001-c3a154f9acf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a8f2d23a-d675-4f12-af69-81b057e2f11c"
>
</ReqRef><PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="65d681d5-c87b-4c85-b562-87d5fcd83f47"
>INSERT
    Kernel.TrackDescription.StaticSpeedProfile.StaticSpeedRestrictionStruct
    {
        Location =&gt; Location,
        BasicSpeed =&gt; BaseTypes.Speed.Infinity,
        TrainLengthDelay =&gt; aSSP.Q_FRONT,
        Categories =&gt; MAP aSSP.Sequence2 USING X IN CreateSSPCategory ( Qualifier =&gt; X.Q_DIFF, Speed =&gt; MessageTypes.SpeedResolution ( speed =&gt; X.V_DIFF, resolution =&gt; 5.0 ), CantDeficiency =&gt; X.NC_CDDIFF, OtherSpecific =&gt; ERTMSCategory_To_EFSCategory ( X.NC_DIFF ) )
    }
IN
    Kernel.TrackDescription.StaticSpeedProfile.SSP</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="220"
 Y="410"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DeleteSSPBeyondLocation"
 Guid="441952f2-c0b8-427f-961e-1cef74d38580"
>
<ReqRef
 Id="32cdac05-1927-4110-9b53-fd54de0c7d76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d0613e08-a2c0-4c5b-9a60-a0e5022114f1"
>
</ReqRef><ReqRef
 Id="69c41e0d-de0a-4c0e-9b6d-32a32fdf13e2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b02e120e-fa6c-4fd1-bb9c-8c09ff3dcf13"
>
</ReqRef><ReqRef
 Id="8cd5d7d8-c20a-4927-9990-dacc4a577a3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="61c82126-ec18-4f87-ae1d-1df2784fc527"
>
</ReqRef><Comment>Deletes the static speed profile information beyond the provided location.</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="aLocation"
 Guid="f33560a7-0b94-4989-92c9-7ed3a801f349"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Delete SSP beyond the given location"
 Guid="07a9aee7-731a-450d-bec1-c45f6b597106"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Delete SSP beyond the given location"
 Guid="f2f3600e-8606-44c2-9f22-95071495c0a1"
>
<PreConditions>
<PreCondition
 Guid="d5f64758-35a8-4aef-bdd9-15409a0ae309"
>Kernel.TrackDescription.StaticSpeedProfile.SSP != []
  AND
(LAST X IN Kernel.TrackDescription.StaticSpeedProfile.SSP).Location &gt; aLocation</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Remove elements beyond the given location"
 Guid="80ab1292-0c84-4015-bd8e-c4b94c68be37"
>
<Comment>First, remove all the SSP elements that are beyond the provided location.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Remove elements beyond the given location"
 Guid="426b95bc-baef-4f7a-9c0e-707f4c14d63b"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="cc46a7b4-f4fe-4c91-ba39-baf6f39aa177"
>Kernel.TrackDescription.StaticSpeedProfile.SSP &lt;- MAP Kernel.TrackDescription.StaticSpeedProfile.SSP | X.Location &lt;= aLocation USING X IN X</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Add the last element"
 Guid="a0827398-5e0c-4856-9c34-aebfb49decdc"
>
<Comment>Then, create the final SSP element indicating that the SSP ends at aLocation.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Add the last element"
 Guid="c1c87825-d10f-46c4-879b-27ed753c23af"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="75ac58c7-6446-4952-a952-988f80156c00"
>INSERT
  Kernel.TrackDescription.StaticSpeedProfile.StaticSpeedRestrictionStruct
  {
    Location =&gt; aLocation,
    BasicSpeed =&gt; BaseTypes.Speed.Infinity
  }
IN
  Kernel.TrackDescription.StaticSpeedProfile.SSP</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="StaticSpeedRestrictionsCol"
 DefaultValue=""
 VariableMode="Internal"
 X="0"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SSP"
 Guid="68b202a8-76d1-4829-8fd4-c2ce4ed50af3"
>
<ReqRef
 Id="6a081658-e5b2-4c8a-a8ba-45dadd7e9e38"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d317a2f-491d-4798-8a8f-9e1f11bffe74"
>
</ReqRef><ReqRef
 Id="3e4a183c-969d-4574-ac8c-666dd8215c79"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="283d9992-5535-44ab-b020-d11dbc8192d3"
>
</ReqRef><ReqRef
 Id="beb70c99-c336-489a-a97e-b8236a026061"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="32ead586-1110-495e-ab68-abe568e62303"
>
</ReqRef><ReqRef
 Id="9570bc20-fe09-49cb-8e1d-d7adbb5fdfbc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="27a78f95-e024-4ba3-a664-1bbd0b4c3cea"
>
</ReqRef><ReqRef
 Id="9e0c6d45-0f4a-482d-9a28-dbe1f41746ed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="abaa0044-790e-40f7-95d2-303c34216e05"
>
</ReqRef><ReqRef
 Id="3c43fca9-0194-4760-80c8-6a85be01ba76"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3c6de040-f440-40c7-8e0d-a57e54d94a42"
>
</ReqRef><ReqRef
 Id="2a687eea-d3dd-4626-9d3b-b7befc8e354b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df51d40a-e69a-4049-b23c-2a43fdd4ab18"
>
</ReqRef><ReqRef
 Id="21ba223d-f14f-4cdc-9cef-7559c61b77d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa615337-5055-4d8b-af9f-86727a6546a3"
>
</ReqRef><ReqRef
 Id="88ae9a57-b890-4d8c-9a0e-bfba19896b12"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c888f0e-21bd-4378-bfb5-a8ae78c47fa1"
>
</ReqRef><ReqRef
 Id="55b068ea-cee1-4911-bfef-1991df1f43eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fcfd4bd2-5814-4efa-8e7f-6470ce7c1686"
>
</ReqRef><ReqRef
 Id="f9cf4b4c-a8b9-4cbd-b8c3-50dfd18b8759"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a80df857-2d6f-4e90-82f0-c5af5a4401d5"
>
</ReqRef><Comment>Represent the set of static speed restrictions.</Comment>
</Variable></Variables>
</NameSpace>
