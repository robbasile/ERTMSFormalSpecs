<NameSpace
 X="450"
 Y="70"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Name="SpeedAndDistanceMonitoring"
 Guid="29ccd64e-2889-44e6-8b10-6499287bee06"
>
<NameSpaces>
<NameSpaceRef
 Name="CeilingSpeedMonitoring"
 Guid="a4fc87f0-f9e3-4718-986e-7a7020dc12ef"
>
</NameSpaceRef><NameSpaceRef
 Name="TargetSpeedMonitoring"
 Guid="b4a654cf-3d2b-4910-82e9-b6e00ac05387"
>
</NameSpaceRef><NameSpaceRef
 Name="ReleaseSpeedMonitoring"
 Guid="2bb7559d-fea6-4f5f-b0bc-c7427d01c7a3"
>
</NameSpaceRef><NameSpaceRef
 Name="PreIndicationLocation"
 Guid="1694a829-9e08-4edb-b256-3f607da06326"
>
</NameSpaceRef><NameSpaceRef
 Name="DecelerationCurves"
 Guid="29a64862-d0b9-43c0-b92f-f410667dc938"
>
</NameSpaceRef><NameSpaceRef
 Name="Display"
 Guid="bb32cccc-1e33-4660-bbfa-3d61baab02f5"
>
</NameSpaceRef></NameSpaces>
<Enumerations>
<Enum
 Default="MonitoringType.None"
 X="410"
 Y="450"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="MonitoringType"
 Guid="1f626783-2f5e-4d01-87a0-e0c4cf7b413b"
>
<ReqRef
 Id="10645ba3-8d86-41ad-9956-71f5be85b4c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fe881505-f76c-4600-81bd-a7d7ee9e8a2d"
>
</ReqRef><Comment>Provides the sped and distance monitoring type as used by the DMI</Comment>
<Values>
<EnumValue
 Value=""
 Name="CSM"
 Guid="fa62acf4-43d2-4dbc-8715-65548c6b8169"
>
</EnumValue><EnumValue
 Value=""
 Name="PIM"
 Guid="a62b740c-fe43-4308-b8af-fbfbe8e028a4"
>
</EnumValue><EnumValue
 Value=""
 Name="TSM"
 Guid="e4f8548b-7152-4203-b020-83afff690dd8"
>
</EnumValue><EnumValue
 Value=""
 Name="RSM"
 Guid="3a80a246-0b82-4d8e-a2e4-0bd2ad2292df"
>
</EnumValue><EnumValue
 Value=""
 Name="None"
 Guid="5e38e1a4-b390-4757-ba12-f82907a119f5"
>
</EnumValue></Values>
</Enum><Enum
 Default="SupervisionStatusEnum.Normal"
 X="40"
 Y="450"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="SupervisionStatusEnum"
 Guid="c9d18bec-7195-4bb6-aaa2-9ff991ede889"
>
<ReqRef
 Id="b8bd12fa-1398-4b7e-82b5-d9fea4894091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2f379230-3d40-4cc0-b28d-f53dbfc3c9a6"
>
</ReqRef><ReqRef
 Id="10645ba3-8d86-41ad-9956-71f5be85b4c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c1e13b0-2e44-4db1-994c-8902fa382bf6"
>
</ReqRef><Comment>The status of speed and distance monitoring supervision.</Comment>
<Values>
<EnumValue
 Value=""
 Name="Normal"
 Guid="5ea9d991-d631-4e90-84a8-965e96ba5099"
>
</EnumValue><EnumValue
 Value=""
 Name="Indication"
 Guid="cab7f584-8a99-4283-91b3-05fdeb3529e9"
>
</EnumValue><EnumValue
 Value=""
 Name="Overspeed"
 Guid="4c141925-46fa-4e0f-8166-3d3405393ee9"
>
</EnumValue><EnumValue
 Value=""
 Name="Warning"
 Guid="746caa14-cd5f-4b1d-96ac-0ee96d8dd12f"
>
</EnumValue><EnumValue
 Value=""
 Name="Intervention"
 Guid="4a408ece-65d9-422b-9c10-cc70fbeae70c"
>
</EnumValue></Values>
</Enum></Enumerations>
<StateMachines>
<StateMachine
 Default="MonitoringTypeSM.Idle"
 X="300"
 Y="450"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="MonitoringTypeSM"
 Guid="435cb658-6129-43cc-b5ba-3145aff511f6"
>
<ReqRef
 Id="52f69d6f-9efe-46a8-bf28-82cdbaf08617"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e39fc7e8-b8bf-448b-994c-daf7c21eda9c"
>
</ReqRef><ReqRef
 Id="8f743e52-5860-4a00-b1c3-1a25d8b01bcf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e55f7847-f325-4a1f-a7c5-b40e0b63aea1"
>
</ReqRef><ReqRef
 Id="61609105-e374-4561-8058-cd995e0cac1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa184f4d-db22-46c7-ae7b-94499f44822a"
>
</ReqRef><ReqRef
 Id="1bd536e2-b2c8-48c3-84b5-53f4fd75ad05"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dde05966-758d-48c9-be95-81f6e093170b"
>
</ReqRef><ReqRef
 Id="32b65a6d-139f-482e-98ed-7dd88679ba95"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0da33471-5b51-4483-a52a-dbfcc00695c5"
>
</ReqRef><ReqRef
 Id="5554abd5-d957-475f-aa3a-5ae657f9ccf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8466f81b-d4b4-4083-8afd-dbe407d569a3"
>
</ReqRef><ReqRef
 Id="452e7369-8988-4a04-9d16-d7e769201a71"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="50c59557-ef97-4436-81ed-112527639ec8"
>
</ReqRef><ReqRef
 Id="464dd6eb-f8c7-42fe-b8d9-c416ee775f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b3f1b7e-25f1-40e1-bfb4-5b3d275ee41a"
>
</ReqRef><ReqRef
 Id="3ca3f276-f7a0-4c16-8b02-755e929a4ae3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa581db5-42d7-473e-afd4-8485d5298f02"
>
</ReqRef><ReqRef
 Id="cc36e13a-d68f-444d-9d8e-e9c7b6082a52"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="68fe477b-d35a-43cd-a620-31dca9e75ff1"
>
</ReqRef><ReqRef
 Id="c0c90876-1322-4533-951c-924804b80043"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="853aab1f-89d5-4d35-af23-7575771b9c2e"
>
</ReqRef><ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="88857337-a249-40c8-88b6-6aee76329c62"
>
</ReqRef><ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fc5e7a10-907e-482f-be20-47cac37b3439"
>
</ReqRef><ReqRef
 Id="12251a60-68aa-4b3a-a148-aaf3ecf250f4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b4b210b-3bff-4337-ab77-8ad9cff5a867"
>
</ReqRef><Comment>Lists the types of speed and distance monitoring and handles transitions between them</Comment>
<States>
<State
 X="80"
 Y="340"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Ceiling"
 Guid="c7afbefc-cc25-4539-9b42-effc013c42cb"
>
<Comment>Ceiling Speed Monitoring.</Comment>
<StateMachine
 Implemented="TRUE"
 Guid="11f43511-b66c-40ff-9cd8-49fc31a1e9cd"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update EB command"
 Guid="e10749b0-c07d-4d0d-9284-d7355a198a6c"
>
<ReqRef
 Id="4ef8d95d-9b39-4a31-af31-f673833b0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7f144931-f3c2-45f4-bbeb-dcf765c7d277"
>
</ReqRef><ReqRef
 Id="ec0c435b-0145-4656-99a6-3a16788797ff"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8fe8f98-ddb7-4e84-b495-eff425ee0479"
>
</ReqRef><ReqRef
 Id="4f24d434-b967-4e8b-b2b1-e0b3f4d6c2dc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fe6aa726-b452-42c8-aef8-91e78f63fd0b"
>
</ReqRef><ReqRef
 Id="1d80a2a9-35e8-42c0-b7af-767e7c110d32"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3e34992d-a271-4c7a-bea6-b21b40b2d2b2"
>
</ReqRef><ReqRef
 Id="0b1f3e7f-3acf-435f-8d5e-c7e079fd5ed6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="00e416df-89c2-46da-999f-ff65a9eaf937"
>
</ReqRef><ReqRef
 Id="f26aa00e-0ded-4d0d-bed9-58813a2d45eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="72ac639f-827f-4edd-a321-6c7a5a7b1f88"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6671aa46-b139-455a-a8ef-cd915e70612a"
>
</ReqRef><Comment>Apply or revoke the EB command, depending on the different trigger and revokation conditions (see 3.13.10.6.2).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke EB command"
 Guid="2c39971c-5608-4bf6-ba58-06a7bd8ded3c"
>
<Comment>Revokes the EB command.</Comment>
<PreConditions>
<PreCondition
 Guid="ba2d5d10-548d-4d8b-9ffb-90416e35045f"
>CeilingSpeedMonitoring.SupervisionStatus.r0()
  OR  
(
  NationalValues.ReleaseOfEBIsPermitted()
    AND  
  CeilingSpeedMonitoring.SupervisionStatus.r1()
)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b433482f-4bca-4601-847e-971895a08735"
>RevokeEBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Apply EB"
 Guid="8cd1d8d3-a301-49ba-be29-baa69a1e7405"
>
<Comment>Applies emergency brakes.</Comment>
<PreConditions>
<PreCondition
 Guid="b88f1880-c00d-4064-89e8-108719618388"
>CeilingSpeedMonitoring.SupervisionStatus.t5()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="226fe175-04af-4daa-bef3-67d43abe2a59"
>TriggerEBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Apply EB in RV"
 Guid="6536a141-ca40-4fb2-b16d-e0e06ba101fd"
>
<ReqRef
 Id="4942989a-27b7-455c-b74f-e8f066ff634b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aaad35bd-6eb6-422d-90c7-d52702020633"
>
</ReqRef><Comment>Applies emergency brakes if in RV mode.</Comment>
<PreConditions>
<PreCondition
 Guid="18dc0596-5393-4ac0-a87c-a1347ce27825"
>CeilingSpeedMonitoring.SupervisionStatus.t4()</PreCondition><PreCondition
 Guid="2f70f08c-fca8-468f-86db-e339dc8875e2"
>Kernel.Mode == ModeEnum.RV</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8e15cb2e-7abd-411b-b9ec-bd2754b5c5a3"
>TriggerEBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update SB command"
 Guid="61694b26-e88d-4cdd-a639-c0318a3269d7"
>
<ReqRef
 Id="4ef8d95d-9b39-4a31-af31-f673833b0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="edc60b1d-1d94-4d91-844d-265542077d6b"
>
</ReqRef><ReqRef
 Id="ec0c435b-0145-4656-99a6-3a16788797ff"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1c614116-56f4-4e70-a068-b910f0f79f33"
>
</ReqRef><ReqRef
 Id="f26aa00e-0ded-4d0d-bed9-58813a2d45eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6cd4d6ae-9764-4371-bd68-b4356c556087"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8046f99a-35d6-46a3-a971-aead6e2c4356"
>
</ReqRef><Comment>Revoke the SB command if it is applied and the revokation condition is met.
This is used to handle the case where a previous brake command was not revoked before the monitoring type changed (see 3.13.10.6.2).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke SB command"
 Guid="e61dd03a-0729-485f-9e5d-0ed56921a06d"
>
<Comment>Revokes the SB command.</Comment>
<PreConditions>
<PreCondition
 Guid="0dd5e148-39c4-4b87-b032-62c0ff4db389"
>CeilingSpeedMonitoring.SupervisionStatus.r1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f46f7791-f7bb-45b2-bcbd-39fe148da8d7"
>RevokeSBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Apply SB"
 Guid="05bd0755-de1e-49f6-b515-a1ee2183b182"
>
<ReqRef
 Id="4942989a-27b7-455c-b74f-e8f066ff634b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5446cd91-3df0-472d-aa62-8cddee5e06e5"
>
</ReqRef><Comment>Applies service brakes.</Comment>
<PreConditions>
<PreCondition
 Guid="600903d5-380d-4149-80aa-48310934d644"
>CeilingSpeedMonitoring.SupervisionStatus.t4()</PreCondition><PreCondition
 Guid="5618ae2f-6260-409f-ba21-41bec991ef9a"
>Kernel.Mode != ModeEnum.RV</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4376c575-b8d3-4029-81fc-afb4b4a47b06"
>TriggerSBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine><EnterAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Enter action"
 Guid="baab8185-f07d-4a04-8ae1-e03968fe1ad9"
>
<Comment>Select the supervision status when Ceiling speed monitoring is initiated.</Comment>
<SubRules></SubRules>
</Rule></EnterAction>
<LeaveAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Leave action"
 Guid="be891b66-d350-4b19-8d9e-d7c4bccc7fa8"
>
<Comment>Indicates to the JRU that the monitoring changed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Leave action"
 Guid="7baa5fae-1499-4044-8fa2-897c5be15e82"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="71a5fde1-598a-4fbc-adc1-ac8823fd6473"
>JRU.JRU1.SpeedAndDistanceSupervisionTypeChanged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></LeaveAction>
</State><State
 X="560"
 Y="330"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Target"
 Guid="0784fa98-3aea-4f51-8153-d70ae0a50b40"
>
<ReqRef
 Id="6112d3b2-46f0-4ecb-8029-415b38396a4d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c8541723-db68-4d14-be22-7d8d19a99a48"
>
</ReqRef><ReqRef
 Id="87168408-94a2-4eeb-8c4a-666507a95b45"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="92818321-8fc2-4eff-9823-d8d163fda06a"
>
</ReqRef><Comment>Target Speed Monitoring.</Comment>
<StateMachine
 Implemented="TRUE"
 Guid="04526e41-51a0-49ff-a66a-c48d62f36411"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update SB command"
 Guid="64ff6938-112d-4a91-8f6e-9e3c7d7caaa0"
>
<ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14e3ecb3-7494-4596-bba0-c2651d1d922a"
>
</ReqRef><ReqRef
 Id="c67a3f36-61c7-4021-a4d9-2d9bbe0d08aa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fdb3e8d2-846b-4056-b4dc-637eed011014"
>
</ReqRef><ReqRef
 Id="8f56c788-64ae-457b-b163-9023aca9643c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="97c3c1c6-291b-4c52-9164-5463a296e7e4"
>
</ReqRef><ReqRef
 Id="5b666657-27b5-46b4-9ee5-194c4319dd17"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="efdb2cd3-cdbc-41f3-9d8f-db976d1385b6"
>
</ReqRef><ReqRef
 Id="2c0f9388-fcbe-4608-aafb-aad27bc06d88"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8ed370b7-f685-4384-a0d0-48d562c99d63"
>
</ReqRef><ReqRef
 Id="9e577947-88cc-41b1-857e-6a7b33567ea5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3aef65bc-ac6d-4838-800c-88af783a8bab"
>
</ReqRef><ReqRef
 Id="d1eb1a87-f8ea-4a77-bf6c-5d1b53c98b42"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cf0120c5-c52e-425f-aa1e-978407c11043"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="60ad5862-6dde-4dc5-accc-1faa7ac5a720"
>
</ReqRef><Comment>Revoke the SB command if it is applied and the revokation condition is met.
This is used to handle the case where a previous brake command was not revoked before the monitoring type changed (see 3.13.10.6.2).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke SB command"
 Guid="0f97662d-e8e0-4ab4-8920-1af8e08a5014"
>
<Comment>Disables the SB commands</Comment>
<PreConditions>
<PreCondition
 Guid="e00bdd73-5703-4cd4-9566-fa3472b3b1d8"
>FORALL aTarget IN TargetsList() |
(
TargetSpeedMonitoring.SupervisionStatus.r1(aTarget)
  OR  
TargetSpeedMonitoring.SupervisionStatus.r2(aTarget)
  OR  
TargetSpeedMonitoring.SupervisionStatus.r3(aTarget)
)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="60f0485d-848a-4cc0-a28f-9d97ae37e8dc"
>RevokeSBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Enable SB comment"
 Guid="0bcde192-cae8-4580-b38a-97e60da79389"
>
<Comment>Enables the SB commands</Comment>
<PreConditions>
<PreCondition
 Guid="0853620b-2c03-40bd-88e5-f993043f9f18"
>TargetSpeedMonitoring.SupervisionStatus.t10()
  OR  
TargetSpeedMonitoring.SupervisionStatus.t11()
  OR  
TargetSpeedMonitoring.SupervisionStatus.t12()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7bad018c-821e-4b5d-9414-7ee02faccd43"
>TriggerSBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update EB command"
 Guid="c0828251-fd64-4288-ac32-a67b3e5deac9"
>
<ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a111b01-e693-4b5e-9a29-fbb2aec8c879"
>
</ReqRef><ReqRef
 Id="775d91cf-e44c-4da5-964b-d0cb40ab524b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3b49c8b6-721e-4ea1-96e4-92697e1ce0c5"
>
</ReqRef><ReqRef
 Id="95129f07-4e8c-4a36-be22-0671888b69bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4dd6f433-4a51-47fb-aaf6-e851d5c459ad"
>
</ReqRef><ReqRef
 Id="2c0f9388-fcbe-4608-aafb-aad27bc06d88"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="845c8dd8-f4e5-4ea4-990f-d43f241cfb7f"
>
</ReqRef><ReqRef
 Id="9e577947-88cc-41b1-857e-6a7b33567ea5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6c24eea5-e8a1-4186-91d0-2b0d4310b40d"
>
</ReqRef><ReqRef
 Id="d1eb1a87-f8ea-4a77-bf6c-5d1b53c98b42"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0a0ec592-9c6c-45f3-94f8-e1edee1951c6"
>
</ReqRef><ReqRef
 Id="5b666657-27b5-46b4-9ee5-194c4319dd17"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44625dc3-d668-4415-8556-9040842028fc"
>
</ReqRef><ReqRef
 Id="8f56c788-64ae-457b-b163-9023aca9643c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5af4bc4a-dcca-453d-a6e6-bf41ae6012d2"
>
</ReqRef><ReqRef
 Id="c67a3f36-61c7-4021-a4d9-2d9bbe0d08aa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8021f342-93e5-49c4-812c-28ab20177661"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d1262253-d0d4-4b2b-b053-7666576c09a7"
>
</ReqRef><Comment>Revoke the EB command if it is applied and the revokation condition is met.
This is used to handle the case where a previous brake command was not revoked before the monitoring type changed (see 3.13.10.6.2).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke EB command"
 Guid="bb273959-9fa2-4af5-a37f-68d1e62aacc1"
>
<Comment>Disables EB commands</Comment>
<PreConditions>
<PreCondition
 Guid="966ac758-ac03-4851-b9a5-d9505b7b260f"
>TargetSpeedMonitoring.SupervisionStatus.r0()
  OR  
(
  NationalValues.ReleaseOfEBIsPermitted()
    AND  
  (
  FORALL aTarget IN TargetsList() |
    (
      TargetSpeedMonitoring.SupervisionStatus.r1(aTarget)
      OR  
      TargetSpeedMonitoring.SupervisionStatus.r2(aTarget)
      OR  
      TargetSpeedMonitoring.SupervisionStatus.r3(aTarget)
    )
  )
)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0707da0b-ad6f-466c-86a8-78029248b81a"
>RevokeEBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Enable EB command"
 Guid="e392c399-16e2-4029-a0db-9d14f4e796ec"
>
<Comment>Apply emergency brake.</Comment>
<PreConditions>
<PreCondition
 Guid="5f8958b4-40c1-4ba8-8fd0-ad6c03c1d219"
>TargetSpeedMonitoring.SupervisionStatus.t13()
  OR  
TargetSpeedMonitoring.SupervisionStatus.t14()
  OR  
TargetSpeedMonitoring.SupervisionStatus.t15()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a69f5823-a560-4efd-a14f-c47ef643cac6"
>TriggerEBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update TCO command"
 Guid="cf19cc91-e3e9-4e07-89d6-ff4addd84b6d"
>
<ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8287fc99-c3a8-4ec6-a0ec-e47b704eaf22"
>
</ReqRef><Comment>Updates the traction cutoff</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Enable traction cutoff"
 Guid="c6c389f3-8a0f-49c6-9982-70f4701b0ecf"
>
<ReqRef
 Id="d394cede-dff2-4764-b72a-288ee8d5617c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7911343f-463a-4998-b0bb-a41ddf7b84e4"
>
</ReqRef><ReqRef
 Id="d916181f-d7a1-4043-9617-e814b97ae7b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="101c1a94-41fb-4cab-bd12-e9a58efe37c4"
>
</ReqRef><ReqRef
 Id="0342251f-d656-4d41-8ece-bde758fbfadf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="68ea3156-9d37-4082-ae16-372470f07e0e"
>
</ReqRef><Comment>Enables the traction cutoff</Comment>
<PreConditions>
<PreCondition
 Guid="2240faf3-e31f-4e23-ad97-ecb6efd8f5a1"
>TargetSpeedMonitoring.SupervisionStatus.t7() OR
TargetSpeedMonitoring.SupervisionStatus.t8() OR
TargetSpeedMonitoring.SupervisionStatus.t9()</PreCondition><PreCondition
 Guid="78d7f466-a6a2-4f5b-8f44-aadcffd84414"
>NOT TIU.CutOffTraction</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3a9193cf-4005-49a0-8563-67631d212b77"
>TIU.CutOffTraction &lt;- True</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Disable traction cutoff"
 Guid="fc063bfd-ef27-43c5-8be2-ca498b7fc9bc"
>
<ReqRef
 Id="c67a3f36-61c7-4021-a4d9-2d9bbe0d08aa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="626403ee-6acb-499a-8852-fb7175576893"
>
</ReqRef><ReqRef
 Id="8f56c788-64ae-457b-b163-9023aca9643c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5e3984b1-bfc3-41ff-a6e8-05e372f50472"
>
</ReqRef><ReqRef
 Id="5b666657-27b5-46b4-9ee5-194c4319dd17"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="262908b3-f282-42a2-b749-904429aaee08"
>
</ReqRef><ReqRef
 Id="2c0f9388-fcbe-4608-aafb-aad27bc06d88"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f59b63cf-f7f2-4ea7-b489-88df11fe8938"
>
</ReqRef><ReqRef
 Id="9e577947-88cc-41b1-857e-6a7b33567ea5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="12afb7fc-8130-4b06-9cc9-97d562391301"
>
</ReqRef><ReqRef
 Id="d1eb1a87-f8ea-4a77-bf6c-5d1b53c98b42"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a6b43ba1-e758-4a5f-ade1-2dc92caa4459"
>
</ReqRef><Comment>Disables the traction cutoff</Comment>
<PreConditions>
<PreCondition
 Guid="90d45a34-990c-49d5-b9d2-2de06025a01e"
>FORALL target IN TargetsList() | 
(
       TargetSpeedMonitoring.SupervisionStatus.r1( target)
OR TargetSpeedMonitoring.SupervisionStatus.r2( target)
OR TargetSpeedMonitoring.SupervisionStatus.r3( target) 
)</PreCondition><PreCondition
 Guid="dd45cce3-2778-4a6d-aa37-05abe37d4cb2"
>TIU.CutOffTraction</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3d8e5794-d5ad-4d6c-bd07-ac70efbee1a3"
>TIU.CutOffTraction &lt;- False</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="CleanUp"
 Implemented="TRUE"
 Name="Update previous displayed target"
 Guid="8e9780b8-2b6c-49b3-bbf3-2f36038a0667"
>
<Comment>Updates the previous displayed target to detect changes</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Keep track of the previously displayed target"
 Guid="9a140030-f81c-47f2-94c8-996f47d10d47"
>
<PreConditions>
<PreCondition
 Guid="2d49c9a2-bb7c-4883-b6ff-cd1da93825a7"
>GetSupervisionStatus() == SupervisionStatusEnum.Indication</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9f338464-f144-452f-bb74-9474a9b37a1f"
>TargetSpeedMonitoring.PreviousDisplayedTarget &lt;-  Display.MRDT()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine><EnterAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Enter action"
 Guid="188bcc4f-1b2d-4ab0-a253-b360c5bf3add"
>
<ReqRef
 Id="e0714dd3-9891-467d-9584-cfde98bcc4fc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6946be91-eaa6-4ef7-b519-9e931ed637c0"
>
</ReqRef><Comment>Select the supervision status when Target speed monitoring is initiated.</Comment>
<SubRules></SubRules>
</Rule></EnterAction>
<LeaveAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Leave action"
 Guid="5f94ad4a-4721-4108-aab2-27b5758953e8"
>
<Comment>Indicates to the JRU that the monitoring changed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Leave action"
 Guid="c381aa52-44c1-4339-a2e9-e16690e9e08f"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="99cfef32-2db0-4b56-bf19-0e91ceb84880"
>JRU.JRU1.SpeedAndDistanceSupervisionTypeChanged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></LeaveAction>
</State><State
 X="560"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Release"
 Guid="07de5e9f-788d-415d-8ebd-f5b04846c216"
>
<Comment>Release Speed Monitoring.</Comment>
<StateMachine
 Implemented="TRUE"
 Guid="4c471652-a236-49b9-afdf-492ed8264c22"
>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Update EB command"
 Guid="d8790369-f290-4449-9602-b380066e6646"
>
<ReqRef
 Id="9b034e20-6738-4ae4-ba40-0ac20a7bf5cd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bc389d9e-368d-44fc-9bae-d47d2a18e2f7"
>
</ReqRef><ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8faaf571-f6d6-4aa3-8954-a53bc9635bc9"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f54afe2-309f-474e-a291-0071e73b0a8b"
>
</ReqRef><Comment>Revoke the EB command if it is applied and the revokation condition is met.
This is used to handle the case where a previous brake command was not revoked before the monitoring type changed (see 3.13.10.6.2).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke EB command"
 Guid="d8a9e324-a23f-49c8-850c-e614cd01f572"
>
<Comment>Revokes EB command</Comment>
<PreConditions>
<PreCondition
 Guid="bcca89cc-d192-41f8-802e-09bf205730cb"
>SpeedAndDistanceMonitoring.ReleaseSpeedMonitoring.SupervisionStatus.r0()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4c9a1a22-88ae-4562-8a6e-2ac5a1aa8e96"
>SpeedAndDistanceMonitoring.RevokeEBCommand()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Enable EB command"
 Guid="7bda3036-5443-4d91-8fd6-cf199e55597e"
>
<Comment>Apply EB</Comment>
<PreConditions>
<PreCondition
 Guid="4472cd09-1a3f-4179-a7e6-e79446019289"
>SpeedAndDistanceMonitoring.ReleaseSpeedMonitoring.SupervisionStatus.t2()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="fe18f2c7-ef71-4d22-984e-315c71a21139"
>SpeedAndDistanceMonitoring.TriggerEBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</StateMachine><EnterAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Enter action"
 Guid="9fc4baf1-6184-4e92-8a28-3aed9784acea"
>
<ReqRef
 Id="452e7369-8988-4a04-9d16-d7e769201a71"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0ee1a16d-3d29-4375-b728-6b51d3c9d54a"
>
</ReqRef><ReqRef
 Id="dce4a4ca-1d9d-4bec-bbd0-b82a791c93bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e4694e3e-6a91-41bd-85be-32156beb3420"
>
</ReqRef><ReqRef
 Id="cc58f785-b8ad-4070-9b9a-b6ec8e0f6e2a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6021a7a0-a964-4a77-bf4e-a6fa9c7b114b"
>
</ReqRef><ReqRef
 Id="b1282fd5-cab1-48c7-bdf8-26de1ac6a0f5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c92469b2-fc26-4fe4-986f-5cc5d2673547"
>
</ReqRef><ReqRef
 Id="896f9fb5-9ef6-459b-b93e-c681a1ec59d4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8d655bde-2884-4acd-9110-410bd58ce492"
>
</ReqRef><ReqRef
 Id="f71170cc-f625-404a-93f9-5cb4b527f0d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="632c978b-4dc5-4df1-a1ce-15003f705620"
>
</ReqRef><Comment>Select the supervision status when Release speed monitoring is initiated.</Comment>
<SubRules></SubRules>
</Rule></EnterAction>
<LeaveAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Leave action"
 Guid="91880f7e-475c-4cfc-bb01-f24f66ae0fb7"
>
<Comment>Indicates to the JRU that the monitoring changed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Leave action"
 Guid="8715927c-480d-4a7e-be83-e4669b9d13b8"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="c33a8f0b-d6b4-468c-a30e-601b26499fae"
>JRU.JRU1.SpeedAndDistanceSupervisionTypeChanged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></LeaveAction>
</State><State
 X="70"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Idle"
 Guid="1edf48d7-6c71-4956-a753-852a9d9d4bf9"
>
<Comment>Speed and distance monitoring is inactive.</Comment>
<StateMachine
 Implemented="TRUE"
 Guid="98ea433a-587b-40e7-8a72-c66ae4c4b16d"
>
</StateMachine><LeaveAction>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Leave action"
 Guid="6ca89d14-fa3d-45c8-8759-a3a6068101ec"
>
<Comment>Indicates to the JRU that the monitoring changed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Leave action"
 Guid="ca431c11-db0d-4153-bff3-01d864a4e922"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="82058584-29de-45da-b2ee-c7b67ac12c96"
>JRU.JRU1.SpeedAndDistanceSupervisionTypeChanged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule></LeaveAction>
</State></States>
</StateMachine></StateMachines>
<Functions>
<Function
 Type="BaseTypes.Speed"
 Cacheable="TRUE"
 Default=""
 X="720"
 Y="10"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="f41"
 Guid="574a6d60-6f0a-4231-a88a-b3218269d93e"
>
<ReqRef
 Id="4e10c5a1-f415-44fc-b597-8b1a359c2c25"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0c6a75ff-8f1c-4f21-9eef-d04e42c7f902"
>
</ReqRef><ReqRef
 Id="0e91b525-553f-4f68-8970-8bed83e88948"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2017e1bf-bd0e-4eb7-998a-954314fa9191"
>
</ReqRef><ReqRef
 Id="ae24dcec-0c75-48cd-b842-4d34ef229a22"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ab44b8c8-44a1-44c9-83aa-3681e2d9d406"
>
</ReqRef><ReqRef
 Id="92e9a363-c16c-40c0-9622-49031126869d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="096a72ec-a7bf-4fff-80d1-9a93ff9ce660"
>
</ReqRef><ReqRef
 Id="4ba91473-9e38-449c-87e0-203353bc7bcb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c9abd426-62b5-4e1f-ac94-6cfa5ac6658b"
>
</ReqRef><ReqRef
 Id="528dbfd7-4b7d-4b1d-a596-153aec151d71"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="92bd9095-b0a8-4566-a3fb-1b411b0b3f6b"
>
</ReqRef><ReqRef
 Id="0a156077-932d-4831-b7d8-8cb0350879e1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9e5a23b-af2f-489e-9a1a-4807bb1e24fc"
>
</ReqRef><ReqRef
 Id="14b50fc8-d11d-4f00-a819-56def9d260b0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3b925746-fb54-4ae6-880c-592e8d84b4a4"
>
</ReqRef><ReqRef
 Id="dfe813b0-9500-4f66-bdc1-50df0c88f0ca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4a5e0389-c293-4c48-b6b4-24af30b8dfee"
>
</ReqRef><Comment>Computes the compensation of the inaccuracy of the speed measurement. For speed greater than 30km/h, the value is computed using the formula (1/47) * Speed + 7 - (1/47)</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Speed"
 Name="V"
 Guid="55c660e8-c7d5-45aa-a698-c5f1cc010f34"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Speed lower than 30km/h"
 Guid="be93371e-e4bb-49d1-b368-83e2c75653f5"
>
<PreConditions>
<PreCondition
 Guid="5394b5c1-088b-4cd4-99d8-833a9ccb9b0e"
>V &lt; 30.0</PreCondition><PreCondition
 Guid="fc94aa76-153b-481d-a628-d5e5681681be"
>NOT Kernel.NationalValues.CompensationOfInaccuracyOfTheSpeedIsInhibited()</PreCondition></PreConditions>
<Expression>2.0</Expression>
</Case><Case
 Name="Speed upper than 30km/h"
 Guid="e612c16a-0960-440e-b48a-bcffc10dd9ee"
>
<PreConditions>
<PreCondition
 Guid="9db93c12-dc1f-44b4-ab37-d59c2760812b"
>NOT Kernel.NationalValues.CompensationOfInaccuracyOfTheSpeedIsInhibited()</PreCondition></PreConditions>
<Expression>V / 47.0 + 7.0 - 265.0 / 47.0</Expression>
</Case><Case
 Name="Compensation of inaccuracy inhibited"
 Guid="7d443066-45eb-484f-993c-be2d35dda86b"
>
<Expression>0.0</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Cacheable="TRUE"
 Default=""
 X="500"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition1"
 Guid="6f7b540b-4441-4ce5-9081-32c38369a81c"
>
<ReqRef
 Id="32b65a6d-139f-482e-98ed-7dd88679ba95"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="33c079d8-dff7-4e5f-8772-dd5212ebaef2"
>
</ReqRef><ReqRef
 Id="c0c90876-1322-4533-951c-924804b80043"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cce65636-616f-4975-9273-277a934d7cda"
>
</ReqRef><ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2fc12d5d-837d-4951-b19a-84075573cfdb"
>
</ReqRef><ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="97a207f7-c120-4134-8586-c678455b1e3d"
>
</ReqRef><ReqRef
 Id="de364883-d636-476b-8455-154f2ebd4444"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b4bbeb9-722a-4fc4-a5c9-ddc7e371f3f0"
>
</ReqRef><ReqRef
 Id="8e95d803-0ad3-43b6-b488-8471ea3f792a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d180cb13-f3ac-44d7-b3af-fec51d117e5f"
>
</ReqRef><ReqRef
 Id="78901f0f-a70f-415d-8d57-e5156f7206d0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2015ba32-d8ac-4466-b4b5-c454afc84f64"
>
</ReqRef><Comment>Condition for transition from Ceiling Speed Monitoring to Target Speed Monitoring.</Comment>
<Cases>
<Case
 Name="Pre-indication location already in rear of train for at least one target"
 Guid="9e60f7bd-616e-4dcc-92ae-09b6b9a8c5e4"
>
<PreConditions>
<PreCondition
 Guid="a9cf64fe-934f-41fc-b58b-190b853ccc0d"
>THERE_IS aTarget IN SpeedAndDistanceMonitoring.TargetsList() | 
aTarget.Location != BaseTypes.Distance.Infinity AND
SpeedAndDistanceMonitoring.PreIndicationLocation.d_preindication(aTarget) == BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Train passed pre-indication location"
 Guid="d246cb6e-5ad9-415b-a581-75b2b0b9263a"
>
<PreConditions>
<PreCondition
 Guid="699a6b10-e831-4c8a-a3ed-591f85155457"
>THERE_IS aTarget IN SpeedAndDistanceMonitoring.TargetsList() | 
(
  aTarget.Location != BaseTypes.Distance.Infinity
    AND
  TrainFrontRef( aTarget ) &gt; SpeedAndDistanceMonitoring.PreIndicationLocation.d_preindication(aTarget)
)</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="39491cf3-c180-4b5f-9fdb-2d5c5b334573"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Cacheable="TRUE"
 Default=""
 X="610"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition2"
 Guid="a41dd03f-2476-4bc0-b911-b4d3d756b71e"
>
<ReqRef
 Id="5554abd5-d957-475f-aa3a-5ae657f9ccf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0a96f45e-e74e-4790-9e3d-0c49d886a440"
>
</ReqRef><ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d256f825-d472-4909-88b7-13e8c8196f52"
>
</ReqRef><ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5600f4c9-9110-4787-b426-4cd2e9c70094"
>
</ReqRef><ReqRef
 Id="78901f0f-a70f-415d-8d57-e5156f7206d0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1f6caccc-a34a-42df-97ba-fd76a22a5e98"
>
</ReqRef><Comment>Condition for transition from Target Speed Monitoring to Release Speed Monitoring.</Comment>
<Cases>
<Case
 Name="Release speed supervision not applicable"
 Guid="798703a7-f9cc-4ec5-a130-755b1447ed77"
>
<PreConditions>
<PreCondition
 Guid="cf3b896f-fb17-488d-b161-3d696a8be236"
>NOT ReleaseSpeedMonitoring.ReleaseSpeedSupervisionApplicable()</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Max safe front end passed RSM start location calculated from EBD"
 Guid="06d8c12a-e5d7-40f6-abec-0d47871c3cd2"
>
<PreConditions>
<PreCondition
 Guid="a2671150-1a48-4a93-a571-ee7dc6ed43f4"
>ReleaseSpeedMonitoring.d_startRSM() == ReleaseSpeedMonitoring.d_SBI2_MREBDT(ReleaseSpeedMonitoring.ReleaseSpeed)</PreCondition></PreConditions>
<Expression>TrainPosition.FrontEndPosition(DistanceIntervalEnum.Max) &gt; ReleaseSpeedMonitoring.d_startRSM()</Expression>
</Case><Case
 Name="Estimated front end passed the RSM start location calculated from the SBD"
 Guid="bd2ace5d-961a-4ddb-90e5-69d8d84f685c"
>
<PreConditions>
<PreCondition
 Guid="f8adfacb-74dc-41a8-8697-5e6f221b4abc"
>ReleaseSpeedMonitoring.d_startRSM() == TargetSpeedMonitoring.d_SBI1(ReleaseSpeedMonitoring.ReleaseSpeed)</PreCondition></PreConditions>
<Expression>TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom) &gt; ReleaseSpeedMonitoring.d_startRSM()</Expression>
</Case><Case
 Name="Otherwise"
 Guid="9f14db44-2384-4edc-874b-9d3b1e7e1632"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="TargetsCol"
 Cacheable="TRUE"
 Default=""
 X="150"
 Y="160"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TargetsList"
 Guid="f4668202-f4f0-4a13-b076-7ffb98ee3f01"
>
<ReqRef
 Id="733908ef-20dd-403f-b49a-d8da495aae43"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8a42be91-3dc5-4002-8801-e41a30c9d8d0"
>
</ReqRef><ReqRef
 Id="e649c72e-4921-4f72-bd76-a86e76991c5c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="69d9c141-0c74-4244-ae95-168ffa79b8fb"
>
</ReqRef><ReqRef
 Id="5e616edd-93b3-48b1-9e3c-e0c863f4a609"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="094f9ba7-818c-4de5-a3f2-71445b3f7aae"
>
</ReqRef><ReqRef
 Id="04a0794a-23c9-4383-8869-f2d8e4aab882"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e2a91ad4-9994-405f-b84b-fe633df721e0"
>
</ReqRef><ReqRef
 Id="68cdb140-3c4e-4bdc-a122-88e2b2e22f7f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1909ab94-c35f-4546-b55c-e33a92e19087"
>
</ReqRef><ReqRef
 Id="cb22befd-4969-4fdf-9f68-f6b39ec1abe3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d2c0bca9-63da-452f-91c0-11fed4519403"
>
</ReqRef><ReqRef
 Id="6f7286d5-47c8-4fc2-8fd3-ed4da2867417"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b768b5f-abb8-498d-89f6-2c769323d947"
>
</ReqRef><ReqRef
 Id="3db576cb-65c4-4a7c-b6a3-7092c89448db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="13ed312e-8f63-427d-b4c5-410bf7d6e94a"
>
</ReqRef><ReqRef
 Id="ca1c598d-015e-44b0-9659-1a4c483f22b5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="33ed3945-7d6c-41bb-99ec-04bae73ecac3"
>
</ReqRef><Comment>Returns the list of supervised targets for the train.</Comment>
<Cases>
<Case
 Name="Supervise MRSP and max dist in SR mode"
 Guid="c5ea4f4f-f3a0-4e4a-a583-fbee5e633875"
>
<PreConditions>
<PreCondition
 Guid="70b90267-1f97-420a-98f2-50458a60d168"
>Kernel.ActiveFunctions.SuperviseTrainSpeed_MRSP_DistInSRMode()</PreCondition></PreConditions>
<Expression>MRSPTargets() + [Modes.StaffResponsible.SREndTarget()]</Expression>
</Case><Case
 Name="Otherwise"
 Guid="5bfa34f7-80f1-4c7a-8338-d7b0662d057c"
>
<Expression>MRSPTargets() + [MA.EOA(), MA.SvL()]</Expression>
</Case></Cases>
</Function><Function
 Type="SupervisionStatusEnum"
 Cacheable="TRUE"
 Default=""
 X="150"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="GetSupervisionStatus"
 Guid="c8264e57-7e0f-4625-bc3b-fd7738fde2b7"
>
<Comment>Provides the current supervision status for the DMI and the JRU</Comment>
<Cases>
<Case
 Name="Always"
 Guid="fe46922f-11ce-49cd-87ba-aba98a1f267f"
>
<Expression>SupervisionStatus</Expression>
</Case></Cases>
</Function><Function
 Type="MonitoringType"
 Cacheable="TRUE"
 Default=""
 X="520"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="GetMonitoringType"
 Guid="81ccd354-aa2f-474c-910d-88a66385c8dc"
>
<Comment>Returns a enum value for the current speed and distance monitoring type (CSM, TSM, ...)</Comment>
<Cases>
<Case
 Name="CSM"
 Guid="6fae8a65-cefb-46d6-bbab-60430fa382c5"
>
<PreConditions>
<PreCondition
 Guid="53ca0f91-10e5-4dd6-9f22-b2d224fc39db"
>SpeedAndDistanceMonitoring.Monitoring in SpeedAndDistanceMonitoring.MonitoringTypeSM.Ceiling</PreCondition></PreConditions>
<Expression>SpeedAndDistanceMonitoring.MonitoringType.CSM</Expression>
</Case><Case
 Name="RSM"
 Guid="ab09e191-d5d0-47ea-86f7-b616445f8c35"
>
<PreConditions>
<PreCondition
 Guid="3f7d104e-b754-41d8-bad2-d90b3d89ee60"
>SpeedAndDistanceMonitoring.Monitoring in SpeedAndDistanceMonitoring.MonitoringTypeSM.Release</PreCondition></PreConditions>
<Expression>SpeedAndDistanceMonitoring.MonitoringType.RSM</Expression>
</Case><Case
 Name="PIM"
 Guid="fcc4c295-dfef-4a1c-b298-67754bc3bed5"
>
<PreConditions>
<PreCondition
 Guid="83cbb20b-cbe1-4364-967a-c98eb720ea26"
>IsInPIM()</PreCondition></PreConditions>
<Expression>SpeedAndDistanceMonitoring.MonitoringType.PIM</Expression>
</Case><Case
 Name="TSM"
 Guid="924a647c-efa7-4ca3-98ed-a77cb55a7fba"
>
<PreConditions>
<PreCondition
 Guid="896f70f4-6cd5-4242-b439-75100b519427"
>SpeedAndDistanceMonitoring.Monitoring in SpeedAndDistanceMonitoring.MonitoringTypeSM.Target</PreCondition></PreConditions>
<Expression>SpeedAndDistanceMonitoring.MonitoringType.TSM</Expression>
</Case><Case
 Name="Otherwise"
 Guid="db82fc54-36f1-4723-aeac-cbbd58c1af8d"
>
<Expression>SpeedAndDistanceMonitoring.MonitoringType.None</Expression>
</Case></Cases>
</Function><Function
 Type="TargetsCol"
 Default=""
 X="150"
 Y="220"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="MRSPTargets"
 Guid="7849e29a-c61e-4bf4-bb42-781cc8e1a9f7"
>
<ReqRef
 Id="5e616edd-93b3-48b1-9e3c-e0c863f4a609"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ffaf4a74-663e-45e5-a0e0-97640c9d57a8"
>
</ReqRef><ReqRef
 Id="04a0794a-23c9-4383-8869-f2d8e4aab882"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ce9e3242-c3cb-4633-900b-329a1e7bf0ea"
>
</ReqRef><ReqRef
 Id="3db576cb-65c4-4a7c-b6a3-7092c89448db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="906ed3e6-0053-4cdd-965b-bcbd90b699f4"
>
</ReqRef><ReqRef
 Id="ca1c598d-015e-44b0-9659-1a4c483f22b5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28cb966f-7bd6-4082-b56c-fc0e5f29371f"
>
</ReqRef><Comment>Calculates the list of currently supervised targets from the MRSP.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="fb67d731-5a0c-4ab6-a8a2-43706b43f760"
>
<Expression>MAP TARGETS(Kernel.MRSP.SpeedRestrictions) | X.Location &gt;= TrainPosition.FrontEndPosition(DistanceIntervalEnum.Max) USING X IN X</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="630"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="IsInPIM"
 Guid="16013676-ee91-4462-a8cd-f965052d9488"
>
<ReqRef
 Id="390f4b65-adee-4034-a7aa-f56b1d0af7f6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a966a6cc-8968-4ae2-ade6-631c62d8154d"
>
</ReqRef><Comment>Determines whether the current monitoring type corresponds to PIM.</Comment>
<Cases>
<Case
 Name="Monitoring type not Target"
 Guid="241e8a12-7988-458e-86db-b9ee52ce2bcb"
>
<PreConditions>
<PreCondition
 Guid="9eb77935-658c-495b-8765-858df3841542"
>Monitoring not in [MonitoringTypeSM.Target]</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Indication limit at MRSP speed unknown"
 Guid="8c992347-b6f4-429e-824b-5bf72f08fb85"
>
<PreConditions>
<PreCondition
 Guid="30ecc4c4-3928-4247-aa7a-f4e3ead580a5"
>THERE_IS aTarget IN TargetsList() |
(
  SpeedAndDistanceMonitoring.PreIndicationLocation.IndicationLimitAtSpeed(
    aTarget =&gt; aTarget,
    aSpeed =&gt; Kernel.MRSP.V_MRSP()
  ) == BaseTypes.Distance.Unknown
)</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Supervising EBD based target"
 Guid="58163953-79e3-4ee7-8f09-181f91ab9bfd"
>
<Expression>FORALL aTarget IN TargetsList() | (SpeedAndDistanceMonitoring.PreIndicationLocation.IndicationLimitAtSpeed(
    aTarget =&gt; aTarget,
    aSpeed =&gt; Kernel.MRSP.V_MRSP()
) 
&gt; 
TrainFrontRef( aTarget ))</Expression>
</Case></Cases>
</Function><Function
 Type="SupervisionStatusEnum"
 Default=""
 X="150"
 Y="410"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SupervisionStatusTransition"
 Guid="d1c2865a-1a96-4520-88e6-b5a012e0d30d"
>
<ReqRef
 Id="e0714dd3-9891-467d-9584-cfde98bcc4fc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28e83fea-106d-4374-85b2-01849293f06a"
>
</ReqRef><ReqRef
 Id="f26aa00e-0ded-4d0d-bed9-58813a2d45eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29b46458-0c88-4350-baab-61c2b0a1f187"
>
</ReqRef><ReqRef
 Id="987011eb-4ef7-491c-8292-26c140669ff8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8a7e9a77-505c-431b-a38a-7885b7679a1b"
>
</ReqRef><Comment>Provides the next supervision status according to the monitoring type and current supervision status</Comment>
<Cases>
<Case
 Name="CSM"
 Guid="63a29cb7-0ec3-49c9-87a6-fc9051c55cd3"
>
<Comment>Ceiling speed monitoring</Comment>
<PreConditions>
<PreCondition
 Guid="6400738d-c0d2-41f1-beb6-bc4aae759d65"
>Monitoring in MonitoringTypeSM.Ceiling</PreCondition></PreConditions>
<Expression>CeilingSpeedMonitoring.SupervisionStatus.Transition( current =&gt;  SupervisionStatus )</Expression>
</Case><Case
 Name="TSM"
 Guid="5325f12d-4b12-460b-98d5-59cbfccc2f0e"
>
<Comment>Target speed monitoring</Comment>
<PreConditions>
<PreCondition
 Guid="d0e85e2c-b6eb-4d51-ac4f-878577669a1b"
>Monitoring in MonitoringTypeSM.Target</PreCondition></PreConditions>
<Expression>TargetSpeedMonitoring.SupervisionStatus.Transition( current =&gt;  SupervisionStatus )</Expression>
</Case><Case
 Name="RSM"
 Guid="8e3a90de-3a3a-4338-92d5-75b78df744c2"
>
<Comment>Release speed monitoring</Comment>
<PreConditions>
<PreCondition
 Guid="c0425b88-4f46-4659-8bbc-5028dfcc949a"
>Monitoring in MonitoringTypeSM.Release</PreCondition></PreConditions>
<Expression>ReleaseSpeedMonitoring.SupervisionStatus.Transition( current =&gt;  SupervisionStatus )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="c5e16786-e296-4979-8d19-627a5c56a9c9"
>
<Expression>SupervisionStatus</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="260"
 Y="160"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="TargetListChanged"
 Guid="141a93c9-c31e-4073-bcb1-091217e7462e"
>
<Comment>Indicates that the target list has changed</Comment>
<Cases>
<Case
 Name="Case1"
 Guid="3916a248-8243-4c26-bc31-44174e05ced0"
>
<Comment>Always</Comment>
<Expression>TargetsList() != SupervisedTargets</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="470"
 Y="90"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="CanLeaveIntervention"
 Guid="6b701277-9c49-4cc9-add4-65f57f3360f9"
>
<Comment>Indicates that one can leave the intervention status</Comment>
<Cases>
<Case
 Name="Always"
 Guid="83c45543-9115-43e4-90bc-fc59b73cc3a6"
>
<Expression>NOT BrakeCommands.EBCommanded( reason =&gt; BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring )
OR NationalValues.ReleaseOfEBIsPermitted()</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Speed"
 Default=""
 X="1"
 Y="241"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PermittedSpeedProfile"
 Guid="fc687755-fa10-43c0-bbd2-bc13ea43f2db"
>
<Comment>The full profile of the permitted speed, accounting for MRSP, MA and distance to run in SR.</Comment>
<Parameters>
<Parameter
 Type="BaseTypes.Distance"
 Name="d"
 Guid="094d7fab-d9e4-433a-aab7-8d5af12ed905"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="6cf22ded-76e9-4257-ac9a-938b8b63edb7"
>
<Expression>MIN(
    First =&gt; MIN(
        First =&gt; MRSP.SpeedRestrictions,
        Second =&gt; MA.SpeedRestrictions
        ),
    Second =&gt; NationalValues.MaxDistInSRSpeedRestriction
)(d)</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="441"
 Y="181"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TrainFrontRef"
 Guid="d7ff63eb-5a3d-4352-93e3-9f57bfe797eb"
>
<ReqRef
 Id="690e9583-3caf-46eb-b721-bed7b3d89e9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7ca249d5-ff3f-4c9c-b7c7-5986491e6f9b"
>
</ReqRef><ReqRef
 Id="2b4c3cb7-6f06-408a-bfd7-85f5c5069e00"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="104d016a-0fd5-4de8-8e35-ea1777474a83"
>
</ReqRef><ReqRef
 Id="7525f72a-3b46-498c-8c48-1ed3ad888b1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="749c133e-5493-49af-a6c9-7c76cdfd723d"
>
</ReqRef><ReqRef
 Id="32b65a6d-139f-482e-98ed-7dd88679ba95"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="94963a34-1624-45ae-acfa-29b250646f0d"
>
</ReqRef><ReqRef
 Id="5554abd5-d957-475f-aa3a-5ae657f9ccf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d9d443b-d3e3-4b4e-9cc3-6bba130ba01f"
>
</ReqRef><ReqRef
 Id="235a2d43-f1f5-49b1-8517-1f6b17a29a4c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c5b6e2b7-4040-4033-966d-0182899ef463"
>
</ReqRef><ReqRef
 Id="fda34875-06ef-46a2-b272-8fdf00368ad5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="70e19caa-eb26-4e0e-b442-55f046a7ec5c"
>
</ReqRef><ReqRef
 Id="81b045fa-67f4-4abe-9d72-380cb0687a1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="45c98b31-07ef-44fa-a804-8ce8876b998e"
>
</ReqRef><ReqRef
 Id="366c7bc8-9a83-43fb-b4e8-f41812946c97"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="76858f21-de40-4ec3-97f2-d27327dd2bf1"
>
</ReqRef><ReqRef
 Id="ac2002ec-cc04-4e25-8344-d90765ce4d29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="857b8103-f311-40b5-ac03-89b0e025460a"
>
</ReqRef><ReqRef
 Id="d394cede-dff2-4764-b72a-288ee8d5617c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="684a3fa2-0a09-46ba-8a5b-35b0527f53ec"
>
</ReqRef><ReqRef
 Id="d916181f-d7a1-4043-9617-e814b97ae7b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbf308fa-34c6-4f4d-876a-826f4c801f6f"
>
</ReqRef><ReqRef
 Id="0342251f-d656-4d41-8ece-bde758fbfadf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cbd6d607-c8d8-42d9-9d53-43e848a50849"
>
</ReqRef><ReqRef
 Id="49cb1ac1-74b3-4afe-865d-d6b4401719da"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="02354fe3-1abb-452e-9a68-ac65f8603d0d"
>
</ReqRef><ReqRef
 Id="b3b7e30c-6bb4-4cd9-8e6d-dfb514676cbd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="99a3eed0-3678-44b8-a0b4-27e5f018a060"
>
</ReqRef><ReqRef
 Id="e354be4a-8c30-493a-8607-87b51d1ac30c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d4b37714-f959-4683-a6ff-bacc8299eedf"
>
</ReqRef><ReqRef
 Id="6d9d71c4-5508-47ef-ab3d-c32522306769"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e84c15c6-9d8d-4fe2-8280-caa484312f5d"
>
</ReqRef><ReqRef
 Id="a77d9b43-ca07-4b88-99c9-aee4aac78473"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a42ac51-b5f5-4e5d-ae04-fd8de3f28431"
>
</ReqRef><ReqRef
 Id="17f454b2-95a3-43f9-9580-b68b6c425861"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7bf17baa-68d9-4429-a06c-cbb15426d9c5"
>
</ReqRef><ReqRef
 Id="1900c77e-8d93-44ae-a0c6-75c7b767420f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="58cd7cc1-6b5d-43c2-9f80-79b41fb3573d"
>
</ReqRef><ReqRef
 Id="3b4965fd-7899-4aeb-8759-571b7de8121d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="282206cf-89cc-415e-b0d4-26ef891e8513"
>
</ReqRef><ReqRef
 Id="7ea3bac1-7296-4790-a939-f6100738c30a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6e560acb-1855-45fd-b337-54bdefd3ae64"
>
</ReqRef><ReqRef
 Id="f528e538-4118-4426-920e-582f6cf5c8ec"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="54167281-0001-4638-b103-fd4651f7620b"
>
</ReqRef><ReqRef
 Id="e54412a7-2129-4360-a62a-d2fccfd74679"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6cc312c2-8bae-42cf-8d65-fb439227eaf9"
>
</ReqRef><ReqRef
 Id="024d5773-00f6-4c63-83dd-29b47ad8e8ff"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7933c6be-de43-4cde-af7b-a82610d42850"
>
</ReqRef><ReqRef
 Id="14be9c17-d5ca-40d8-ae7f-15b68df84b13"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="622af456-6fb9-4e7b-aada-c88f5d6a1269"
>
</ReqRef><ReqRef
 Id="01550cfd-1b51-4675-b2c3-6dae7cf1ea0d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1f70a45f-3cf0-4f72-af6f-49bf374c8c37"
>
</ReqRef><ReqRef
 Id="8cbd8d63-d690-46a3-949e-0118624c0bda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81e09f47-9c11-417d-9bbc-f1b937568b7a"
>
</ReqRef><ReqRef
 Id="f1638f47-91c3-47b5-95c8-929a83f2c89a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="333c3461-3944-4d1f-a5ef-1a8d506c1cbf"
>
</ReqRef><ReqRef
 Id="6adc672f-bb83-47c8-850c-a7604401a379"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5bb1864c-d545-4ef2-9a74-1cb19c1be14a"
>
</ReqRef><ReqRef
 Id="1230c827-9c0a-4903-80b2-609619e53d02"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1cd1e435-73a2-4ce6-bafc-c4384cbdb417"
>
</ReqRef><ReqRef
 Id="184511ec-2ccf-4307-aa0d-64e5b4424e92"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="832beb96-ced2-4efd-a115-4ed765b6b1a6"
>
</ReqRef><ReqRef
 Id="c41cb7ca-ee2d-4af2-841c-855ef592089d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6d50d958-cce3-4b08-a4b6-3bbc60824519"
>
</ReqRef><ReqRef
 Id="78901f0f-a70f-415d-8d57-e5156f7206d0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7a9010f0-cd5c-41ba-a1a5-ddcaa94c42fd"
>
</ReqRef><Comment>Determines the front end to be used for braking curves calculated from the given target.</Comment>
<Parameters>
<Parameter
 Type="TargetStruct"
 Name="aTarget"
 Guid="944384a5-4b32-4e10-a2c1-1f4b05679b61"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Target is EOA"
 Guid="00f20366-0735-4c0d-8f9f-edcab8e5d746"
>
<PreConditions>
<PreCondition
 Guid="342391e5-1ef5-4d81-b8cd-fe6fa17fc9fb"
>MA.IsEOA( aTarget )</PreCondition></PreConditions>
<Expression>Kernel.TrainPosition.FrontEndPosition( DistanceIntervalEnum.Nom )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="d28fa42d-bbcf-4de6-8f51-5089e6fa457d"
>
<Expression>Kernel.TrainPosition.FrontEndPosition( DistanceIntervalEnum.Max )</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="520"
 Y="410"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SelectMonitoringType"
 Guid="3343f3ef-10d0-4a24-9849-d799ebf3c545"
>
<ReqRef
 Id="ec29a885-8a5f-4c6e-82e7-4e5b41a7dd5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9770b6b4-6db0-4f93-85c2-e61a194149cd"
>
</ReqRef><ReqRef
 Id="452e7369-8988-4a04-9d16-d7e769201a71"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="297b7ad0-755a-4117-ba8c-b8d0a2bbe8f1"
>
</ReqRef><ReqRef
 Id="8e95d803-0ad3-43b6-b488-8471ea3f792a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bdec0d17-674b-4f28-a73e-7cc2558ed8ba"
>
</ReqRef><ReqRef
 Id="7fcdea21-7a57-4a9d-8c17-8018a059e5a7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3d1f0eb4-ebc6-4c66-9476-e1511c783e3e"
>
</ReqRef><ReqRef
 Id="d70520c1-bb18-45b2-a3e6-312149387ee3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5cf2c133-3154-4407-be26-74c168416d86"
>
</ReqRef><ReqRef
 Id="aabedc00-dbbb-473a-9da1-25be4b1bd7d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0fafa9b2-b0b2-46b5-ae40-1caf18356009"
>
</ReqRef><ReqRef
 Id="446e9157-336b-4f48-a316-446351886a02"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4192f9ea-2f0d-4461-a558-79bd74b0234c"
>
</ReqRef><ReqRef
 Id="95f15c06-a37e-4368-b951-c675cf544059"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="87cef31b-97cd-485b-ad65-8cfed588e73e"
>
</ReqRef><ReqRef
 Id="774c0a7a-9451-4e93-ae7a-5a64de270168"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f8b69113-b526-4541-80cb-354f3a2375c0"
>
</ReqRef><ReqRef
 Id="733908ef-20dd-403f-b49a-d8da495aae43"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e360321d-66b4-40b8-9fb1-fb553dcd7ddd"
>
</ReqRef><ReqRef
 Id="12251a60-68aa-4b3a-a148-aaf3ecf250f4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21d028a0-2984-4516-91f9-757acfa4af7f"
>
</ReqRef><ReqRef
 Id="a85ab6e7-f105-415b-8ed9-68a01b932a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d951735-1b36-4525-b313-c7c16ecf8130"
>
</ReqRef><ReqRef
 Id="464dd6eb-f8c7-42fe-b8d9-c416ee775f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eaaf1f08-3f91-4e5a-8e4c-4cd69b5fcd4b"
>
</ReqRef><ReqRef
 Id="a918b4eb-359d-45fd-bed4-173ac8763338"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66c25458-d0fc-42dd-8c94-cd218a3cb41a"
>
</ReqRef><ReqRef
 Id="4ae5a0a3-fed2-4e03-ad35-c2ff8b81332b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd4c2dc6-d245-47bb-9d11-63c8e4ef570c"
>
</ReqRef><ReqRef
 Id="0f683037-458a-40b9-90d5-f5e9f1c3d70f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="803c1cce-164f-4f47-bbac-a6642996d7ff"
>
</ReqRef><Comment>Update the speed and distance monitoring type</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Supervise train speed"
 Guid="3e4dab33-41b6-4d3b-8f1f-6f68c2d7bd48"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Supervise train speed according to 3.13.10.6.1"
 Guid="18168449-65ad-42f6-b1ff-72c72edad3a5"
>
<Comment>Supervise train speed according to 3.13.10.6.1</Comment>
<PreConditions>
<PreCondition
 Guid="eccf6d0e-e142-4cdf-89e6-3ddd85ff4764"
>ActiveFunctions.SuperviseTrainSpeed_All_Information()
  OR  
ActiveFunctions.SuperviseTrainSpeed_MRSP_DistInSRMode()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update monitoring"
 Guid="d68dc5dd-66dd-4df0-94ac-da7e387cd2c4"
>
<ReqRef
 Id="cc36e13a-d68f-444d-9d8e-e9c7b6082a52"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="76c75cdb-5bdf-437d-8453-6f4ad2801448"
>
</ReqRef><Comment>Then select the new monitoring type.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Condition [1]"
 Guid="c65b9194-3f17-4990-9b36-9336aaf47629"
>
<ReqRef
 Id="32b65a6d-139f-482e-98ed-7dd88679ba95"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3067f7a6-63aa-4c23-933a-3b5855a626cf"
>
</ReqRef><Comment>Condition 1 (-&gt; TSM)</Comment>
<PreConditions>
<PreCondition
 Guid="87d2d66a-a04e-472d-9f02-1d0205a3b2b9"
>Monitoring in MonitoringTypeSM.Ceiling</PreCondition><PreCondition
 Guid="ba443095-1593-4bb3-9d49-8ce78fc0f8ec"
>Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8862f0c1-9f4e-44c3-b4ca-ab96aaf97303"
>UpdateMonitoring ( monitoring =&gt; MonitoringType.TSM )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Condition [2]"
 Guid="3e1a8da7-19a4-4fbe-a18d-1bfa586c0ab1"
>
<ReqRef
 Id="5554abd5-d957-475f-aa3a-5ae657f9ccf3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="24a42890-7cef-4c17-97eb-f1d6f5d626cf"
>
</ReqRef><Comment>Condition 2 (-&gt; RSM)</Comment>
<PreConditions>
<PreCondition
 Guid="267b53a6-6733-400c-ad4d-76868c0cc945"
>Monitoring in MonitoringTypeSM.Target</PreCondition><PreCondition
 Guid="c52b854e-3f6b-40ac-bcae-5531dd390008"
>Condition2()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b9792e8a-830e-47de-ab00-8522567456ac"
>UpdateMonitoring ( monitoring =&gt; MonitoringType.RSM )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Condition [3]"
 Guid="0665e2e0-c83a-4dd1-9bd5-68ee25e0fbbf"
>
<ReqRef
 Id="c0c90876-1322-4533-951c-924804b80043"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fcbf3816-b76e-4e92-a048-fcce6283e7a7"
>
</ReqRef><ReqRef
 Id="98044c78-0749-42d2-9fbc-b0e4485132a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c6fbb0b7-70d0-4d5b-a5ed-16b89f50fc2e"
>
</ReqRef><Comment>Condition 3 (-&gt; CSM)</Comment>
<PreConditions>
<PreCondition
 Guid="f00a64bd-2952-4b71-98fb-e28ff5b690b6"
>Monitoring not in [MonitoringTypeSM.Ceiling]</PreCondition><PreCondition
 Guid="80f3faaa-fcac-4770-bb87-dcf48ac1fbeb"
>TargetListChanged()</PreCondition><PreCondition
 Guid="4dbb4679-8f7b-4b4a-9461-bae8ba271ae8"
>NOT Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="234355c8-4062-4f80-a34f-92aaf3dc7758"
>UpdateMonitoring ( monitoring =&gt; MonitoringType.CSM )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Condition [4]"
 Guid="a5938268-d152-428b-bb72-a3a08534ba6c"
>
<ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c318a038-e666-4c10-9e21-cc6e6b1bfe46"
>
</ReqRef><ReqRef
 Id="98044c78-0749-42d2-9fbc-b0e4485132a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bd5afb02-ab7b-49ba-a949-9e476d42f58a"
>
</ReqRef><Comment>Condition 4</Comment>
<PreConditions>
<PreCondition
 Guid="ecb9b047-c553-42c7-9a2d-3531559a2e18"
>Monitoring not in [MonitoringTypeSM.Target]</PreCondition><PreCondition
 Guid="9576e9ad-e186-4842-a188-ead7c0aca064"
>TargetListChanged()</PreCondition><PreCondition
 Guid="9199a99a-e9c5-4edb-864e-4439d4e0fc00"
>Condition1()</PreCondition><PreCondition
 Guid="8d5347a3-788b-4ff8-90e1-d8a32908bdde"
>NOT Condition2()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1c3451e7-9dd7-49d2-bff1-4bf71006599a"
>UpdateMonitoring ( monitoring =&gt; MonitoringType.TSM )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Condition [5]"
 Guid="b0d85ea0-b6c4-49f7-a187-92f5e4c823f7"
>
<ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="35ace2f4-952f-4e99-b526-5bc5825d9570"
>
</ReqRef><ReqRef
 Id="98044c78-0749-42d2-9fbc-b0e4485132a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="677a9342-e93b-4ce3-b905-f97b85901cdd"
>
</ReqRef><Comment>Condition 5</Comment>
<PreConditions>
<PreCondition
 Guid="67180611-e6e4-40ba-a277-d7b1a6afa742"
>Monitoring not in [MonitoringTypeSM.Release]</PreCondition><PreCondition
 Guid="a8f39c46-b70d-4962-9232-53204bc4734d"
>TargetListChanged()</PreCondition><PreCondition
 Guid="38f70bef-0c35-47a1-a026-5fbbc6faa398"
>Condition2()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7a1c29e4-edfb-44af-b37b-949e74ba6062"
>UpdateMonitoring ( monitoring =&gt; MonitoringType.RSM )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Supervise Ceiling speed"
 Guid="a428d941-f739-457d-8ef6-a11d098f21f3"
>
<Comment>Supervise Ceiling speed</Comment>
<PreConditions>
<PreCondition
 Guid="7440852e-b40c-4c37-accd-dd232012cbd4"
>ActiveFunctions.SuperviseTrainSpeed_CSM()
OR 
ActiveFunctions.SuperviseTrainSpeed_MRSP()</PreCondition><PreCondition
 Guid="f16f4f95-e3c8-4a8a-8b6b-280fd559b47d"
>Monitoring not in MonitoringTypeSM.Ceiling</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ed04d738-9495-43c0-a909-6acf31b25ed0"
>Monitoring &lt;- MonitoringTypeSM.Ceiling</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="870"
 Y="290"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TriggerSBCommand"
 Guid="bdb289f3-34c3-4ea7-8801-2305124ed76a"
>
<ReqRef
 Id="0f223275-ff77-4025-a194-a347f5ef0542"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a836995f-2a48-4c31-a0d8-141d35040167"
>
</ReqRef><ReqRef
 Id="b19b213b-b887-4ef8-b210-439b95753041"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="beccff75-037b-431f-857e-14268cb1f690"
>
</ReqRef><ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21a37357-1c80-42fe-8434-4d4a98e3b283"
>
</ReqRef><Comment>Handles the service brake command by activating the service brake, if allowed, or the emergency brake.</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TriggerSBCommand"
 Guid="f59ae9b6-e396-4a40-a8ea-5bf2f8b25f23"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SBIsAvailableForUse"
 Guid="d1ec4ea1-be7f-4093-ad74-278db6897221"
>
<Comment>If the SB is available, trigger it</Comment>
<PreConditions>
<PreCondition
 Guid="edcfd47a-ea63-4f62-a207-80679aaf847f"
>BrakeCommands.SBIsAvailableForUse()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e696e822-c0ee-4d0e-b934-9457870a1b12"
>Kernel.BrakeCommands.CommandServiceBrake(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="760"
 Y="350"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 Name="RevokeEBCommand"
 Guid="4a1fb3de-7c1f-4285-9c15-c45bc8536ccf"
>
<ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a3ea3b16-c13a-40a9-bc42-ce69079ab587"
>
</ReqRef><ReqRef
 Id="987011eb-4ef7-491c-8292-26c140669ff8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8c8f463d-8f34-4f15-9ae2-f54f4a05c0f8"
>
</ReqRef><Comment>Handles the revocation of an emergency brake command</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Revoke EB command"
 Guid="f4bf398c-5f06-4c70-93cd-92d6fe4522aa"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Revoke EB command"
 Guid="d4fc3fbf-c8ad-48db-87e8-14e970778c54"
>
<Comment>Revoke the EB command</Comment>
<PreConditions>
<PreCondition
 Guid="1bdbbe3f-110e-40d0-b1fa-f58ed5a4738f"
>Kernel.NationalValues.ReleaseOfEBIsPermitted()
  OR  
Odometry.TrainIsAtStandstill()</PreCondition><PreCondition
 Guid="0ee0e105-14b6-40a4-9e47-e92e0f1b34ff"
>Kernel.BrakeCommands.EBCommanded( reason =&gt; Kernel.BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="887e30d6-0424-450f-9820-8621c7adf272"
>Kernel.BrakeCommands.ReleaseEBCommand(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="870"
 Y="350"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RevokeSBCommand"
 Guid="6a037123-bfc5-4122-9ac9-c00925275128"
>
<ReqRef
 Id="0f223275-ff77-4025-a194-a347f5ef0542"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4d17d182-2f66-480e-9253-75a9d717deb0"
>
</ReqRef><ReqRef
 Id="fb41e572-9cb9-4c36-8844-8019df4bd95e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dc8b5631-3b3a-4b5f-a539-c6f41e5a68be"
>
</ReqRef><ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4517cf0f-7747-468b-b8da-bea0259c6130"
>
</ReqRef><Comment>Handles a revocation of the service brake. If theer is no service brake applicable for use on the train, revokes the emergency brake.</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Revoke SB command"
 Guid="a6d0da46-9ebd-4a4b-a6a2-40ff906bdbb4"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Revoke SB command"
 Guid="091c4b2f-c933-4ad4-a5e9-32790977174f"
>
<Comment>If the SB is available, the revocation command is handled</Comment>
<PreConditions>
<PreCondition
 Guid="5026b8ff-4526-42af-8f90-1695fd5d93c8"
>Kernel.BrakeCommands.SBCommanded( reason =&gt; Kernel.BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8e9bb0b4-29f2-4783-8066-9b7d714df901"
>Kernel.BrakeCommands.ReleaseSBCommand(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="760"
 Y="290"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TriggerEBCommand"
 Guid="b38ceba8-4d8e-47dd-856e-bb7c4693d339"
>
<ReqRef
 Id="d5c3e2f6-7747-4faf-95c2-ec06309fe9ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="baa8fb01-fa3d-4497-a034-28faf3be58fa"
>
</ReqRef><ReqRef
 Id="987011eb-4ef7-491c-8292-26c140669ff8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="15c14db8-35c8-4ae5-8bc6-be518937ef32"
>
</ReqRef><Comment>Handles an emergency brake command</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Activate EB"
 Guid="ffdaef94-d5f3-40df-b177-aa1546de09bb"
>
<Comment>On reception, switch on the emergency brake</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Activate EB"
 Guid="2d847d6f-2ae1-4b5d-b417-728152b82296"
>
<Comment>Switch on the brake and mark it as an emergency brake command</Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="5f2ab883-f8e5-4aed-ad31-ba3342346cd7"
>Kernel.BrakeCommands.CommandEmergencyBrake(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="520"
 Y="470"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StopMonitoring"
 Guid="48b4ed23-a3f4-48eb-8f3f-452d661c18f6"
>
<ReqRef
 Id="464dd6eb-f8c7-42fe-b8d9-c416ee775f1a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="78c6771a-1677-419b-bece-86e3731c8320"
>
</ReqRef><Comment>Cuts off the speed and distance monitoring if the mode changes</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Stop monitoring"
 Guid="d7656454-9a47-4789-9492-17126a0230bc"
>
<ReqRef
 Id="371574c0-bfb9-4c7e-9180-dce7382fc418"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="831a4388-d056-412d-864e-a1765b5bb4d0"
>
</ReqRef><SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Stop monitoring"
 Guid="ed6f0713-b80f-4f62-9939-55378975c820"
>
<PreConditions>
<PreCondition
 Guid="32ca5a8e-3e3a-4109-82c7-f43c4deb007e"
>SpeedAndDistanceMonitoring.Monitoring not in SpeedAndDistanceMonitoring.MonitoringTypeSM.Idle</PreCondition><PreCondition
 Guid="3949a806-a2cc-4c53-b7d8-c00f2a2b444e"
>NOT Kernel.ActiveFunctions.SuperviseTrainSpeed()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ec31d28f-336f-4960-8170-0278d01ad436"
>PreviousMonitoring &lt;- GetMonitoringType()</Action><Action
 Guid="bb283a6b-d672-40a0-9fa5-e027239cb8ed"
>Monitoring &lt;- MonitoringTypeSM.Idle</Action><Action
 Guid="8d181cca-db2c-4e51-b2cb-1475e15795f0"
>Kernel.BrakeCommands.ReleaseEBCommand(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action><Action
 Guid="c497e39c-3b62-46b1-90f7-0a1ba70b9ad1"
>Kernel.BrakeCommands.ReleaseSBCommand(BrakeCommands.BrakeReasonEnum.SpeedAndDistanceMonitoring)</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="520"
 Y="290"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="UpdateMonitoring"
 Guid="44ff8c48-8591-4b42-bab5-ebe53142e4c2"
>
<Comment>Updates the monitoring type and perform additional actions when changing the monitoring type</Comment>
<Parameters>
<Parameter
 Type="MonitoringType"
 Name="monitoring"
 Guid="fa7bd5cf-7f3b-4388-b1f6-4872a0ac0e08"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Monitoring changed"
 Guid="869d709e-09b9-4797-96af-b50ec19b96bf"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 NeedsRequirement="FALSE"
 Name="Monitoring changed"
 Guid="9a26583a-29ab-4678-be28-3b22b9a48b25"
>
<PreConditions>
<PreCondition
 Guid="50baf8f8-e168-4589-96d2-b7b399c47706"
>PreviousMonitoring != monitoring</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 NeedsRequirement="FALSE"
 Name="Monitoring changed"
 Guid="25d477d6-c545-4fbb-be3d-ce9edfa9af3a"
>
<Comment>Update the monitoring if the calculated value is different from the stored value.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to CSM"
 Guid="b3d06ecb-6f5e-4aa5-820b-35476930e3a1"
>
<ReqRef
 Id="4ef8d95d-9b39-4a31-af31-f673833b0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="68d48741-91cc-48da-a5ca-6b4fae1cc22b"
>
</ReqRef><Comment>Switch to CSM</Comment>
<PreConditions>
<PreCondition
 Guid="40daffeb-caab-4bf4-9272-2e75fb907fdc"
>monitoring == MonitoringType.CSM</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4330ed3c-1c64-46f5-9078-0241b0984994"
>Monitoring &lt;- MonitoringTypeSM.Ceiling</Action><Action
 Guid="28508080-908e-4407-8fa9-9be8fdc47ce8"
>TIU.CutOffTraction &lt;- False</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Initial state"
 Guid="4649f3bf-4266-4ef4-ae1e-0e60328e5ff9"
>
<ReqRef
 Id="8468de24-42eb-4959-a546-99c00cccb22a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c58cf719-690b-47d9-a879-faf80914ce33"
>
</ReqRef><Comment>Speed and distance monitoring becomes active</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Speed and distance monitoring becomes active"
 Guid="597f705c-1a42-4a22-acd1-8f06d08265ad"
>
<PreConditions>
<PreCondition
 Guid="7104a696-ffdc-4902-89af-41f03690f33c"
>PreviousMonitoring == MonitoringType.None</PreCondition></PreConditions>
<Actions>
<Action
 Guid="08d6e36a-85b3-4c83-a076-68907a023f30"
>SupervisionStatus &lt;- SupervisionStatusEnum.Normal</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Switch to TSM"
 Guid="4ca44dcf-dfd1-4f84-9289-23481831c1f0"
>
<Comment>Switch to TSM</Comment>
<PreConditions>
<PreCondition
 Guid="04a7f9fd-ef55-489c-9586-95f86584cee3"
>monitoring == MonitoringType.TSM</PreCondition></PreConditions>
<Actions>
<Action
 Guid="772abe30-66ea-45dd-be39-d5c68ef76f85"
>Monitoring &lt;- MonitoringTypeSM.Target</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Initial state"
 Guid="e141da1f-ee72-4d5d-b17a-dc5acb20d8c4"
>
<ReqRef
 Id="45862693-0326-4d9c-9414-fb04b4129d68"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="724ad01c-a5c4-4be0-a5ca-ae4386bcf15e"
>
</ReqRef><Comment>Speed and distance monitoring becomes active</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Speed and distance monitoring becomes active"
 Guid="57c8ad67-5024-43ed-b06b-06ca8320345a"
>
<PreConditions>
<PreCondition
 Guid="dabe850f-c7fb-4905-b194-0737f7d4b0ae"
>PreviousMonitoring == MonitoringType.None</PreCondition></PreConditions>
<Actions>
<Action
 Guid="26ee1b88-14c4-4a03-bb7b-b35d8f98f5c0"
>SupervisionStatus &lt;- SupervisionStatusEnum.Normal</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Switch to RSM"
 Guid="0444d8f9-42c4-4375-954c-a654eb4971c9"
>
<ReqRef
 Id="4ef8d95d-9b39-4a31-af31-f673833b0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd96b98a-3185-48f1-b8d6-2399c2394b3a"
>
</ReqRef><Comment>Switch to RSM</Comment>
<PreConditions>
<PreCondition
 Guid="07549389-40ca-4065-8425-9ca86c5186ff"
>monitoring == MonitoringType.RSM</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6614b2d1-e74c-4ca2-82e1-c135ccf6559c"
>Monitoring &lt;- MonitoringTypeSM.Release</Action><Action
 Guid="69837ef0-9c41-4ec5-9669-2dbeb55f8f33"
>TIU.CutOffTraction &lt;- False</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="From TSM"
 Guid="d701797a-75e7-4cf2-a0db-445fd87f5ccd"
>
<Comment>From TSM</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="From TSM"
 Guid="104642dc-b440-4abe-9ffd-a1b1fdddce31"
>
<ReqRef
 Id="16a2ffa9-a581-4832-8287-d3a982f4ddd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0c3f491f-aefa-44e7-b23a-a83c832c11ff"
>
</ReqRef><PreConditions>
<PreCondition
 Guid="b48e0bb6-172e-41b9-a29f-6214c12f6ecd"
>PreviousMonitoring == MonitoringType.TSM</PreCondition></PreConditions>
<Actions>
<Action
 Guid="126eace6-a96f-4ee2-80ed-d87b1d4a8cf1"
>RevokeSBCommand()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="MonitoringTypeSM"
 DefaultValue="SpeedAndDistanceMonitoring.MonitoringTypeSM.Ceiling"
 VariableMode="Internal"
 X="300"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Monitoring"
 Guid="98bc4b2a-6da7-440d-9bf2-e41fe5486bce"
>
<ReqRef
 Id="52f69d6f-9efe-46a8-bf28-82cdbaf08617"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ee289381-10a6-47b9-ae57-cfc9d28d45e5"
>
</ReqRef><ReqRef
 Id="81a2ad5f-ad30-40e6-944f-ca4bd29708db"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cddd1597-977f-4d55-8b6b-d6aad57fd4c8"
>
</ReqRef><ReqRef
 Id="bc8646ad-d463-4460-8cf4-e24c114b2b7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0100bbd5-00ee-4f8d-952f-466e7741a172"
>
</ReqRef><ReqRef
 Id="aabedc00-dbbb-473a-9da1-25be4b1bd7d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="898b0164-0247-468a-8619-604cd86373a3"
>
</ReqRef><ReqRef
 Id="446e9157-336b-4f48-a316-446351886a02"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7fe38a3-1d38-4039-bdd8-fa5424dcf215"
>
</ReqRef><ReqRef
 Id="95f15c06-a37e-4368-b951-c675cf544059"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="202e2637-aadf-43ee-9159-9db806f9e37b"
>
</ReqRef><ReqRef
 Id="774c0a7a-9451-4e93-ae7a-5a64de270168"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="db4ea997-eb2b-4bef-b9b4-ae89449f469a"
>
</ReqRef><ReqRef
 Id="77289e9b-8c64-4406-8d33-fcf9d018e94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="82056cde-3793-4ff9-8b0e-a5feaf2cde53"
>
</ReqRef><ReqRef
 Id="31f0ed31-f80b-4c67-9d1b-9d6eb5b08cdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad6ce424-ec88-4fd9-9841-8bbdcd6bd975"
>
</ReqRef><ReqRef
 Id="a85ab6e7-f105-415b-8ed9-68a01b932a8a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46a9dfb1-7fbe-4fa6-af27-fa0f83fb4bc7"
>
</ReqRef><ReqRef
 Id="b29f816b-b653-4467-96c2-5640b8b6a52a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53467bd7-3c3c-4899-ac2d-8a60604cb595"
>
</ReqRef><Comment>Indicates the current monitoring of the train.</Comment>
</Variable><Variable
 Type="Boolean"
 DefaultValue="Boolean.False"
 VariableMode="Internal"
 X="720"
 Y="110"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TrainTripped"
 Guid="53d8badf-f08b-4d97-8f5e-710965ab272f"
>
<ReqRef
 Id="bc8646ad-d463-4460-8cf4-e24c114b2b7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="12b3f80c-d7cd-4617-87f5-1f7e6f8a1602"
>
</ReqRef><Comment>Indicates if the train is tripped.</Comment>
</Variable><Variable
 Type="TargetsCol"
 DefaultValue="[]"
 VariableMode="Internal"
 X="40"
 Y="160"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SupervisedTargets"
 Guid="db7f0679-9b6f-4449-8ad0-5ef9061c3b19"
>
<ReqRef
 Id="c0c90876-1322-4533-951c-924804b80043"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="982ec8fb-8850-4f99-a5e4-0c0838b70895"
>
</ReqRef><ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8f02617-69ff-4ee6-ae94-d3af6f415114"
>
</ReqRef><ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="78e50c92-ffa9-411a-a9e4-604b4a013d12"
>
</ReqRef><Comment>Keeps the list of supervised targets. Used to determine if the supervised targets have changed</Comment>
</Variable><Variable
 Type="SupervisionStatusEnum"
 VariableMode="Internal"
 X="40"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SupervisionStatus"
 Guid="51b1474c-cee5-4a8f-8865-382c37744d12"
>
<ReqRef
 Id="b8bd12fa-1398-4b7e-82b5-d9fea4894091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1620ca57-16fc-4d29-a8bb-30845b446799"
>
</ReqRef><Comment>The current supervision status</Comment>
</Variable><Variable
 Type="MonitoringType"
 DefaultValue="MonitoringType.None"
 VariableMode="Internal"
 X="410"
 Y="350"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PreviousMonitoring"
 Guid="ec3561c6-e277-435b-b1a2-f74aea557ccf"
>
<ReqRef
 Id="ec29a885-8a5f-4c6e-82e7-4e5b41a7dd5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1bab6908-87bc-423b-8579-f9ad9d8b9784"
>
</ReqRef><ReqRef
 Id="45862693-0326-4d9c-9414-fb04b4129d68"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="30a1f96e-1f68-4ae0-a34d-21df82a8118f"
>
</ReqRef><ReqRef
 Id="8468de24-42eb-4959-a546-99c00cccb22a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e22ab6ce-1de9-41b8-b599-03c8d2eb55ea"
>
</ReqRef><Comment>The previous monitoring type</Comment>
</Variable></Variables>
<Rules>
<Rule
 Priority="CleanUp"
 X="520"
 Y="530"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Keep track of monitoring type"
 Guid="5a913d9a-aa83-4a3a-8d86-5b3d89b58012"
>
<ReqRef
 Id="4ef8d95d-9b39-4a31-af31-f673833b0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a10ca413-bb13-496e-b1ce-de2391e551e3"
>
</ReqRef><ReqRef
 Id="16a2ffa9-a581-4832-8287-d3a982f4ddd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55733316-9bda-4235-83c7-ac935d45d575"
>
</ReqRef><Comment>Keep track of monitoring type to detect changes</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Keep track of monitoring type"
 Guid="b8d69c5e-38a9-4eb4-9a4e-f6a484c23aec"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="30d9743f-bd3d-444b-a89d-c1368291ca8a"
>PreviousMonitoring &lt;- GetMonitoringType()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="CleanUp"
 X="260"
 Y="220"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Keep track of the supervised targets"
 Guid="253737bd-84b5-4db4-998f-42909322ddca"
>
<ReqRef
 Id="c0c90876-1322-4533-951c-924804b80043"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7bf00831-6045-4bbd-a905-e10af99d49e4"
>
</ReqRef><ReqRef
 Id="f966f396-c00e-4f6b-945d-6cde4527e814"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="73c74fb0-44fb-43ec-9ee9-f83c431e9cf0"
>
</ReqRef><ReqRef
 Id="620d2411-2c42-403d-9139-cdb6a68c48b2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1c9a25dd-bb74-4a7e-88c7-1f6f2662171c"
>
</ReqRef><Comment>Keep track of supervised target to detect changes</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Keep track of the supervised targets"
 Guid="3149879b-d2c1-4c52-a2e0-df00b59d8a8e"
>
<PreConditions>
<PreCondition
 Guid="a006b102-a3dd-4342-999c-081ab8118b58"
>TargetListChanged()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="cc49b684-a7b5-4da7-b724-d82be59713d4"
>SupervisedTargets &lt;-  TargetsList()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
