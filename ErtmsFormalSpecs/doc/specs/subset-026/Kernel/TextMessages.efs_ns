<NameSpace
 X="780"
 Y="10"
 Width="100"
 Height="50"
 Name="TextMessages"
 Guid="cf46c493-f8c9-4348-8fda-687587ddee94"
>
<NameSpaces>
</NameSpaces>
<Enumerations>
<Enum
 Default="DriverConfirmationEnum.NoConfirmationRequired"
 X="140"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="DriverConfirmationEnum"
 Guid="98db2ffe-5a62-4bc5-b9b8-abfe303d1326"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7e322da0-d257-45df-9396-162256b802e2"
>
</ReqRef><Comment>Indicates whether the driver confirmation is required and if so, indicates whether the brakes should be applied when the display end condition is fulfilled.</Comment>
<Values>
<EnumValue
 Value=""
 Name="NoConfirmationRequired"
 Guid="d68fe16d-dcf6-4e1b-a017-f9cafdefb0bd"
>
</EnumValue><EnumValue
 Value=""
 Name="ConfirmationRequired"
 Guid="321fc3c7-35f8-4b78-8a81-e934bc63f2eb"
>
</EnumValue><EnumValue
 Value=""
 Name="ConfirmationRequiredApplySB"
 Guid="1258cced-aaac-4aa4-8d4b-408b3ba816f0"
>
</EnumValue><EnumValue
 Value=""
 Name="ConfirmationRequiredApplyEB"
 Guid="1f60ea53-e280-4ed9-be25-dd61f1c9b4ef"
>
</EnumValue></Values>
</Enum><Enum
 Default="FixedTextEnum.Acknowledgement"
 X="490"
 Y="270"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextEnum"
 Guid="6e2ec0cc-e152-4fb0-bb43-58815260a365"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="149629ab-1149-4a66-a280-8902284a023d"
>
</ReqRef><Comment>Enum representing the predefined fixed text messages.</Comment>
<Values>
<EnumValue
 Value=""
 Name="LevelCrossingNotProtected"
 Guid="c574a799-1012-47a9-bd78-a8c157adab64"
>
</EnumValue><EnumValue
 Value=""
 Name="Acknowledgement"
 Guid="24e15931-f1d7-4bec-b183-a0f962602d6b"
>
</EnumValue></Values>
</Enum></Enumerations>
<Structures>
<Structure
 IsAbstract="TRUE"
 Default=""
 X="240"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TextMessageInterface"
 Guid="ff939e5f-0291-449f-963f-f15b1404a06b"
>
<ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a74674f-5874-461c-82b8-2a7928263e41"
>
</ReqRef><Comment>Provides the information relative to the handling of text messages (driver acknowledgement, start and stop conditions, type of the message).</Comment>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="IsImportant"
 Guid="cc144879-6b12-4a83-9ded-c52f05474091"
>
<ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c9eedac6-1e11-46e9-a379-88708d2a6a71"
>
</ReqRef><Comment>Indicates if that text message is auxiliary or important.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="FulfillAllTheEvents"
 Guid="c0bb55cc-26d4-4f06-bc29-ae2590224f8f"
>
<ReqRef
 Id="33f647b5-04f7-48f6-be20-58f48c691ae8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="febd590f-0d46-4a66-9ae0-416a73f969d7"
>
</ReqRef><Comment>Indicates if all the text message events have to be fulfilled in order to display the message, or only one of conditions is enough.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="acdf58b6-a181-44d8-83dd-fa7716ebe818"
>
<ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="376717de-5758-41a2-9251-8cdc3f84b0c0"
>
</ReqRef><ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="02b9e358-11e6-4f08-80fd-63347e2e4e50"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="135092bf-d6cb-410e-b826-b54e8011c772"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="321a30c3-6e21-4e3b-8c6b-cd98dfd20f8a"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="971c95ab-039d-494c-ae32-af1559dc4cc3"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81a3cf51-4e89-482d-8587-30bb8ee5fe55"
>
</ReqRef><ReqRef
 Id="d4e8e1bf-429b-4848-a14e-b3872a4b2100"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7751a024-f94a-4656-9b1a-ac6522f1364a"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f6f07d2b-95fe-4aed-9ddb-823dccdbdc77"
>
</ReqRef><Comment>Distance from which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartModeCondition"
 Guid="78f8caa9-c986-4226-82b9-0d6b2f230584"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28a69ee5-7647-4299-8656-13b8c3e31227"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="26142442-a506-4419-9b25-93d440a45c84"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd020764-7c9b-4bd5-b870-7c4306c0d360"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="380bfd22-a01f-4e42-b54e-1adf6224f02e"
>
</ReqRef><ReqRef
 Id="d4e8e1bf-429b-4848-a14e-b3872a4b2100"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9d40ada2-61d8-45c8-9064-1ad9a93873b7"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndModeCondition"
 Guid="eceba384-97ef-4236-ae78-18ab8ea08c66"
>
<ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cf6c79df-9d51-4c47-a7a4-862af95623d7"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7bd8f244-3cf5-456b-874e-35ab3616678e"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3eb95d4e-a20a-4e89-96a8-e9d5e2ab57a9"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="49e470ce-42dd-40be-ad57-7d9b94852d8c"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1409ae29-a519-49ca-bdf0-0e18793f61ea"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartLevelCondition"
 Guid="255c870a-a536-4f63-9837-aef343503cca"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f2637560-11e4-46b9-8b9f-ae14c1d6a092"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1531ae15-096b-4d16-ab55-93a22cd76bc6"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d68ed81-e92f-4add-9ac4-73c346095ebe"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4aeb9b36-029e-40c3-9f15-3d5b4263f6ac"
>
</ReqRef><ReqRef
 Id="d4e8e1bf-429b-4848-a14e-b3872a4b2100"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d80735f-bed8-4f56-a62c-8583153a2033"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndLevelCondition"
 Guid="5271c320-c8a0-418b-b501-5454d9278a22"
>
<ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da07407e-77f8-4c2d-b835-d93308dd2fe1"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="357d4b4d-2b58-4c62-9529-e3dc79c69858"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="240f6052-62f0-4300-b64e-75c75a2dfde6"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bd521b3b-d6d7-4f0f-af7d-d9e389fbe770"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e3967c7d-d0de-4dd2-af2e-77187eb06bbe"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Length"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Length"
 Guid="263f1efb-4ded-4f85-b994-9c8ee7c913e8"
>
<ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3264bb17-f5e2-416c-bc25-993730c2f1d5"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21826ae1-2dbc-4f1f-9fd1-a488f952d949"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4dc27710-f597-4af0-b392-0dd33b7dee09"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="655de5d1-ddf4-494f-b6d4-27caa418086a"
>
</ReqRef><Comment>The distance during which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Time"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DisplayDuration"
 Guid="da0c2198-6200-4de7-a6db-8860f41620cc"
>
<ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="99137563-c03d-465d-b724-32f526d88206"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="78019755-6f6e-44f3-9079-10013e4c31b9"
>
</ReqRef><ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="77ac5510-c9d4-4436-bab6-b19f71e7c4c9"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0e451f45-85f4-4c9f-8153-9b02633beb4f"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a80003d0-a525-457f-b1d3-76581b9434ed"
>
</ReqRef><Comment>Duration of the display of the text message.</Comment>
</StructureElement><StructureElement
 TypeName="DriverConfirmationEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DriverConfirmation"
 Guid="45f16eb9-59da-4b82-bed8-45d859a132b1"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e3776ac3-3763-4840-a82b-6f372cf252a5"
>
</ReqRef><ReqRef
 Id="8266cb3f-9bd1-45eb-852a-87d2a9fcdc5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="42570fec-6388-476c-a4fc-824ae0efc259"
>
</ReqRef><Comment>Indicates whether the driver confirmation is required and if so, indicates whether the brakes should be applied when the display end condition is fulfilled.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="AckStopsDisplay"
 Guid="7e7a00a4-22cc-49e3-9a47-3705abcaa572"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e4262126-899e-4d0e-a9a7-5adb5f87ac0a"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0b3ef57-b4c1-4df1-8403-cae9cab928cc"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="93ebd00d-279e-42b0-941d-0f4cae25ec09"
>
</ReqRef><Comment>Indicates whether the driver confirmation ends the text display regardless the end conditions or the driver confirmation is an additional condition to end the display.</Comment>
</StructureElement><StructureElement
 TypeName="TextReportStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="ReportInformation"
 Guid="586038d1-dbc9-4c3f-95aa-a2dee2f1168d"
>
<ReqRef
 Id="a7c6602b-38f1-429b-97bb-2904a3894137"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4dd5922e-84be-4f6f-b6c5-bdf0393d30eb"
>
</ReqRef><Comment>Information about the report of text message confirmation by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="DMI.DisplayedTimerStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DisplayStartTime"
 Guid="30c3636c-7214-47d3-847c-2f991b9d4d55"
>
<Comment>Indicates when the display of the text message started.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="IsAcknowledged"
 Guid="56d34027-04ca-4242-a3a8-487fd3b2306d"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8c9d599a-f1c6-4c3f-b46c-416ca8fc2bd5"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d90671e1-72f2-4207-b3a3-37cbb5c9fa48"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="52f701a8-b72b-42fc-93dd-e5b8a16e3512"
>
</ReqRef><Comment>Indicates whether this text message has been acknowledged by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="BrakesAreApplied"
 Guid="07640b63-f79a-4e9a-b391-a9f8aa89978e"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0a6ecf1d-b43d-4ff6-9e0a-062c1b552170"
>
</ReqRef><Comment>Indicates whether the brakes were applied due to reached end condition an no response from the driver.</Comment>
</StructureElement></Structure><Structure
 Default=""
 X="10"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ModeConditionStruct"
 Guid="117e0803-d43a-41e6-9980-d89b6aec6c7c"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ac069561-167b-4f86-82cd-0005d7c6f60e"
>
</ReqRef><ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1cd68f76-1a3b-4704-b46f-8bb17d635a4b"
>
</ReqRef><ReqRef
 Id="f51cc60c-f63b-4ea5-a5d2-c790f7505a3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="96c31eb2-00d2-4329-8981-9567ddeb27af"
>
</ReqRef><ReqRef
 Id="fee9481d-e100-4f62-86a8-be2ffe73fb8d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="84284f8a-9bc2-4824-9732-75cf9d2b6063"
>
</ReqRef><Comment>Provides the information related to mode condition for display of text messages.</Comment>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="IsLimitedByMode"
 Guid="548a1397-b8b3-4c7d-9645-8c7324ab3fe9"
>
<Comment>Indicates if the start of the end of display of a text message is limited by a mode condition.</Comment>
</StructureElement><StructureElement
 TypeName="ModeEnum.ModeForTextDisplay"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Mode"
 Guid="aff68a73-fcc1-4100-a450-d4116d6db129"
>
<Comment>Gives the mode that limits the start or stop of display of a text message.</Comment>
</StructureElement></Structure><Structure
 Default=""
 X="480"
 Y="100"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="LevelConditionStruct"
 Guid="41f37040-d318-433b-a7ae-479b865cee5a"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7ce2f1de-7a27-44ad-857c-ef6d8ec82231"
>
</ReqRef><ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3056f476-8bba-4a14-8d60-5f560ba85754"
>
</ReqRef><ReqRef
 Id="a61f6341-e2cc-4123-94da-07f6ec9bbd4e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3d80ec56-5e5b-4f89-a308-a63d599636a2"
>
</ReqRef><ReqRef
 Id="68300a10-bd33-42b9-b12f-283c8a668cfd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1fcce6a5-dab7-443c-b083-d67b98c71119"
>
</ReqRef><Comment>Provides the information related to level condition for display of text messages.</Comment>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="IsLimitedByLevel"
 Guid="6a7e53b4-9436-48ba-9695-ddebb6684b62"
>
<Comment>Indicates if the start of the end of display of a text message is limited by a level condition.</Comment>
</StructureElement><StructureElement
 TypeName="LevelDataStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Level"
 Guid="dc30335e-d31c-4605-a584-a476a78d1705"
>
<Comment>Gives the level that limits the start or stop of display of a text message.</Comment>
</StructureElement></Structure><Structure
 Default=""
 X="340"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TextReportStruct"
 Guid="aeaeea86-e466-4e00-9c23-84187c369257"
>
<ReqRef
 Id="dc47fc83-606e-4d26-b033-7404ed27ecdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2dc38759-6975-4b06-b4fa-1008ea2e4284"
>
</ReqRef><ReqRef
 Id="a7c6602b-38f1-429b-97bb-2904a3894137"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6be5e9a2-1974-4611-964b-afbc5c0d10c6"
>
</ReqRef><ReqRef
 Id="db334cc6-2a0a-4697-99ec-fcdc4c2baf11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0db4834f-2089-42e0-9acc-c18f700cfcba"
>
</ReqRef><ReqRef
 Id="18609807-23a7-4d4c-8aa2-2b02c61cfb1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53d8eabd-7526-420f-abbd-01d1dd031b23"
>
</ReqRef><Comment>Contains the information relative the the report of text messages confirmation by driver.</Comment>
<StructureElement
 TypeName="Messages.NID_TEXTMESSAGE"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="TextId"
 Guid="de9f6348-fbe1-4d13-8ed6-d51589fbb3cf"
>
<ReqRef
 Id="db334cc6-2a0a-4697-99ec-fcdc4c2baf11"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="740bbeb1-0884-4789-93de-b57680bc7567"
>
</ReqRef><Comment>Id of the message.</Comment>
</StructureElement><StructureElement
 TypeName="Messages.NID_C"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="NID_C"
 Guid="4d27d6ba-c423-4615-a93b-2768f71196d2"
>
<ReqRef
 Id="18609807-23a7-4d4c-8aa2-2b02c61cfb1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d96ed65d-98e1-4215-a26a-ad00b86c8f0f"
>
</ReqRef><Comment>Id of the country.</Comment>
</StructureElement><StructureElement
 TypeName="Messages.NID_RBC"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="NID_RBC"
 Guid="fc9651b5-aa10-43c9-8d3d-c2d7bcf3cd76"
>
<ReqRef
 Id="18609807-23a7-4d4c-8aa2-2b02c61cfb1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d19af2d9-e76b-4df2-b9a8-161d6a9f5243"
>
</ReqRef><Comment>Id of the RBC.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="ReportRequired"
 Guid="fdf882b7-4bac-4847-9186-905a24b2ff7c"
>
<ReqRef
 Id="dc47fc83-606e-4d26-b033-7404ed27ecdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66b19a9c-e598-44b2-9a6f-7ca3bd05bd16"
>
</ReqRef><Comment>Indicates whether the report of text message confirmation by driver to the RBC is required.</Comment>
</StructureElement></Structure><Structure
 Default=""
 X="340"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessageStruct"
 Guid="9031351b-4025-4c6e-838f-20dda051c8c0"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="70ad4bd6-612e-474e-b40c-f39ff5e93b6a"
>
</ReqRef><Comment>Represents a fixed text message.</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle end condition satisfied"
 Guid="a2da2ce5-989c-4d25-8278-e4fd7c06d3e1"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b5e1b510-b1ed-4075-9d7a-25b1c1567acc"
>
</ReqRef><ReqRef
 Id="6eb3d5ed-1de5-46fa-b514-2cbf2991759c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3806d7ee-dbea-4a17-9af8-b22e091855b4"
>
</ReqRef><Comment>If the end condition of a text message is satisfied and the message is still not removed by the rule Handle messages to display, that means that the driver didn&apos;t acknowledge this message yet. In that case, depending on the reaction asked by the trackside, the emergency brake or the service brake can be activated.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle end condition satisfied"
 Guid="16f0a79c-5c19-42a5-8a47-89e8517c2f05"
>
<PreConditions>
<PreCondition
 Guid="275a86b3-0160-4f54-bc1e-95ab317bb50a"
>EndConditionSatisfied( aMessage =&gt; THIS )</PreCondition><PreCondition
 Guid="27e0b75e-adde-4bca-bda7-2f5f0e0904f6"
>DriverConfirmation in [DriverConfirmationEnum.ConfirmationRequiredApplyEB, DriverConfirmationEnum.ConfirmationRequiredApplySB]</PreCondition><PreCondition
 Guid="f5e88555-29c8-4016-8b6f-976e540a7b81"
>NOT IsAcknowledged</PreCondition><PreCondition
 Guid="ecbe1842-4aa7-4e0e-b947-b78edd05ba17"
>NOT BrakesAreApplied</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ca016be1-e437-4837-8b24-e69b8968017b"
>BrakesAreApplied &lt;- True</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Apply brakes"
 Guid="021b189e-31ce-420d-9ce0-67a7c6f54dbe"
>
<Comment>If the trackside requested to apply the emergency brake or the service brake, the on-board applies the corresponding brake.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Apply EB"
 Guid="5d855043-4038-41fb-b7d5-307a06feb227"
>
<Comment>Apply the emergency brake if requested by trackside.</Comment>
<PreConditions>
<PreCondition
 Guid="cbe9d22b-c461-47b1-8428-63bbb76c8147"
>DriverConfirmation == DriverConfirmationEnum.ConfirmationRequiredApplyEB</PreCondition></PreConditions>
<Actions>
<Action
 Guid="33c4edbf-cf0c-4203-8586-3bf8b27128b2"
>Kernel.BrakeCommands.CommandEmergencyBrake( Reason =&gt; Kernel.BrakeCommands.BrakeReasonEnum.TextMessageAckTimeOut )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Apply SB"
 Guid="d727e115-2602-4ae2-9d5c-612b5db2ace0"
>
<Comment>Apply the service brake if requested by trackside.</Comment>
<PreConditions>
<PreCondition
 Guid="38b09d17-9790-44e8-a66e-38b21ab73a86"
>DriverConfirmation == DriverConfirmationEnum.ConfirmationRequiredApplySB</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ef71552f-1732-4a51-ab3d-e3a90fa6847b"
>Kernel.BrakeCommands.CommandServiceBrake( Reason =&gt; Kernel.BrakeCommands.BrakeReasonEnum.TextMessageAckTimeOut )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="IsImportant"
 Guid="cba9aee6-99a3-437b-8249-30a75b05ae3d"
>
<ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bca9a9a0-0d4b-44a5-a1c3-7e70c7532233"
>
</ReqRef><Comment>Indicates if that text message is auxiliary or important.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="FulfillAllTheEvents"
 Guid="5f26b77c-e644-4f48-99f7-27e6d9d9e1e5"
>
<ReqRef
 Id="33f647b5-04f7-48f6-be20-58f48c691ae8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="adeb34fb-923e-4c94-af7d-a28ece2f617d"
>
</ReqRef><Comment>Indicates if all the text message events have to be fulfilled in order to display the message, or only one of conditions is enough.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="de2419e8-2e28-4f64-ae13-205afac389eb"
>
<ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5723a65f-59ff-4d26-bb72-613bf1bcc8c0"
>
</ReqRef><ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="24cce02c-f0f5-40d5-8878-830a6fc55607"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b90b1fd9-18bf-486a-8263-05edc3aec0ca"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="feff26c1-0c3b-4e53-882b-515772855781"
>
</ReqRef><Comment>Distance from which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartModeCondition"
 Guid="ec41063f-d87c-4a33-aa7f-6176f9431658"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19e4c374-b23d-45bb-b271-8e3e7a62a3a3"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81a5cfba-2ca6-4221-9ef4-e73e0c1f08e9"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndModeCondition"
 Guid="5992a289-a432-473b-b0b0-e399b9ea2a53"
>
<ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="420f182b-0606-4ec6-b932-5647092d08b2"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c33bf3a7-2b65-4ba7-a91e-9a5c8d3d6168"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartLevelCondition"
 Guid="b89b79cc-6b06-4118-b1bf-39eb62eb9fec"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="976511d4-40bf-4a3c-b982-8ca53491c435"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="181ba531-d563-464c-acd8-6bac76cb1a88"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndLevelCondition"
 Guid="c4092951-5bf0-40dd-9caa-725e8ff211b2"
>
<ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6e49b7e6-5ae5-49f6-a89c-a7310969b551"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="098d9830-740b-411d-be3a-2d94d24e816d"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Length"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Length"
 Guid="752c4871-6d3a-461f-a01e-72119833b25e"
>
<ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0c2fe94-d842-4d78-90a5-0d29dd903751"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="94029252-4401-4740-b755-d9979dc03e87"
>
</ReqRef><Comment>The distance during which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Time"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DisplayDuration"
 Guid="b6724afc-ac5a-48a3-a075-d91715e1bad9"
>
<ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55455532-faf2-436e-9737-bbb1f14633e5"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="028b2507-d253-4062-a937-027f35943d92"
>
</ReqRef><Comment>Duration of the display of the text message.</Comment>
</StructureElement><StructureElement
 TypeName="DriverConfirmationEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DriverConfirmation"
 Guid="029f20e3-e676-4b4e-8700-fcba2ae9d56e"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e2837fad-4756-4c72-a85b-64b6dc3192e9"
>
</ReqRef><ReqRef
 Id="8266cb3f-9bd1-45eb-852a-87d2a9fcdc5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c4a356bc-d3b6-4728-ae52-78183ab015d1"
>
</ReqRef><Comment>Indicates whether the driver confirmation is required and if so, indicates whether the brakes should be applied when the display end condition is fulfilled.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="AckStopsDisplay"
 Guid="6b43de56-1f3a-4fb1-973a-e8e51cca0a94"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4af1705e-986f-477e-85ca-683e5480fc09"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c5f56b08-70e9-474e-9b79-9133aa4afe08"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aab51f1b-8070-4268-8a1e-7a3cc697e289"
>
</ReqRef><Comment>Indicates whether the driver confirmation ends the text display regardless the end conditions or the driver confirmation is an additional condition to end the display.</Comment>
</StructureElement><StructureElement
 TypeName="TextReportStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="ReportInformation"
 Guid="901ec654-51e1-4ec4-ad28-0ea8a804886c"
>
<ReqRef
 Id="dc47fc83-606e-4d26-b033-7404ed27ecdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cb366e74-5550-4f7a-b2bd-8651a61daf2c"
>
</ReqRef><Comment>Information about the report of text message confirmation by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="FixedTextEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="FixedText"
 Guid="0af074a3-94a6-4684-94d4-f5bc07f2cd0d"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c475c32-2cc3-47aa-a914-6bd1c81d7cb8"
>
</ReqRef><Comment>The number of the fixed text message.</Comment>
</StructureElement><StructureElement
 TypeName="DMI.DisplayedTimerStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DisplayStartTime"
 Guid="41cc8dc2-4c1b-45b8-976f-0468975b3f3d"
>
<Comment>Indicates when the display of the text message started.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="IsAcknowledged"
 Guid="7a354da1-f82f-43e6-ab8e-8afab0ae8381"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da5fdc53-fd67-4697-9891-98b2b9bb67df"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2cde5d9f-a0a5-48dc-b298-8b7ba3515f0d"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7414815b-b6af-429b-8307-9575504737e3"
>
</ReqRef><Comment>Indicates whether this text message has been acknowledged by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="BrakesAreApplied"
 Guid="9b5e15a2-e64b-4d69-b9b6-6f50140c0da6"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="679605e1-2914-483d-9c7e-1e9d6f66e16f"
>
</ReqRef><Comment>Indicates whether the brakes were applied due to reached end condition an no response from the driver.</Comment>
</StructureElement><Interfaces>
<StructureRef
 Name="TextMessageInterface"
 Guid="7b370c69-74a6-4c64-b669-09df4b02536a"
>
</StructureRef></Interfaces>
</Structure><Structure
 Default=""
 X="140"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessageStruct"
 Guid="14eab9cb-4f77-4b51-bb51-e099c240eb45"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a0ca70d-d639-4e11-8dd0-071d5b375bf0"
>
</ReqRef><Comment>Represents a plain text message.</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle end condition satisfied"
 Guid="5d5e78c3-aefe-4b9c-8ddf-54b93d91477c"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc4b3f66-44f7-4661-adf3-da7365d4dbf1"
>
</ReqRef><ReqRef
 Id="6eb3d5ed-1de5-46fa-b514-2cbf2991759c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d276c974-f4e9-429a-9ed1-15d6371ba90b"
>
</ReqRef><Comment>If the end condition of a text message is satisfied and the message is still not removed by the rule Handle messages to display, that means that the driver didn&apos;t acknowledge this message yet. In that case, depending on the reaction asked by the trackside, the emergency brake or the service brake can be activated.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle end condition satisfied"
 Guid="4dda354a-98bd-4883-a278-2e6fb604b637"
>
<PreConditions>
<PreCondition
 Guid="1a4fae6b-b008-4915-b3a8-8e4d86ea756d"
>EndConditionSatisfied( aMessage =&gt; THIS )</PreCondition><PreCondition
 Guid="5eb4e27c-7252-4ff1-853e-d5dfacd39ada"
>DriverConfirmation in [DriverConfirmationEnum.ConfirmationRequiredApplyEB, DriverConfirmationEnum.ConfirmationRequiredApplySB]</PreCondition><PreCondition
 Guid="763a8109-98c2-4119-b2f0-3aae240bee2d"
>NOT IsAcknowledged</PreCondition><PreCondition
 Guid="d7363a6d-d37f-4677-bacd-2a95c7047eac"
>NOT BrakesAreApplied</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4a6e9355-780a-4dc6-875e-95e1beb1b81a"
>BrakesAreApplied &lt;- True</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Apply brakes"
 Guid="70386136-cbb6-4c5f-ac23-4063f6132b95"
>
<Comment>If the trackside requested to apply the emergency brake or the service brake, the on-board applies the corresponding brake.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Apply EB"
 Guid="d60ce59a-107f-48ef-aa83-dd767a10bd21"
>
<Comment>Apply the emergency brake if requested by trackside.</Comment>
<PreConditions>
<PreCondition
 Guid="e9c20d92-d240-4853-8482-b422b778f67d"
>DriverConfirmation == DriverConfirmationEnum.ConfirmationRequiredApplyEB</PreCondition></PreConditions>
<Actions>
<Action
 Guid="833d1d48-df2d-469f-9918-fdbc07311fc7"
>BrakeCommands.CommandEmergencyBrake( Reason =&gt; BrakeCommands.BrakeReasonEnum.TextMessageAckTimeOut )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Apply SB"
 Guid="d5fcbb26-56b1-40f3-8419-e8d9af59f306"
>
<Comment>Apply the service brake if requested by trackside.</Comment>
<PreConditions>
<PreCondition
 Guid="be59e1e2-41fd-4dec-af4c-8b976f056f79"
>DriverConfirmation == DriverConfirmationEnum.ConfirmationRequiredApplySB</PreCondition></PreConditions>
<Actions>
<Action
 Guid="73d1dfe5-3209-40ab-9a78-c87d63482e24"
>BrakeCommands.CommandServiceBrake( Reason =&gt; BrakeCommands.BrakeReasonEnum.TextMessageAckTimeOut )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
<StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="IsImportant"
 Guid="ff668dd5-31a6-4f9c-9c49-79dc5e67c05c"
>
<ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f6decac-a301-4fca-b2b4-b3a98daf4ed5"
>
</ReqRef><Comment>Indicates if that text message is auxiliary or important.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="FulfillAllTheEvents"
 Guid="f6a74198-8568-4a8b-99f9-1085cf3f4694"
>
<ReqRef
 Id="33f647b5-04f7-48f6-be20-58f48c691ae8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="808bb814-969e-4199-ad9a-0a08eba34564"
>
</ReqRef><Comment>Indicates if all the text message events have to be fulfilled in order to display the message, or only one of conditions is enough.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Distance"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Location"
 Guid="2cafe4a7-12c8-4985-8ad9-2d9d24a3fee3"
>
<ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0e041577-d9ad-47f5-8405-448edac297ef"
>
</ReqRef><ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eab37ef9-5406-4fac-bdfb-5d0b30f90206"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6d9cdd78-d19a-4de8-83e0-f81f515db152"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="76157434-af11-418f-b23c-ac97ca6632a6"
>
</ReqRef><Comment>Distance from which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartModeCondition"
 Guid="4edcb290-c6c7-4f53-92ec-dd91bf07ca71"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2e8434f-5117-458d-85ae-5a778d689628"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75e0a04b-a86c-4a26-baaa-a11a94100dba"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="ModeConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndModeCondition"
 Guid="75eea6ed-5b7a-4c38-b3ae-a02311ee8b9a"
>
<ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19d3e29d-3432-4fcf-84d0-cecfda3d52ec"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1b6c97c6-f274-41d4-88ac-73374480a658"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the mode.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="StartLevelCondition"
 Guid="6b1df1ef-c9ff-4519-af67-c2fa8612c961"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b11d8aec-9324-46ec-8b44-63434b59f881"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a73fbf47-7479-4430-b3e1-5276fe107849"
>
</ReqRef><Comment>Indicates if the start of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="LevelConditionStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="EndLevelCondition"
 Guid="453da3ec-78c4-4393-887c-477e7a63cc12"
>
<ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c20dc8ae-dd8b-4e69-930b-c45641089e28"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d1f65298-9707-43fe-983c-0139eb1cb045"
>
</ReqRef><Comment>Indicates if the end of the display of the text message is limited by a condition on the level.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Length"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Length"
 Guid="4317a301-3cb4-4e8a-88ff-36a8ab243bca"
>
<ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="17a579ac-2203-4e6c-a0b1-811a8e3bd28d"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="03fbc1dc-975b-4041-adf2-8b0cddf793be"
>
</ReqRef><Comment>The distance during which the text message shall be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="BaseTypes.Time"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DisplayDuration"
 Guid="110747c6-f685-47a2-9917-69e34cf51221"
>
<ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b4146f7-7d50-4842-9c5d-6437f52a7531"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="352a4646-836a-408b-b475-9714428b2887"
>
</ReqRef><Comment>Duration of the display of the text message.</Comment>
</StructureElement><StructureElement
 TypeName="DriverConfirmationEnum"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="DriverConfirmation"
 Guid="d000430d-65a3-40fc-a1e5-5ae6ea5f1f5a"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3366c9b6-e326-495a-b477-7b39f52d71cf"
>
</ReqRef><ReqRef
 Id="8266cb3f-9bd1-45eb-852a-87d2a9fcdc5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="661b99ae-f335-4ecd-afd7-308dbe940cff"
>
</ReqRef><Comment>Indicates whether the driver confirmation is required and if so, indicates whether the brakes should be applied when the display end condition is fulfilled.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="AckStopsDisplay"
 Guid="67a0c90f-a76a-4922-a815-607966aac8c4"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ec04e35-a3d1-400f-965c-ea6e6c87a7ba"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aa1880d7-f572-4d5c-9c39-611ff3666973"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b9a4faa-7039-4a21-9740-311d5931a069"
>
</ReqRef><Comment>Indicates whether the driver confirmation ends the text display regardless the end conditions or the driver confirmation is an additional condition to end the display.</Comment>
</StructureElement><StructureElement
 TypeName="TextReportStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="ReportInformation"
 Guid="2fee1ab9-0b5c-4918-9082-f8893b2aeaff"
>
<ReqRef
 Id="dc47fc83-606e-4d26-b033-7404ed27ecdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad897cad-c635-42df-95a6-1369207ebe11"
>
</ReqRef><Comment>Information about the report of text message confirmation by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="String"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 Name="Text"
 Guid="e916991f-4f9c-4dfe-b7ca-15150c18a476"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3e7a27a2-9d13-4cf5-b38b-443056d6038e"
>
</ReqRef><Comment>The plain text to be displayed.</Comment>
</StructureElement><StructureElement
 TypeName="DMI.DisplayedTimerStruct"
 Default=""
 Mode="Internal"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="DisplayStartTime"
 Guid="97122547-f703-4a22-ae90-ef22ac091ae4"
>
<Comment>Indicates when the display of the text message started.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="IsAcknowledged"
 Guid="b3863a31-fc51-441d-868c-60d261c8707d"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8dacac7f-777b-4451-92d1-76458da2b85d"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19f07750-b858-4046-8431-34443123eaf0"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5f922c86-190e-4277-a6a8-290ffbba594e"
>
</ReqRef><Comment>Indicates whether this text message has been acknowledged by the driver.</Comment>
</StructureElement><StructureElement
 TypeName="Boolean"
 Default="False"
 Mode="Internal"
 Implemented="TRUE"
 Name="BrakesAreApplied"
 Guid="9e75c2cb-f6cb-4e23-ba46-795f4ee72add"
>
<ReqRef
 Id="4a6d78d2-2283-4d49-8223-9600a9af81a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="52bab2e7-4b30-46ca-a1d1-36b8eae09e03"
>
</ReqRef><Comment>Indicates whether the brakes were applied due to reached end condition an no response from the driver.</Comment>
</StructureElement><Interfaces>
<StructureRef
 Name="TextMessageInterface"
 Guid="a2af1f24-ed9c-4702-bad9-44a4b09eadfb"
>
</StructureRef></Interfaces>
</Structure></Structures>
<Collections>
<Collection
 TypeName="FixedTextMessageStruct"
 Default="[]"
 X="340"
 Y="270"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessagesCol"
 Guid="d040bf1c-ba88-4f04-b215-161b3605f94c"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9131da1c-6270-4bbd-b65b-a7e5d3bac983"
>
</ReqRef><ReqRef
 Id="50c53fbd-5b3e-40cd-a4f2-75801157fd7d"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="540eac78-2873-4ce4-b6d7-aecc580dca5e"
>
</ReqRef><Comment>Collection of fixed text messages received from the trackside.</Comment>
</Collection><Collection
 TypeName="PlainTextMessageStruct"
 Default="[]"
 X="140"
 Y="270"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessagesCol"
 Guid="4abc80bd-b5f7-496f-bcad-9540d7acc2d3"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="16ba4087-e084-4482-ad6d-2ef9b27fc1b7"
>
</ReqRef><ReqRef
 Id="50c53fbd-5b3e-40cd-a4f2-75801157fd7d"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="419cdfad-2b04-48b0-b0ea-28a4a2d0843c"
>
</ReqRef><Comment>Collection of plain text messages received from the trackside.</Comment>
</Collection></Collections>
<Functions>
<Function
 Type="FixedTextMessageStruct"
 Default=""
 X="730"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CreateFixedTextMessage"
 Guid="0881eea8-b85e-4897-9f1a-486169cd9b0c"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f34b8473-02fc-4f64-8890-0fcb6fe475f1"
>
</ReqRef><ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b57ac494-7211-415c-a9ae-97f25794679c"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0655bbdc-8f84-41a6-a59d-0be4ea53ce34"
>
</ReqRef><ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e94d82d4-7e6f-4a83-a7db-179a0b5b3826"
>
</ReqRef><ReqRef
 Id="ddb2cf07-fb95-44d6-929d-8e02adaba572"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f0f3abaa-b7a5-4d3b-be0a-44898020a778"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0a53f0d4-c865-45b1-b4a4-6f9eb2065c13"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1688790f-71c1-475a-b3b7-d6594bf8556a"
>
</ReqRef><ReqRef
 Id="a7c6602b-38f1-429b-97bb-2904a3894137"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3a34deea-ed87-46f9-ba72-123957193e91"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="476ede12-5e90-4d27-89c2-881c8d9d78a4"
>
</ReqRef><ReqRef
 Id="d4e8e1bf-429b-4848-a14e-b3872a4b2100"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ca11d623-a5de-4121-82aa-83ae1b520da8"
>
</ReqRef><ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7a1be84c-3c1f-4f35-b2b2-5628771d7730"
>
</ReqRef><ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e89ae476-cd7e-4044-802b-e23ef3caef00"
>
</ReqRef><ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7b23fad7-3a03-4c0d-a0e6-4f22e2ec575b"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da517ea4-e0cf-40f6-8e48-c5dca8ea9ed8"
>
</ReqRef><ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9af90b7a-b7e4-45e1-8d5a-e4ad8490a180"
>
</ReqRef><ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2aa97a2a-bd95-425c-8f88-531e88fcd862"
>
</ReqRef><ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0dc90afe-8672-47e8-afe3-6e120401f0d8"
>
</ReqRef><Comment>Creates a FixedTextMessageStruct from the fixed message packet received from the trackside.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_FIXED_TEXT_MESSAGES.Message"
 Name="aPacket"
 Guid="635c45e3-4045-4c16-9608-0ccc98b7f4cf"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="580b51d9-abf3-47b9-9203-68af20cb9f59"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="73520965-c0bf-43d5-b5fd-22088d09d21e"
>
<Expression>FixedTextMessageStruct
{
  IsImportant =&gt; Q_TEXTCLASSToBoolean( aValue =&gt; aPacket.Q_TEXTCLASS ),
  FulfillAllTheEvents =&gt; Q_TEXTDISPLAYToBoolean( aValue =&gt; aPacket.Q_TEXTDISPLAY ),
  Location =&gt; ConvertLocation
  (
    aDistanceFromRef =&gt; aDistanceFromRef,
    aLocation =&gt; aPacket.D_TEXTDISPLAY,
    aScale =&gt; aPacket.Q_SCALE
  ),
  StartModeCondition =&gt; M_MODETEXTDISPLAYToModeConditionStruct( aValue =&gt; aPacket.M_MODETEXTDISPLAY_0 ),
  EndModeCondition =&gt; M_MODETEXTDISPLAYToModeConditionStruct( aValue =&gt; aPacket.M_MODETEXTDISPLAY_1 ),
  StartLevelCondition =&gt; M_LEVELTEXTDISPLAYToLevelConditionStruct
  (
    aValue =&gt; aPacket.M_LEVELTEXTDISPLAY_0,
    aNID_NTC =&gt; aPacket.NID_NTC_0
  ),
  EndLevelCondition =&gt; M_LEVELTEXTDISPLAYToLevelConditionStruct
  (
    aValue =&gt; aPacket.M_LEVELTEXTDISPLAY_1,
    aNID_NTC =&gt; aPacket.NID_NTC_1
  ),
  Length =&gt; ConvertLength
  (
    aLength =&gt; aPacket.L_TEXTDISPLAY,
    aScale =&gt; aPacket.Q_SCALE
  ),
  DisplayDuration =&gt; ConvertTime( aTime=&gt; aPacket.T_TEXTDISPLAY ),
  DriverConfirmation =&gt; Q_TEXTCONFIRMToDriverConfirmationEnum( aValue =&gt; aPacket.Q_TEXTCONFIRM ),
  AckStopsDisplay =&gt; Q_CONFTEXTDISPLAYToBoolean( aValue =&gt; aPacket.Q_CONFTEXTDISPLAY ),
  ReportInformation =&gt; CreateReportInformation
  (
    ReportHasToBeSent =&gt; aPacket.Q_TEXTREPORT,
    Message =&gt; aPacket.NID_TEXTMESSAGE,
    RBC =&gt; aPacket.NID_RBC,
    Country=&gt; aPacket.NID_C
  ),
  FixedText =&gt; Q_TEXTToFixedTextEnum( aValue =&gt; aPacket.Q_TEXT )
}</Expression>
</Case></Cases>
</Function><Function
 Type="PlainTextMessageStruct"
 Default=""
 X="620"
 Y="60"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CreatePlainTextMessage"
 Guid="e959a04e-1c59-4a3f-86d2-1d5aa510d26a"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8e609745-4d4e-42b0-84c6-df36063c52da"
>
</ReqRef><ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cb43ee08-1976-47be-9013-7c74b7bebb82"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29a35af4-319e-4410-a0a3-e8187dc785cb"
>
</ReqRef><ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="805ab9b7-83ad-4379-bb03-c39b449d1309"
>
</ReqRef><ReqRef
 Id="ddb2cf07-fb95-44d6-929d-8e02adaba572"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c80b2860-2f54-4555-b799-3fd4159c2179"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="88b4c3c0-630f-4d49-9b7a-d86395dea5f6"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b44811eb-9802-46ef-9aba-7fd709be0cb5"
>
</ReqRef><ReqRef
 Id="a7c6602b-38f1-429b-97bb-2904a3894137"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="08b1df1f-25b6-4a08-9f6c-f09b0f7a6a74"
>
</ReqRef><ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="30d5504e-f692-4360-a250-a4b9fb2b2f11"
>
</ReqRef><ReqRef
 Id="d4e8e1bf-429b-4848-a14e-b3872a4b2100"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dbc43378-8e05-43d2-b38d-f0cf6204104a"
>
</ReqRef><ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56a19bca-db2d-4ec4-b087-9218058615b3"
>
</ReqRef><ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8cab1eba-52da-4348-8f5b-41feaec6b468"
>
</ReqRef><ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="41867f95-feb8-4f56-ba49-5e36ce727bae"
>
</ReqRef><ReqRef
 Id="2e27e753-7cf9-4467-8241-c7589b808d3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2c236f50-4694-4c95-9344-fd334ec469a8"
>
</ReqRef><ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46380c8e-e0f1-469c-8f94-089c1bbbe595"
>
</ReqRef><ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="15cf918c-2faa-472b-9501-efe6a2bf1dee"
>
</ReqRef><ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="590f91be-4a5c-445f-9c20-cdd057a96e3f"
>
</ReqRef><Comment>Creates a PlainTextMessageStruct from the plain message packet received from the trackside.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES.Message"
 Name="aPacket"
 Guid="0935e5cf-1013-4e3f-a4be-5e8d0f36ee61"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="6d113b64-d297-47db-abb7-4fabaee68e0f"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="c871a71b-e062-47e3-ba9c-ba25d37d4200"
>
<Expression>PlainTextMessageStruct
{
  IsImportant =&gt; Q_TEXTCLASSToBoolean( aValue =&gt; aPacket.Q_TEXTCLASS ),
  FulfillAllTheEvents =&gt; Q_TEXTDISPLAYToBoolean( aValue =&gt; aPacket.Q_TEXTDISPLAY ),
  Location =&gt; ConvertLocation
  (
    aDistanceFromRef =&gt; aDistanceFromRef,
    aLocation =&gt; aPacket.D_TEXTDISPLAY,
    aScale =&gt; aPacket.Q_SCALE
  ),
  StartModeCondition =&gt; M_MODETEXTDISPLAYToModeConditionStruct( aValue =&gt; aPacket.M_MODETEXTDISPLAY_0 ),
  EndModeCondition =&gt; M_MODETEXTDISPLAYToModeConditionStruct( aValue =&gt; aPacket.M_MODETEXTDISPLAY_1 ),
  StartLevelCondition =&gt; M_LEVELTEXTDISPLAYToLevelConditionStruct
  (
    aValue =&gt; aPacket.M_LEVELTEXTDISPLAY_0,
    aNID_NTC =&gt; aPacket.NID_NTC_0
  ),
  EndLevelCondition =&gt; M_LEVELTEXTDISPLAYToLevelConditionStruct
  (
    aValue =&gt; aPacket.M_LEVELTEXTDISPLAY_1,
    aNID_NTC =&gt; aPacket.NID_NTC_1
  ),
  Length =&gt; ConvertLength
  (
    aLength =&gt; aPacket.L_TEXTDISPLAY,
    aScale =&gt; aPacket.Q_SCALE
  ),
  DisplayDuration =&gt; ConvertTime( aTime=&gt; aPacket.T_TEXTDISPLAY ),
  DriverConfirmation =&gt; Q_TEXTCONFIRMToDriverConfirmationEnum( aValue =&gt; aPacket.Q_TEXTCONFIRM ),
  AckStopsDisplay =&gt; Q_CONFTEXTDISPLAYToBoolean( aValue =&gt; aPacket.Q_CONFTEXTDISPLAY ),
  ReportInformation =&gt; CreateReportInformation
  (
    ReportHasToBeSent =&gt; aPacket.Q_TEXTREPORT,
    Message =&gt; aPacket.NID_TEXTMESSAGE,
    RBC =&gt; aPacket.NID_RBC,
    Country=&gt; aPacket.NID_C
  ),
  Text =&gt;
    REDUCE aPacket.Sequence1
    USING Char
    IN Concat
    (
      String1=&gt; RESULT,
      String2=&gt; Char.X_TEXT
    )
    INITIAL_VALUE &apos;&apos;
}</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Q_TEXTCLASSToBoolean"
 Guid="9b012e8c-b1d5-4130-87b4-a40d5904937f"
>
<ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="234553d6-af48-4e8d-9865-ea78fbf134a6"
>
</ReqRef><ReqRef
 Id="7e9d1185-2e5f-4160-b6c1-d88a7b7163a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fece979c-d2b8-4cd8-8885-01a51d3ea36b"
>
</ReqRef><Comment>Converts a value of type Q_TEXTCLASS to a Boolean indicating whether the text message is important.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_TEXTCLASS"
 Name="aValue"
 Guid="ae36cd5f-3044-4e0f-a2e2-a1b5f0236240"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Auxiliary message"
 Guid="76887951-a796-4718-b947-fc1f5012a94e"
>
<PreConditions>
<PreCondition
 Guid="497996af-cae5-4781-a22e-9c6b9ae8ad89"
>aValue == Messages.Q_TEXTCLASS.Auxiliary_Information</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Important message"
 Guid="cd5c6b02-415e-42d7-9584-8f601796e8e5"
>
<PreConditions>
<PreCondition
 Guid="0d8f91d1-8d8f-4537-9898-a221b62ef614"
>aValue == Messages.Q_TEXTCLASS.Important_Information</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="de8256f7-b29f-4b64-bc8e-c0090dd60094"
>
<Comment>The spare information is considered as non important.</Comment>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Q_TEXTDISPLAYToBoolean"
 Guid="73e8093f-d1fd-468b-a94a-4db980d8fae3"
>
<Comment>Converts a value of type Q_TEXTDISPLAY to a Boolean indicating whether all the stop condition events have to be fulfilled in order to stop the display of the message.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_TEXTDISPLAY"
 Name="aValue"
 Guid="79617e2a-3c8e-4652-9356-9805e921b44f"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="All events fulfilled"
 Guid="8d2e2d6d-b85a-4503-a82d-4aa580a303dc"
>
<PreConditions>
<PreCondition
 Guid="bef7bfbe-dc84-4ab2-a617-797ff433eb5f"
>aValue == Messages.Q_TEXTDISPLAY.Yes__display_as_soon_as___until_all_events_are_fulfilled</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="a65437cc-4d95-419e-80d8-56f85da55abe"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="ModeConditionStruct"
 Default=""
 X="450"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="M_MODETEXTDISPLAYToModeConditionStruct"
 Guid="05118d18-71e2-4c2d-a526-6c88e3bbd82a"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9a4dc1ee-38c8-4631-ab07-aa98b13700a8"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="63a40b9b-9539-4b4d-82da-570252f2fed8"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="201ae8c0-2e8e-463b-ac01-62ae23b8a2b4"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df91c8ab-85d4-4eb9-acd8-cdfdbe8ccb8c"
>
</ReqRef><Comment>Converts a value of type M_MODETEXTDISPLAY to ModeConditionStruct indicating if there is a start or stop condition for the text message display related to the mode.</Comment>
<Parameters>
<Parameter
 Type="Messages.M_MODETEXTDISPLAY"
 Name="aValue"
 Guid="3cd0d086-4a2a-4a3d-a32a-be893aba5051"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="FS"
 Guid="4615d63f-f663-45b2-9e2e-ec2dfef4785c"
>
<PreConditions>
<PreCondition
 Guid="6b8a76b0-3fe4-4a4b-9c6b-26b7cb1efee2"
>aValue == Messages.M_MODETEXTDISPLAY.Full_Supervision</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.FS
}</Expression>
</Case><Case
 Name="LS"
 Guid="e20895c8-768e-4158-8b14-74ebdc0bd7f7"
>
<PreConditions>
<PreCondition
 Guid="822171e6-c356-49bb-a9e1-a97d244c31f1"
>aValue == Messages.M_MODETEXTDISPLAY.Limited_Supervision</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.LS
}</Expression>
</Case><Case
 Name="NL"
 Guid="60e8df56-0bfc-47b8-8c26-7cb062891e49"
>
<PreConditions>
<PreCondition
 Guid="6e79bcd0-f0c4-461e-bb40-8fd1c8927f8c"
>aValue == Messages.M_MODETEXTDISPLAY.Non_Leading</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.NL
}</Expression>
</Case><Case
 Name="OS"
 Guid="7a39362c-35e2-4192-bfd8-6df166726996"
>
<PreConditions>
<PreCondition
 Guid="138859f8-5148-41db-937a-cdc38f7956d5"
>aValue == Messages.M_MODETEXTDISPLAY.On_Sight</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.OS
}</Expression>
</Case><Case
 Name="PT"
 Guid="ca23cf13-6a12-4550-9648-23152cea799b"
>
<PreConditions>
<PreCondition
 Guid="64d5b908-cace-4e6e-9b4c-204930a87a5d"
>aValue == Messages.M_MODETEXTDISPLAY.Post_Trip</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.PT
}</Expression>
</Case><Case
 Name="RV"
 Guid="f0d17dba-b015-4d94-9269-8a6b2a2b40b0"
>
<PreConditions>
<PreCondition
 Guid="e20e86e7-3967-43bd-83c9-3d8339ec431a"
>aValue == Messages.M_MODETEXTDISPLAY.Reversing</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.RV
}</Expression>
</Case><Case
 Name="SR"
 Guid="ce0729e9-cfbd-494b-a4a3-bdcf8e826a04"
>
<PreConditions>
<PreCondition
 Guid="964985cd-784a-47c1-9f19-4829fcd1c404"
>aValue == Messages.M_MODETEXTDISPLAY.Staff_Responsible</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.SR
}</Expression>
</Case><Case
 Name="SB"
 Guid="bd8a087e-adee-4f5e-beb2-2b86421ea046"
>
<PreConditions>
<PreCondition
 Guid="e074d0d6-94c1-429d-85f3-3e8106761654"
>aValue == Messages.M_MODETEXTDISPLAY.Stand_By</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.SB
}</Expression>
</Case><Case
 Name="TR"
 Guid="664265aa-840f-4002-820a-aa276929a3cc"
>
<PreConditions>
<PreCondition
 Guid="afae6fbe-abf3-4cb5-bb5c-514173c12a32"
>aValue == Messages.M_MODETEXTDISPLAY.Trip</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.TR
}</Expression>
</Case><Case
 Name="UN"
 Guid="d4322a9f-8f3c-43c4-9430-3758108e31dc"
>
<PreConditions>
<PreCondition
 Guid="3689e2cf-538e-4369-b0b2-0c5271728bb9"
>aValue == Messages.M_MODETEXTDISPLAY.Unfitted</PreCondition></PreConditions>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; True,
  Mode =&gt; ModeEnum.ModeForTextDisplay.UN
}</Expression>
</Case><Case
 Name="Otherwise"
 Guid="9380fa3a-77c6-4b37-b7f0-75bff96c5d1a"
>
<Expression>ModeConditionStruct
{
  IsLimitedByMode =&gt; False,
  Mode =&gt; ModeEnum.ModeForTextDisplay.Unknown
}</Expression>
</Case></Cases>
</Function><Function
 Type="LevelConditionStruct"
 Default=""
 X="560"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="M_LEVELTEXTDISPLAYToLevelConditionStruct"
 Guid="64997fee-34cc-481b-b559-bfeb21abb5b5"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d6104c5-57ff-455f-b3da-4cce2e965f98"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c031ba62-fed0-4956-85ef-d3ccf5bb9588"
>
</ReqRef><ReqRef
 Id="f329eaf6-887d-481c-8f87-073f8e9ee025"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9a92cc36-e891-465b-af56-c8d1f559ab7b"
>
</ReqRef><ReqRef
 Id="e56989a2-b4c3-4663-8cce-3810ca8a5e62"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="514a49ae-9a3d-4cc7-b5e2-1015487e163c"
>
</ReqRef><Comment>Converts a value of type M_LEVELTEXTDISPLAY to LevelConditionStruct indicating if there is a start or stop condition for the text message display related to the mode.</Comment>
<Parameters>
<Parameter
 Type="Messages.M_LEVELTEXTDISPLAY"
 Name="aValue"
 Guid="17672f77-4ce7-4e62-86e3-a60ad732e2a4"
>
</Parameter><Parameter
 Type="Messages.NID_NTC"
 Name="aNID_NTC"
 Guid="b7109497-c018-4db7-a356-00fd19d3f240"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="L0"
 Guid="b93012e8-99d7-465a-b28f-d7110e9f895f"
>
<PreConditions>
<PreCondition
 Guid="db68c664-25d1-465a-9bfb-fbbe268e1d25"
>aValue == Messages.M_LEVELTEXTDISPLAY.Level_0</PreCondition></PreConditions>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.True,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; NID_NTC.NOT_APPLICABLE,
    Value =&gt; LevelEnum.L0
  }
}</Expression>
</Case><Case
 Name="L1"
 Guid="5aa3f68c-914f-4cb9-9448-0ea4a40aba1b"
>
<PreConditions>
<PreCondition
 Guid="04558597-5663-4328-afae-cbc2c3bf2951"
>aValue == Messages.M_LEVELTEXTDISPLAY.Level_1</PreCondition></PreConditions>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.True,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; NID_NTC.NOT_APPLICABLE,
    Value =&gt; LevelEnum.L1
  }
}</Expression>
</Case><Case
 Name="L2"
 Guid="3be1f1ff-a7eb-469f-93f9-64b59d0a1c0f"
>
<PreConditions>
<PreCondition
 Guid="ca3153da-1662-4d2d-a1a7-f2a0e80fc847"
>aValue == Messages.M_LEVELTEXTDISPLAY.Level_2</PreCondition></PreConditions>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.True,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; NID_NTC.NOT_APPLICABLE,
    Value =&gt; LevelEnum.L2
  }
}</Expression>
</Case><Case
 Name="L3"
 Guid="2cd2ee05-50ff-47f3-83b1-c0aba6e5fa37"
>
<PreConditions>
<PreCondition
 Guid="e47891ff-fad1-44cc-b10e-26fbe888f47a"
>aValue == Messages.M_LEVELTEXTDISPLAY.Level_3</PreCondition></PreConditions>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.True,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; NID_NTC.NOT_APPLICABLE,
    Value =&gt; LevelEnum.L3
  }
}</Expression>
</Case><Case
 Name="LNTC"
 Guid="17d8165b-9fb2-4509-90e2-f905f36eb938"
>
<PreConditions>
<PreCondition
 Guid="46457f57-b0d2-4aae-bce4-58cee68fe559"
>aValue == Messages.M_LEVELTEXTDISPLAY.Level_STM_specified_by_NID_STM</PreCondition></PreConditions>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.True,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; aNID_NTC,
    Value =&gt; LevelEnum.LNTC
  }
}</Expression>
</Case><Case
 Name="Otherwise"
 Guid="0a80c0ca-dbed-46ee-a29d-fbd91f3d7114"
>
<Expression>LevelConditionStruct
{
  IsLimitedByLevel =&gt; Boolean.False,
  Level =&gt; LevelDataStruct
  {
    NTC =&gt; NID_NTC.NOT_APPLICABLE,
    Value =&gt; LevelEnum.Unknown
  }
}</Expression>
</Case></Cases>
</Function><Function
 Type="DriverConfirmationEnum"
 Default=""
 X="340"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Q_TEXTCONFIRMToDriverConfirmationEnum"
 Guid="dbf55db7-bfea-4380-96fb-acc624341556"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="652bb241-6c14-4640-ad67-b7c7889cf017"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="091ce5f4-a667-49ba-a9b1-a6a33b0ffbd9"
>
</ReqRef><ReqRef
 Id="8266cb3f-9bd1-45eb-852a-87d2a9fcdc5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bfab3dd6-cc9b-4a26-aa73-1ad1ab5e26b9"
>
</ReqRef><Comment>Converts a value of type Q_TEXTCONFIRM to a DriverConfirmationEnum indicating if the driver has to confirm the text message.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_TEXTCONFIRM"
 Name="aValue"
 Guid="0a6fe11b-882d-41c0-8dad-78d18e946d4a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Confirmation required"
 Guid="4dbed82b-a75a-4491-9357-813e03097549"
>
<PreConditions>
<PreCondition
 Guid="b62bde4d-9f65-4740-ac2a-964e5b557598"
>aValue == Messages.Q_TEXTCONFIRM.Confirmation_required</PreCondition></PreConditions>
<Expression>DriverConfirmationEnum.ConfirmationRequired</Expression>
</Case><Case
 Name="Confirmation not required"
 Guid="fd8c04d0-f84b-4fa2-ad3b-7944d63b5105"
>
<Comment>The spare information is considered as non important.</Comment>
<PreConditions>
<PreCondition
 Guid="c7a66a85-9ca1-4840-a8aa-c7a9cce904e9"
>aValue == Messages.Q_TEXTCONFIRM.No_confirmation_required</PreCondition></PreConditions>
<Expression>DriverConfirmationEnum.NoConfirmationRequired</Expression>
</Case><Case
 Name="Confirmation required, apply SB"
 Guid="ff92d6c4-6e51-468a-b14a-5553dc9d037e"
>
<PreConditions>
<PreCondition
 Guid="2df75b7f-a916-47cc-b21e-71e1efafd18d"
>aValue == Messages.Q_TEXTCONFIRM.Confirmation_required__command_application_of_the_service_brake_when_display_end_condition_is_fulfilled__unless_the_text_has_already_been_acknowledged_by_the_driver</PreCondition></PreConditions>
<Expression>DriverConfirmationEnum.ConfirmationRequiredApplySB</Expression>
</Case><Case
 Name="Confirmation required, apply EB"
 Guid="d5cb7517-517c-485e-b63f-394be3f36f6c"
>
<Expression>DriverConfirmationEnum.ConfirmationRequiredApplyEB</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Q_CONFTEXTDISPLAYToBoolean"
 Guid="7d15cbef-c13d-4600-bc8d-30d602227776"
>
<Comment>Converts a value of type Q_CONFTEXTDISPLAY to a Boolean indicating whether the driver acknowlegement stops the display of the message.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_CONFTEXTDISPLAY"
 Name="aValue"
 Guid="d8f3f86b-9744-48c2-9ea9-f9aaf2db70db"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Acknowledgement stops display"
 Guid="e21184e5-6ca7-4fc3-90c3-b0d35d0ea674"
>
<PreConditions>
<PreCondition
 Guid="5fd4f502-4a25-4cbd-b7dd-53ea1fdb2c7b"
>aValue == Messages.Q_CONFTEXTDISPLAY.Driver_acknowledgement_always_ends_the_text_display__regardless_of_the_end_condition</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="08e3e733-daff-477e-9f81-0cebff38b8c5"
>
<Comment>The spare information is considered as non important.</Comment>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="TextReportStruct"
 Default=""
 X="340"
 Y="620"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="CreateReportInformation"
 Guid="c97d0009-3a7a-4924-88dd-4baf16e11acf"
>
<ReqRef
 Id="a7c6602b-38f1-429b-97bb-2904a3894137"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0fd8cf0b-d9d4-4cae-9e37-a0532d23c310"
>
</ReqRef><Comment>Creates a TextReportStruct from the information provided in a text message.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_TEXTREPORT"
 Name="ReportHasToBeSent"
 Guid="b83b4344-9639-4f37-abe5-00cee7e6c8c0"
>
</Parameter><Parameter
 Type="Messages.NID_TEXTMESSAGE"
 Name="Message"
 Guid="640cbcdd-18fd-4b8b-b0e0-acd7e3ebc1fa"
>
</Parameter><Parameter
 Type="Messages.NID_RBC"
 Name="RBC"
 Guid="2cdea1b3-1a62-4e04-9cea-0b8018ade1f7"
>
</Parameter><Parameter
 Type="Messages.NID_C"
 Name="Country"
 Guid="31114f33-6fd1-479c-8394-34fd60461c9a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Report has to be sent"
 Guid="1d2e5837-6c7e-4b8d-9564-858b55642719"
>
<Expression>TextReportStruct
{
  TextId =&gt; Message,
  NID_C =&gt; Country,
  NID_RBC =&gt; RBC,
  ReportRequired =&gt; Boolean.False
}</Expression>
</Case><Case
 Name="Otherwise"
 Guid="e6aeb418-44b4-4154-a6fc-a47f4b8bfacc"
>
<Expression>TextReportStruct
{
  TextId =&gt; 0,
  NID_C =&gt; 0,
  NID_RBC =&gt; 0,
  ReportRequired =&gt; False
}</Expression>
</Case></Cases>
</Function><Function
 Type="FixedTextEnum"
 Default=""
 X="670"
 Y="440"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Q_TEXTToFixedTextEnum"
 Guid="acaa0a87-327a-4969-ab80-a94dacbeabd1"
>
<ReqRef
 Id="6517ff26-c75b-48a1-8808-ef77a64ca200"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="112d7a7b-bfd8-4b66-9d81-748e9b933521"
>
</ReqRef><ReqRef
 Id="ef3c351f-025b-4a91-a937-bc68d0970984"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="38f72bef-2675-4482-9460-f5953b840f47"
>
</ReqRef><ReqRef
 Id="ddb2cf07-fb95-44d6-929d-8e02adaba572"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aa2e3b55-a9ca-4827-a6e9-a9a20e2d4688"
>
</ReqRef><Comment>Converts a value of type Q_TEXT to FixedTextEnum indicating the fixed text to display.</Comment>
<Parameters>
<Parameter
 Type="Messages.Q_TEXT"
 Name="aValue"
 Guid="d534601b-d22f-468b-84fe-adc8c5a85eab"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Acknowledgement"
 Guid="8a674034-55fe-4ea7-80d8-7c761fbe8b32"
>
<PreConditions>
<PreCondition
 Guid="63f772b7-37db-4674-b38b-a2bdf482945e"
>aValue == Messages.Q_TEXT.__Acknowledgement_C</PreCondition></PreConditions>
<Expression>FixedTextEnum.Acknowledgement</Expression>
</Case><Case
 Name="Otherwise"
 Guid="8d72d3c3-9d2e-44a0-a5a1-72a5cabc8d3d"
>
<Expression>FixedTextEnum.LevelCrossingNotProtected</Expression>
</Case></Cases>
</Function><Function
 Type="String"
 Default=""
 X="10"
 Y="620"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TranslateFixedTextMessage"
 Guid="b3c7da94-f9ec-468e-82ee-39e226a48d96"
>
<ReqRef
 Id="3e266b65-8915-4dc3-befe-d6f4099f5a67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7a69f7c5-23e7-4ce0-a856-0d6d6432c02d"
>
</ReqRef><Comment>Provides the translation of the given fixed text message in the given language.</Comment>
<Parameters>
<Parameter
 Type="FixedTextEnum"
 Name="aText"
 Guid="22f193d7-a912-4e32-81af-1fce2ce60e30"
>
</Parameter><Parameter
 Type="LanguageEnum"
 Name="aLanguage"
 Guid="bc833eb3-e909-4155-a61a-7a8271af89ab"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Acknowledgement"
 Guid="714b6103-0f72-4587-9e33-2347bcfd3cae"
>
<PreConditions>
<PreCondition
 Guid="c43e54cd-3dc4-4e9b-84de-dbe91e163ac2"
>aText == FixedTextEnum.Acknowledgement</PreCondition></PreConditions>
<Expression>TranslateAcknowledgementMessage(  aLanguage =&gt; aLanguage )</Expression>
</Case><Case
 Name="Level crossing not protected"
 Guid="7490faf1-f7bb-46b1-aa57-ed98bd9fba43"
>
<Expression>TranslateLevelCrossingNotProtectedMessage(  aLanguage =&gt; aLanguage )</Expression>
</Case></Cases>
</Function><Function
 Type="String"
 Default=""
 X="230"
 Y="620"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TranslateAcknowledgementMessage"
 Guid="da5e1bf1-4167-4db7-b70a-87ca2df6cf8f"
>
<ReqRef
 Id="3e266b65-8915-4dc3-befe-d6f4099f5a67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="524798c6-5f4d-4e7c-ac85-2605e042d59c"
>
</ReqRef><Comment>Translated the &quot;Acknowledgement&quot; fixed message into the provided language.</Comment>
<Parameters>
<Parameter
 Type="LanguageEnum"
 Name="aLanguage"
 Guid="a9cca9be-0719-4b4e-b759-3e69a720b59d"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="FR"
 Guid="47452801-5690-4ca6-a515-031a78297895"
>
<PreConditions>
<PreCondition
 Guid="3da20f9d-7483-40d0-9554-a32eb3bf36e9"
>aLanguage == LanguageEnum.FR</PreCondition></PreConditions>
<Expression>&apos;Accusé de réception&apos;</Expression>
</Case><Case
 Name="NL"
 Guid="8137886a-3453-4da9-ba1b-14a4adf162e8"
>
<PreConditions>
<PreCondition
 Guid="a1f87543-4f43-4a54-b114-7b1ff8407025"
>aLanguage == LanguageEnum.NL</PreCondition></PreConditions>
<Expression>&apos;Beantwoording&apos;</Expression>
</Case><Case
 Name="Otherwise (EN)"
 Guid="b3fc9981-1708-4d84-96dc-5c0c2736c1dc"
>
<Expression>&apos;Acknowledgement&apos;</Expression>
</Case></Cases>
</Function><Function
 Type="String"
 Default=""
 X="120"
 Y="620"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TranslateLevelCrossingNotProtectedMessage"
 Guid="c886db03-d1ef-46ef-a2f5-0ab1af9f1ee9"
>
<ReqRef
 Id="3e266b65-8915-4dc3-befe-d6f4099f5a67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3776ea67-0a88-4417-a144-d819e35cc44c"
>
</ReqRef><Comment>Translated the &quot;Level crossing not protected&quot; fixed message into the provided language.</Comment>
<Parameters>
<Parameter
 Type="LanguageEnum"
 Name="aLanguage"
 Guid="7edbeeec-a0ef-4ebc-aeff-95f12d1d7769"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="FR"
 Guid="5c1af025-9c6e-44ab-91fc-69456fcfc4bc"
>
<PreConditions>
<PreCondition
 Guid="35a1b161-557c-4330-a7f9-f5d8b7bf4364"
>aLanguage == LanguageEnum.FR</PreCondition></PreConditions>
<Expression>&apos;Passage à niveau non protégé&apos;</Expression>
</Case><Case
 Name="NL"
 Guid="b6474293-855e-4a9b-a128-1c494209b476"
>
<PreConditions>
<PreCondition
 Guid="60f375f9-6dd2-4c01-ab5a-25625b017a58"
>aLanguage == LanguageEnum.NL</PreCondition></PreConditions>
<Expression>&apos;Spoorwegovergang niet beschermd&apos;</Expression>
</Case><Case
 Name="Otherwise (NL)"
 Guid="534fb0be-b035-42eb-9ae4-6887d58c22e4"
>
<Expression>&apos;Level crossing not protected&apos;</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StartConditionSatisfied"
 Guid="af01c634-7cf3-44d2-8d83-a8bac13047ab"
>
<ReqRef
 Id="33f647b5-04f7-48f6-be20-58f48c691ae8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="783c0dae-37f8-4aab-b3cc-5da38aead27c"
>
</ReqRef><Comment>Indicates whether the conditions to start the display of the provided message are satisfied.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="c173fb9f-b0c3-4197-ad9c-1c5cf03ebb1a"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="All conditions have to be fulfilled"
 Guid="6d084b80-645b-48d5-807a-da80a3b4f10b"
>
<PreConditions>
<PreCondition
 Guid="88451235-b776-4e6b-b6c7-253add891445"
>aMessage.FulfillAllTheEvents</PreCondition></PreConditions>
<Expression>StartLocationConditionSatisfied( aMessage=&gt; aMessage )
  AND
StartModeConditionSatisfied( aMessage =&gt; aMessage )
  AND
StartLevelConditionSatisfied( aMessage =&gt; aMessage )</Expression>
</Case><Case
 Name="One condition has to be fulfilled (level)"
 Guid="f9db6c5c-502f-4935-a5cd-4b8f508f9421"
>
<PreConditions>
<PreCondition
 Guid="2b26483e-5260-48ab-9fd9-41a7ab6130b4"
>aMessage.StartLevelCondition.IsLimitedByLevel</PreCondition></PreConditions>
<Expression>StartLevelConditionSatisfied( aMessage =&gt; aMessage )</Expression>
</Case><Case
 Name="One condition has to be fulfilled mode)"
 Guid="3b8418d3-6826-4279-af5c-1035cc0de6e8"
>
<PreConditions>
<PreCondition
 Guid="ae43c40d-e6d5-450d-8ede-a8362b497518"
>aMessage.StartModeCondition.IsLimitedByMode</PreCondition></PreConditions>
<Expression>StartModeConditionSatisfied( aMessage =&gt; aMessage )</Expression>
</Case><Case
 Name="One condition has to be fulfilled location)"
 Guid="4dbb0cc8-9ea5-4747-8576-10ca23bccdc2"
>
<PreConditions>
<PreCondition
 Guid="c4bb259f-6cea-40ea-b31d-6989b3585f37"
>aMessage.Location != BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>StartLocationConditionSatisfied( aMessage=&gt; aMessage )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="b2d9dd05-525e-420e-a80a-2345495c7045"
>
<Comment>In this case, the start condition is limited by nothing</Comment>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="EndConditionSatisfied"
 Guid="a1e89073-d804-41c7-b580-d422d1fa97b1"
>
<ReqRef
 Id="33f647b5-04f7-48f6-be20-58f48c691ae8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3655de4f-ac42-4a54-9006-30730a1e79f3"
>
</ReqRef><ReqRef
 Id="3146b3d6-edfd-4884-a3d1-7d486258bd8f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6c8b54f7-a737-4cdc-ab2a-111d5d972792"
>
</ReqRef><ReqRef
 Id="e1bf0a62-2681-4f2c-8f34-fa3a6e524889"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4edae6d6-30c3-4367-a7ac-9cc0f6875298"
>
</ReqRef><Comment>Indicates whether the conditions to stop the display of the provided message are satisfied. The conditions have to be evaluated only if the message is already displayed (so the DisplayStartTime is set).</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="720972de-afc2-4c3e-b039-8c7d83649661"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="All conditions have to be fulfilled"
 Guid="6113cfb8-6992-4ca1-bfd1-e7bb7e8a142b"
>
<PreConditions>
<PreCondition
 Guid="10b66425-dbad-4b27-980d-c12526c650c2"
>aMessage.FulfillAllTheEvents</PreCondition></PreConditions>
<Expression>EndLocationConditionSatisfied(  aMessage =&gt; aMessage )
  AND
TimerConditionSatisfied( aMessage=&gt; aMessage )
  AND
EndModeConditionSatisfied( aMessage =&gt; aMessage )
  AND
EndLevelConditionSatisfied( aMessage =&gt; aMessage )
  AND
AckConditionSatisfied( aMessage=&gt; aMessage )</Expression>
</Case><Case
 Name="One condition has to be fulfilled (level)"
 Guid="41f12ee7-3e93-4a38-b1a2-16ec896669f1"
>
<PreConditions>
<PreCondition
 Guid="54faf01a-fb4d-45eb-93a9-9698ade692d9"
>aMessage.EndLevelCondition.IsLimitedByLevel</PreCondition><PreCondition
 Guid="127022f3-d846-4792-8597-ff675b17cd11"
>EndLevelConditionSatisfied( aMessage =&gt; aMessage )</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="One condition has to be fulfilled (mode)"
 Guid="87617b67-a8b6-4db8-8bc5-58abfa0a8a05"
>
<PreConditions>
<PreCondition
 Guid="d11aa855-dfaa-4beb-88de-3ebe53ac8d65"
>aMessage.EndModeCondition.IsLimitedByMode</PreCondition><PreCondition
 Guid="e969cb7a-b7fa-490a-bda2-fdcbd3371947"
>EndModeConditionSatisfied( aMessage =&gt; aMessage )</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="One condition has to be fulfilled (location)"
 Guid="9b5bbbbb-6a73-404c-b2bf-51523e57673c"
>
<PreConditions>
<PreCondition
 Guid="b68ec615-7b8b-42ee-b25a-ded663c973c1"
>aMessage.Location != BaseTypes.Distance.Unknown</PreCondition><PreCondition
 Guid="823fb732-e57d-467b-a92b-b566ba2e45fa"
>aMessage.Length != BaseTypes.Distance.Unknown</PreCondition><PreCondition
 Guid="589944c4-f57f-43eb-94d3-a6a5d7f00d7f"
>EndLocationConditionSatisfied(  aMessage =&gt; aMessage )</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="One condition has to be fulfilled (timer)"
 Guid="ddb9933f-8ba9-4c63-8119-f2fed715d890"
>
<PreConditions>
<PreCondition
 Guid="ac578e45-4796-48d9-aaaf-56f2dd56cede"
>aMessage.DisplayDuration != BaseTypes.Time.NA</PreCondition><PreCondition
 Guid="fb45f57c-ac1b-4e9a-9ed4-ecd6fe5f7d31"
>TimerConditionSatisfied( aMessage=&gt; aMessage )</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="One condition has to be fulfilled (acknowledgement)"
 Guid="3ef02801-5dc3-4885-8639-3258f94b9c41"
>
<PreConditions>
<PreCondition
 Guid="8ce8b534-74a8-4849-a933-66f327adb505"
>aMessage.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired</PreCondition><PreCondition
 Guid="cddb33f7-b87b-4483-af78-f4616cafea52"
>AckConditionSatisfied( aMessage =&gt; aMessage )</PreCondition></PreConditions>
<Expression>True</Expression>
</Case><Case
 Name="Otherwise"
 Guid="c663c8f0-0766-4589-a5be-1de1a7c4072b"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StartModeConditionSatisfied"
 Guid="b4e5c337-c46c-4e80-9c03-779d5626c1a9"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7006199c-1dd9-48d1-a3ab-94b70ac46a1f"
>
</ReqRef><ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="219ddf53-7b00-42c1-ad34-6a1190cd4cc2"
>
</ReqRef><Comment>Indicates if the start condition related to the mode is satisfied, i.e. the onboard mode is the same as specified in the message.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="9f91331e-99f0-49ed-88b0-7587d4038a2d"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Mode condition defined"
 Guid="d58b1c78-6ae5-4dff-b122-65144dcb11c1"
>
<PreConditions>
<PreCondition
 Guid="3898b240-3167-4758-b17e-3c0949416e00"
>aMessage.StartModeCondition.IsLimitedByMode</PreCondition></PreConditions>
<Expression>Kernel.Mode == aMessage.StartModeCondition.Mode</Expression>
</Case><Case
 Name="End condition"
 Guid="aa3a52c2-5f10-4ee6-a278-4098b1ebc259"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StartLevelConditionSatisfied"
 Guid="583e2333-cb48-445f-b23d-94330cc40fe0"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8eba0d65-b577-4e76-8f4a-868749210a5b"
>
</ReqRef><ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2cf7ce06-208d-4832-b162-c8074ae7bfa2"
>
</ReqRef><Comment>Indicates if the start condition related to the level is satisfied, i.e. the onboard level is the same as specified in the message.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="a80f1241-9a8b-4afa-9541-325b079973d3"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Level condition defined"
 Guid="f58e0d32-75a3-4c02-9984-1d455a0953a3"
>
<PreConditions>
<PreCondition
 Guid="0387b433-fb26-4fe5-9a37-cd621bbcab32"
>aMessage.StartLevelCondition.IsLimitedByLevel</PreCondition></PreConditions>
<Expression>Kernel.Level.Value == aMessage.StartLevelCondition.Level</Expression>
</Case><Case
 Name="Otherwise"
 Guid="2affa7eb-69d7-4cba-8865-ac2bc5d8cb79"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="TimerConditionSatisfied"
 Guid="5f725ffd-50b4-4f52-bba7-0ba91b405a97"
>
<ReqRef
 Id="bc5abc96-6d7d-431d-a9cb-8fc8ed1e25dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21866844-8849-4a07-88cc-982da6ca661d"
>
</ReqRef><Comment>Indicates if the duration of the message display has expired.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="a6b105c9-3e3c-4a47-b2b3-84885d102181"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Not yet displayed"
 Guid="64917945-4bb2-4412-ad13-faf71eb1f78c"
>
<PreConditions>
<PreCondition
 Guid="69d4ce89-2c8f-4658-8aa4-ab85fc815e2c"
>aMessage.DisplayStartTime.Timer == BaseTypes.Time.NA</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Timer condition defined"
 Guid="f5cbfe2e-7509-4df4-a4af-0040c83e05c6"
>
<PreConditions>
<PreCondition
 Guid="61dec2f5-59e9-4f4c-b53f-fce130dfbec6"
>aMessage.DisplayDuration != BaseTypes.Time.NA</PreCondition></PreConditions>
<Expression>aMessage.DisplayStartTime.Timer + aMessage.DisplayDuration &lt;= Kernel.DateAndTime.CurrentTime</Expression>
</Case><Case
 Name="Otherwise"
 Guid="4702eef8-76b4-4d1e-9025-8e56786d0c2a"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="StartLocationConditionSatisfied"
 Guid="69c0f070-6429-4900-8cbc-14e3ac201510"
>
<ReqRef
 Id="9eb30a7d-c5fa-4984-9314-28bb7fb5f477"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c7612bd7-78c4-43de-8f11-e6bd709fa9f2"
>
</ReqRef><ReqRef
 Id="2ea9d0cf-4441-4f5b-8154-548f16b1ee15"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="5863f9ca-2fc2-4a9b-b5db-cc670e22c240"
>
</ReqRef><Comment>Indicates if the start condition related to the location is satisfied.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="4e10b7ff-6545-4984-9f00-2c823eaf1a6e"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Location condition is defined"
 Guid="be1af755-3548-4da1-be13-f98e5c0f2aa8"
>
<PreConditions>
<PreCondition
 Guid="5f340264-d594-4b66-a88d-6b53f647fba7"
>aMessage.Location != BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>aMessage.Location &lt;= TrainPosition.FrontEndPosition (PointOfInterest =&gt; DistanceIntervalEnum.Nom )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="954340ca-efb8-4036-8ea5-e43a86d3e778"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="EndLocationConditionSatisfied"
 Guid="2f4a1afb-c032-4373-aac5-98fd2ef444de"
>
<ReqRef
 Id="73c47576-8644-4164-8004-5b88ee69fb9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="72e7c576-b8cc-4d78-826e-564683d3c6ef"
>
</ReqRef><ReqRef
 Id="2ea9d0cf-4441-4f5b-8154-548f16b1ee15"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="f0eb48d1-acf5-4275-8eec-4ebd9ced3aff"
>
</ReqRef><ReqRef
 Id="3146b3d6-edfd-4884-a3d1-7d486258bd8f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e50f664d-a1e0-4138-bae3-6cd9ccc69ccb"
>
</ReqRef><Comment>Indicates if the end condition related to the location is satisfied.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="1d4e738a-07b3-4334-b401-618830db272f"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Not yet displayed"
 Guid="d513427c-3628-4c7b-abb2-9452af71f532"
>
<PreConditions>
<PreCondition
 Guid="4da893e3-3d15-4df5-bd76-e8db556893ca"
>aMessage.DisplayStartTime.Timer == BaseTypes.Time.NA</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Location condition is defined"
 Guid="46b070ff-396a-4ca2-9e55-760ac8be0805"
>
<PreConditions>
<PreCondition
 Guid="811ca688-8b09-4823-bee6-1bbc18cc55ac"
>aMessage.Location != BaseTypes.Distance.Unknown</PreCondition><PreCondition
 Guid="abe433ad-9180-434d-a523-f0c499a42b33"
>aMessage.Length != BaseTypes.Distance.Unknown</PreCondition></PreConditions>
<Expression>aMessage.Location + BaseTypes.LengthToDistance( aLength =&gt; aMessage.Length ) &lt;= TrainPosition.FrontEndPosition (PointOfInterest =&gt; DistanceIntervalEnum.Nom )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="6210cb0d-bcee-4ed5-acb0-30fa00b0d1ce"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="450"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ConvertLocation"
 Guid="ea2af533-d89e-4848-b7ff-9f696e7a0349"
>
<ReqRef
 Id="1e9b154d-41c5-4d93-879e-e358e2ee5cff"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dc89104a-4d1e-4a3d-97f2-0d7332de13f2"
>
</ReqRef><Comment>Converts the text message location received from trackside to the Distance type.</Comment>
<Parameters>
<Parameter
 Type="MessageTypes.Distance"
 Name="aLocation"
 Guid="5458c94d-cad1-4323-8aef-405bfeb4a804"
>
</Parameter><Parameter
 Type="Messages.Q_SCALE"
 Name="aScale"
 Guid="79a09796-851e-4acd-8cf5-ce51c9e313de"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="0443db5c-caea-4500-875b-d1a2b82505bf"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="A location condition is defined"
 Guid="0907df71-cf8b-4f97-b7e7-162c7bbedb32"
>
<PreConditions>
<PreCondition
 Guid="4ff4258b-e553-48e4-a48b-5432c6c704bd"
>aLocation != 32767</PreCondition></PreConditions>
<Expression>aDistanceFromRef + MessageTypes.QScaleDistance(
  distance =&gt; aLocation,
  scale =&gt; aScale
)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="2d61f048-3418-4b2c-a081-581390aa629b"
>
<Expression>BaseTypes.Distance.Unknown</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="560"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ConvertLength"
 Guid="c2fb0c5c-b59b-4677-8805-0f2214c60c28"
>
<ReqRef
 Id="c545400b-55c3-4d7f-a244-464d995144b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="841f1617-753c-4a6e-a619-0f77259c0f14"
>
</ReqRef><Comment>Converts the text message length received from trackside to the Distance type.</Comment>
<Parameters>
<Parameter
 Type="MessageTypes.Length"
 Name="aLength"
 Guid="13c38dea-5d4d-410f-8b18-8f60f31bc205"
>
</Parameter><Parameter
 Type="Messages.Q_SCALE"
 Name="aScale"
 Guid="ee062ae4-1224-4745-9346-908eb6660f2c"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="A location condition is defined"
 Guid="2bb95eef-acad-4490-91b9-56938c16ad98"
>
<PreConditions>
<PreCondition
 Guid="c7d69647-f2d4-4577-b80f-79504a5672b7"
>aLength != 32767</PreCondition></PreConditions>
<Expression>MessageTypes.QScaleLength
(
  length =&gt; aLength,
  scale =&gt; aScale
)</Expression>
</Case><Case
 Name="Otherwise"
 Guid="84b4532a-4034-45d2-9d18-d81bcd99ae10"
>
<Expression>BaseTypes.Length.NA</Expression>
</Case></Cases>
</Function><Function
 Type="BaseTypes.Distance"
 Default=""
 X="670"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ConvertTime"
 Guid="ffdb0eff-7083-46bf-8151-ae3a0704c3ce"
>
<ReqRef
 Id="beaa1d56-23ca-4df6-93aa-119f7fb42c6b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d46c3439-2268-45dc-bedc-7f4b63a2df64"
>
</ReqRef><Comment>Converts the text message duration received from trackside to the Distance type.</Comment>
<Parameters>
<Parameter
 Type="MessageTypes.Time"
 Name="aTime"
 Guid="9458e3c1-805b-4e76-8c5d-bc380b72b684"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="A time condition is defined"
 Guid="602373a7-6e5b-4186-ac5a-eebd7befd5a8"
>
<PreConditions>
<PreCondition
 Guid="2ba84d29-e02f-4344-8bdc-a5a316da39db"
>aTime != 1023</PreCondition></PreConditions>
<Expression>MessageTypes.TimeResolution( time =&gt; aTime )</Expression>
</Case><Case
 Name="Otherwise"
 Guid="b68c305d-998e-4238-b962-6819d1dcdf6d"
>
<Expression>BaseTypes.Time.NA</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="AckStopsDisplay"
 Guid="679873f0-1895-478d-8525-296904f5c9b7"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="202c3a6f-6ecc-4387-b998-878b25644ef9"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df9a1121-8b6e-4b9e-9a37-e27cc12da96a"
>
</ReqRef><Comment>Indicates whether the driver confirmation is required for the given message and if the driver confirmation stops the display.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="e23e03e6-adf8-408f-b355-9733693629db"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Value"
 Guid="a57265a7-17c6-4419-aa3d-930a74f96034"
>
<Expression>aMessage.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired
  AND
aMessage.AckStopsDisplay</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="560"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="AckConditionSatisfied"
 Guid="a879e3f7-5130-4a2d-bc62-9a28890b6f52"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="54e27f5d-95c4-418e-8f53-369969ff0d49"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c8e33e28-76e3-4635-9a85-a6679a11ebfd"
>
</ReqRef><Comment>Indicates if the acknowledgement condition is satisfied. The function returns true either if no acknowledgement is required for that text message or if the acknowledgement is required and the driver has acknowledged.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="11dc7828-23b2-41d8-be35-487b88798559"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="No ack required"
 Guid="df44889a-a863-47e0-a4aa-5388d84eb780"
>
<PreConditions>
<PreCondition
 Guid="e3518408-0c8e-46d4-86e2-e78a9008caca"
>aMessage.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired</PreCondition></PreConditions>
<Expression>aMessage.IsAcknowledged</Expression>
</Case><Case
 Name="Otherwise"
 Guid="b269257a-1e56-4083-9361-7e46018b7138"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="620"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessageCanBeStored"
 Guid="5b39b812-fdff-4c99-be28-2efe90eca8de"
>
<ReqRef
 Id="e9319440-d575-4bbf-bea7-8925fa17233e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75853590-61e3-409c-86b3-bffc19750935"
>
</ReqRef><Comment>Indicates whether the received plain text message has to be stored or rejected. A message has to be rejected if it requests to report the driver&apos;s acknowledgement to the RBC and if another message with the same request has already been stored and not acknowledged.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES.Message"
 Name="aMessage"
 Guid="21adae7b-1438-412c-ab62-a3a017e37edd"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Report to RBC required"
 Guid="33a0bf10-7dca-417d-af24-f62e917f8799"
>
<PreConditions>
<PreCondition
 Guid="7417bb9a-c933-4506-9cfe-e221a779e244"
>aMessage.Q_TEXTCONFIRM == Messages.Q_TEXTCONFIRM.Confirmation_required</PreCondition></PreConditions>
<Expression>FORALL Msg IN PlainTextMessages | Msg.ReportInformation.TextId != aMessage.NID_TEXTMESSAGE
  AND
FORALL Ack IN DMI.IN.Acknowledgements.Acknowledgements | Ack.PlainTextMessage.ReportInformation.TextId != aMessage.NID_TEXTMESSAGE</Expression>
</Case><Case
 Name="Otherwise"
 Guid="44e2256c-226f-4cc7-887b-6338ed97cc20"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="730"
 Y="0"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessageCanBeStored"
 Guid="895eed2e-7eb5-4c7f-a3d3-ce709df5831d"
>
<ReqRef
 Id="e9319440-d575-4bbf-bea7-8925fa17233e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8a953014-f0f6-4f33-a579-b965388476c5"
>
</ReqRef><Comment>Indicates whether the received fixed text message has to be stored or rejected. A message has to be rejected if it requests to report the driver&apos;s acknowledgement to the RBC and if another message with the same request has already been stored and not acknowledged.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_FIXED_TEXT_MESSAGES.Message"
 Name="aMessage"
 Guid="457c8218-a0a0-49fb-a986-0114bfa63296"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Report to RBC required"
 Guid="81fccd2c-7e77-4f1f-808b-5aaf932a69c1"
>
<PreConditions>
<PreCondition
 Guid="65fb36fe-288d-4274-aa03-50271e5a5984"
>aMessage.Q_TEXTCONFIRM == Messages.Q_TEXTCONFIRM.Confirmation_required</PreCondition></PreConditions>
<Expression>FORALL Msg IN FixedTextMessages | Msg.ReportInformation.TextId != aMessage.NID_TEXTMESSAGE
  AND
FORALL Ack IN DMI.IN.Acknowledgements.Acknowledgements | Ack.FixedTextMessage.ReportInformation.TextId != aMessage.NID_TEXTMESSAGE</Expression>
</Case><Case
 Name="Otherwise"
 Guid="f3f8ac10-1a68-43ec-8ec8-4967c1d72c27"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="FixedTextMessagesCol"
 Default=""
 X="730"
 Y="120"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessagesToDisplay"
 Guid="b79a50de-099d-4444-999e-f82fa3ea9f14"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86fda9a5-1997-4cd9-8c47-807f379089e4"
>
</ReqRef><Comment>Provides the list of fixed text messages that have to be displayed to the driver, i. e. the messages for which the display start condition is satisfied and for which either no acknowledgement is needed, or the driver has already acknowledged them.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="9761b34e-39e7-4006-8c0c-e37c517f2ea3"
>
<Expression>MAP
  FixedTextMessages |
    StartConditionSatisfied (aMessage)
      AND
   ( aMessage.DriverConfirmation == DriverConfirmationEnum.NoConfirmationRequired
      OR
    aMessage.IsAcknowledged)
USING aMessage
IN aMessage</Expression>
</Case></Cases>
</Function><Function
 Type="PlainTextMessagesCol"
 Default=""
 X="620"
 Y="120"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessagesToDisplay"
 Guid="f71c8efb-464c-4cfd-a7d3-cbf904ccad32"
>
<ReqRef
 Id="490417f6-e82d-4b6a-9740-a42c28b1acda"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1a8712d6-2d28-4076-9700-22bf7341ae3d"
>
</ReqRef><Comment>Provides the list of plain text messages that have to be displayed to the driver, i. e. the messages for which the display start condition is satisfied and for which either no acknowledgement is needed, or the driver has already acknowledged them.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="70fd9d00-645c-498a-aee0-788a42bbc8cb"
>
<Expression>MAP
  PlainTextMessages |
    StartConditionSatisfied (aMessage)
      AND
   ( aMessage.DriverConfirmation == DriverConfirmationEnum.NoConfirmationRequired
      OR
    aMessage.IsAcknowledged)
USING aMessage
IN aMessage</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="EndLevelConditionSatisfied"
 Guid="09ec9ba6-3234-4bb0-b63a-66b8b4808096"
>
<ReqRef
 Id="87d5613b-8da1-42cf-8b12-597d82ffe263"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6338ba69-a734-499d-9328-831c2e1f0755"
>
</ReqRef><ReqRef
 Id="b7edc2b7-4bf2-4608-ae3f-df5b9ddaa39e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ae0c6483-dc97-4775-acb5-a52d96f78850"
>
</ReqRef><Comment>Indicates if the start condition related to the level is satisfied, i.e. the onboard level is different from the value specified in the message.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="b2ba944d-5b4f-4427-a2a3-05799977149f"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Not yet displayed"
 Guid="637e7333-da44-4a36-ba1c-b0ef16afc9e8"
>
<PreConditions>
<PreCondition
 Guid="8572f235-2252-419f-8bc6-ae2f78b1aecd"
>aMessage.DisplayStartTime.Timer == BaseTypes.Time.NA</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Level condition defined"
 Guid="ecfbcdd3-e6c3-44b6-a36c-a09dfb80a900"
>
<PreConditions>
<PreCondition
 Guid="73eba601-52bc-4ff8-a59d-5f915501ea76"
>aMessage.EndLevelCondition.IsLimitedByLevel == True</PreCondition></PreConditions>
<Expression>Kernel.Level.Value != aMessage.EndLevelCondition.Level</Expression>
</Case><Case
 Name="Otherwise"
 Guid="152cba5b-8eff-4741-9686-35280a818553"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="500"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="EndModeConditionSatisfied"
 Guid="afb48bd3-f5e0-48e8-89b1-c6e257d239e0"
>
<ReqRef
 Id="498ad2ad-2817-404e-b61d-20ec57c5d991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ec93487b-e71c-41bc-ba16-87c7f1098ec3"
>
</ReqRef><ReqRef
 Id="ce94f233-495d-4058-a149-705b10f330a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d2345629-ccbe-4e7b-aa9c-1c99730de229"
>
</ReqRef><Comment>Indicates if the start condition related to the mode is satisfied, i.e. the onboard mode is different from the value specified in the message.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="445b637a-693a-4b0a-a734-d1558320ed30"
>
</Parameter></Parameters>
<Cases>
<Case
 Name="Not yet displayed"
 Guid="77256fad-da77-4e01-aaae-eb728a84201a"
>
<PreConditions>
<PreCondition
 Guid="c3905046-e763-4682-97e6-e66f204773cb"
>aMessage.DisplayStartTime.Timer == BaseTypes.Time.NA</PreCondition></PreConditions>
<Expression>False</Expression>
</Case><Case
 Name="Mode condition defined"
 Guid="8778cea8-7482-47c7-b319-09e47780ff40"
>
<PreConditions>
<PreCondition
 Guid="a7192745-6eae-4049-b3f1-6cb63c3016d9"
>aMessage.EndModeCondition.IsLimitedByMode</PreCondition></PreConditions>
<Expression>Kernel.Mode != aMessage.EndModeCondition.Mode</Expression>
</Case><Case
 Name="End condition"
 Guid="36f1d65e-e34e-4617-86da-ea005efa8d1a"
>
<Expression>True</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="620"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessageReceived"
 Guid="275a98d7-f170-4fdd-9b84-9e8d31de9dc1"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="92a3607d-7a19-491c-9d34-8fa3a074d836"
>
</ReqRef><ReqRef
 Id="13227255-d959-4724-9371-31427e4538a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89a74b9a-5ed9-4600-9072-0f0417770732"
>
</ReqRef><ReqRef
 Id="e9319440-d575-4bbf-bea7-8925fa17233e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b0c300ba-e931-452a-854f-03e418ff46c8"
>
</ReqRef><ReqRef
 Id="ffdc9150-a628-4750-a762-a41c20c3dd26"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bcb89ea7-1ce5-49a8-8b51-7e8a68e94043"
>
</ReqRef><ReqRef
 Id="67c0ab2b-17af-47e9-b8f6-322caf6c7bdf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d620b96e-62cc-4792-8ee8-ae195930307d"
>
</ReqRef><ReqRef
 Id="2756e35e-8821-4ea1-b357-f59f62a8ff5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ab0a60e3-cd37-4859-8344-3d271a29ed13"
>
</ReqRef><ReqRef
 Id="421b1ec9-4fb4-4b14-9e6d-498fccd32eee"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5e86f5cb-265b-4148-bf29-5b7c344c12f4"
>
</ReqRef><ReqRef
 Id="7287a160-b4b5-453b-af0e-c36f019a289e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="278f8b21-ae2a-4fbb-bf6f-ac6e67a48726"
>
</ReqRef><ReqRef
 Id="6c2271aa-b854-4ce6-ba1f-4892e06164b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="08aa8243-d1f1-482a-b696-26f70421c85f"
>
</ReqRef><Comment>Handles the reception of a plain text message.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_PLAIN_TEXT_MESSAGES.Message"
 Name="aPacket"
 Guid="681ee632-05ca-4fdf-a52f-2de3e1701cb3"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="143aebd2-185a-4b41-be6a-3e7b7388830e"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Store the text message"
 Guid="20e77048-8865-4da0-be21-15cd731bfa10"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Store the text message"
 Guid="169d5c45-5275-4754-b311-c7012c7be25a"
>
<PreConditions>
<PreCondition
 Guid="b1290752-fbf7-4a7f-887d-4a0e3eee00b5"
>PlainTextMessageCanBeStored ( aMessage =&gt; aPacket )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d6061559-c7de-402a-af86-fd675cfe5e2a"
>INSERT
  CreatePlainTextMessage( aPacket =&gt; aPacket, aDistanceFromRef =&gt; aDistanceFromRef )
IN
  PlainTextMessages</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="System Version X = 1"
 Guid="fa27e83f-9d2e-4417-a918-fb26ead17511"
>
<ReqRef
 Id="4711bf7f-fcec-4b8d-812e-13af28894835"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd0699d8-997b-476a-be44-504306fdbc0a"
>
</ReqRef><Comment>Implementation of 6.6.2.1.1: while the main operated system version is 1, i.e. no communication with RBC, acknowledgement of text message by driver should end display.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="System Version X = 1"
 Guid="89581ac5-3897-41e3-bcd0-9ab7b793b295"
>
<PreConditions>
<PreCondition
 Guid="de543213-b8a6-47e2-97ca-19272b4de9d7"
>VersionManagement.MainVersionFromDetailledVersion(VersionManagement.OperatedSystemVersion) == VersionManagement.SystemMainVersionEnum.Version1</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2c5e1c77-1a11-4b96-97ae-e81217f0c08f"
>APPLY ForceAckStopsDisplay_PT(X) ON PlainTextMessages</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="730"
 Y="180"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessageReceived"
 Guid="a58baed4-e3b2-4e62-8f60-e4812df7a281"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0dc11e7f-4af1-4637-b986-02f7c49cf738"
>
</ReqRef><ReqRef
 Id="13227255-d959-4724-9371-31427e4538a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd0f7067-f5a1-4c12-9c92-71f834260984"
>
</ReqRef><ReqRef
 Id="ffdc9150-a628-4750-a762-a41c20c3dd26"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="39c91608-7cae-4fc9-909c-29b209ed75d5"
>
</ReqRef><ReqRef
 Id="67c0ab2b-17af-47e9-b8f6-322caf6c7bdf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c9aefa56-e89f-48ee-9046-8f9bce8ad54c"
>
</ReqRef><ReqRef
 Id="2756e35e-8821-4ea1-b357-f59f62a8ff5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c7c482df-9401-435e-a2e6-53d61ee529fb"
>
</ReqRef><ReqRef
 Id="421b1ec9-4fb4-4b14-9e6d-498fccd32eee"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="05b334d8-cc00-4a0c-8bcd-f76ec888ce42"
>
</ReqRef><ReqRef
 Id="7287a160-b4b5-453b-af0e-c36f019a289e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29855b6d-8d06-4e1a-87f5-bf72f9e64353"
>
</ReqRef><ReqRef
 Id="6c2271aa-b854-4ce6-ba1f-4892e06164b4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="468f7db3-66f1-42bc-8084-6bc2c057e8ec"
>
</ReqRef><Comment>Handles the reception of a fixed text message.</Comment>
<Parameters>
<Parameter
 Type="Messages.PACKET.TRACK_TO_TRAIN.PACKET_FOR_SENDING_FIXED_TEXT_MESSAGES.Message"
 Name="aPacket"
 Guid="52663d86-4e35-4bb5-a006-dfe0bcf16055"
>
</Parameter><Parameter
 Type="BaseTypes.Distance"
 Name="aDistanceFromRef"
 Guid="1005fd50-3b16-4daa-abc8-bb092bc28eca"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Store the text message"
 Guid="196cd8b6-6f13-4874-96d7-a9f924e7cf32"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Store the text message"
 Guid="0b558546-a1cc-4b56-a5f7-6f86c0c559bc"
>
<PreConditions>
<PreCondition
 Guid="3eac35aa-977b-47e8-9789-cab4fe1ded6e"
>FixedTextMessageCanBeStored( aMessage =&gt; aPacket )</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f403db65-1f85-45bd-a379-c9f84fe8a63a"
>INSERT
  CreateFixedTextMessage( aPacket =&gt; aPacket, aDistanceFromRef =&gt; aDistanceFromRef )
IN
  FixedTextMessages</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="System Version X = 1"
 Guid="c537dbf1-7f2d-465f-bd96-5143a660b946"
>
<ReqRef
 Id="4711bf7f-fcec-4b8d-812e-13af28894835"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14a7b092-307b-4e2b-943f-0b2ac474612a"
>
</ReqRef><Comment>Implementation of 6.6.2.1.1: while the main operated system version is 1, i.e. no communication with RBC, acknowledgement of text message by driver should end display.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="System Version X = 1"
 Guid="4d451e48-b8ee-4592-82fe-020d1171d4e4"
>
<PreConditions>
<PreCondition
 Guid="b91a7f15-e82f-463f-8e26-3826c13fc022"
>VersionManagement.MainVersionFromDetailledVersion(VersionManagement.OperatedSystemVersion) == VersionManagement.SystemMainVersionEnum.Version1</PreCondition></PreConditions>
<Actions>
<Action
 Guid="fa908987-65db-4023-a66c-dcaf63bb8edd"
>APPLY ForceAckStopsDisplay_FT(X) ON FixedTextMessages</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="620"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="HandleMessagesToDisplay"
 Guid="ddfbdebe-405d-4f7f-9277-c73a128de2af"
>
<ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eeb0b844-077e-4e43-9ba2-72b1684e4ba9"
>
</ReqRef><ReqRef
 Id="e1bf0a62-2681-4f2c-8f34-fa3a6e524889"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="16991282-37cf-4292-a72f-45a3e2d2f286"
>
</ReqRef><ReqRef
 Id="5ad8fb3e-3036-48cb-be27-e3bfe8133b66"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="23651a02-7688-49da-b831-1bb491d211b4"
>
</ReqRef><Comment>Handles display of text messages according to their start and stop conditions.</Comment>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle acknowledgements to display"
 Guid="c02a22dd-1214-4409-bb98-3f9365313e8b"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e9943e70-bae0-4767-a8da-5f81f945b6e3"
>
</ReqRef><ReqRef
 Id="0c454934-381e-4e47-b284-c33802dfdfd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="88ce1d95-fc18-4ee3-8107-f6d58911b46b"
>
</ReqRef><Comment>If there are some messages that can be displayed and need an acknowledgement, an acknowledgement is displayed for all of them.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle acknowledgements to display"
 Guid="38ee7931-4827-41a9-9510-327310fe34e0"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="943b0a9a-3c3a-40ec-8317-ebc2577949a4"
>APPLY
  DMI.MasterDMI().In_AcknOfFixedTextInformation.InitiateRequest( aMessage =&gt; X )
ON
  FixedTextMessages |
    StartConditionSatisfied( aMessage =&gt; X )
      AND
    X.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired</Action><Action
 Guid="5ec84996-aa93-42e1-b878-6b9ca6f8a7fa"
>APPLY
  DMI.MasterDMI().In_AcknOfPlainTextInformation.InitiateRequest( aMessage =&gt; X )
ON
  PlainTextMessages |
    StartConditionSatisfied( aMessage =&gt; X )
      AND
    X.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Delete displayed acknowledgements for which ack stops display"
 Guid="8b2463ca-73c8-4bac-8d50-0ccbc5c9f6e5"
>
<ReqRef
 Id="85357988-d98a-4224-aaee-19357a81c4e4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a70adfae-1282-49c0-8870-ce502314b8a1"
>
</ReqRef><ReqRef
 Id="b78843ae-dd2b-41c1-84e6-8dd1ffe30817"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d09d7f5a-4ce0-4065-a2ce-8237c691b98d"
>
</ReqRef><Comment>Delete all the messages requiring the driver&apos;s acknowledgement and which display is stopped after the acknowledgement.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Delete displayed acknowledgements for which ack stops display"
 Guid="417fae58-f4ce-43f2-a8ec-8c099609feaa"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="8cbb7779-c4e1-4e2a-8ff7-3ac05409ed59"
>REMOVE ALL
  StartConditionSatisfied( aMessage =&gt; X )
    AND
  X.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired
    AND
  X.AckStopsDisplay
IN
  FixedTextMessages</Action><Action
 Guid="ebec2282-7d0d-41c4-8400-843521a7855b"
>REMOVE ALL
  StartConditionSatisfied( aMessage =&gt; X )
    AND
  X.DriverConfirmation != DriverConfirmationEnum.NoConfirmationRequired
    AND
  X.AckStopsDisplay
IN
  PlainTextMessages</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Initialize start display timer for newly displayed messages"
 Guid="eab8140c-3782-48bc-90f9-2cc2310f0a07"
>
<Comment>The display timer is started for messages that become displayed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Initialize start display timer for newly displayed messages"
 Guid="65ab1cbd-974d-40aa-b6a6-f6feb9c344a1"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="ccfbf4f5-2091-4997-b88d-1f9766ea05f7"
>APPLY
  X.DisplayStartTime.StartTimer()
ON
  FixedTextMessages |
    StartConditionSatisfied(aMessage =&gt; X)
      AND
    X.DisplayStartTime.Timer == BaseTypes.Time.NA</Action><Action
 Guid="b7af0711-618c-457e-87a9-1247e171fefb"
>APPLY
  X.DisplayStartTime.StartTimer()
ON
  PlainTextMessages |
    StartConditionSatisfied(aMessage =&gt; X)
      AND
    X.DisplayStartTime.Timer == BaseTypes.Time.NA</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle fixed acknowledged messages"
 Guid="96d55187-3938-49b5-bbfd-d5cbfbdc1d82"
>
<ReqRef
 Id="1a476091-ac8e-4e8a-9c18-42c2882c3cfb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="79204928-5361-4e77-9a3c-3cf5e0e3fcca"
>
</ReqRef><Comment>If an acknowledgement is received for a fixed text message, it is disabled and the corresponding text message is marked as acknowledged.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle fixed acknowledged messages"
 Guid="fe8b099a-6f3e-4aee-849c-6e9b2216d1f7"
>
<PreConditions>
<PreCondition
 Guid="02c197f2-48a2-487f-83e1-600479004548"
>DMI.MasterDMI().In_AcknOfFixedTextInformation.InputInformation.DriverAnswered</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Indicate the acknowledged message as acknowledged"
 Guid="6988a438-1979-4f2a-b4df-a3586dfd4270"
>
<Comment>If the acknowledged message was displayed in the output information, it is marked as acknowledged.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Indicate the acknowledged message as acknowledged"
 Guid="d5afc8e1-1385-45c2-bb89-644091924c2d"
>
<PreConditions>
<PreCondition
 Guid="30a5d1f5-3f32-4abe-9d39-308e4bbd2666"
>THERE_IS aMessage IN FixedTextMessages | aMessage ==DMI.MasterDMI().In_AcknOfFixedTextInformation.Message</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6bbe8a2c-28d2-4f85-aaab-d074e12b5abc"
>(FIRST aMessage IN FixedTextMessages | aMessage == DMI.MasterDMI().In_AcknOfFixedTextInformation.Message ).IsAcknowledged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle acknowledgement report"
 Guid="db333ff8-1a99-439c-85a0-368a2fdff341"
>
<ReqRef
 Id="d24596c8-72fe-40e3-977b-33c6516a16ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d7689d4b-6d8f-44dd-9e49-3cf312ef3933"
>
</ReqRef><Comment>In case the trackside requested to report the driver acknowledgement, the on-board sends a message to the RBC.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle acknowledgement report"
 Guid="e4a42581-b2f8-45a7-b9c9-6fdac0390477"
>
<PreConditions>
<PreCondition
 Guid="1ec488c4-92fa-4579-85da-243e4f5b529f"
>DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.ReportRequired</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d9fcaaac-5dbf-4ce0-8d1f-aa2a5964deb8"
>SendAcknowledgementReport( aMessage =&gt; DMI.MasterDMI().In_AcknOfFixedTextInformation.Message )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle plain acknowledged messages"
 Guid="f93108d5-7530-4ddc-a0f6-67ccb1739e08"
>
<ReqRef
 Id="1a476091-ac8e-4e8a-9c18-42c2882c3cfb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8339fbbf-e284-4284-a193-9e7352d2cdf7"
>
</ReqRef><Comment>If an acknowledgement is received for a plain text message, it is disabled and the corresponding text message is marked as acknowledged.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle plain acknowledged messages"
 Guid="6c822f11-a4ec-4ed2-9c36-46984b3204df"
>
<PreConditions>
<PreCondition
 Guid="2df62722-961f-4c4d-a516-bff5021db628"
>DMI.MasterDMI().In_AcknOfPlainTextInformation.InputInformation.DriverAnswered</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Indicate the acknowledged message as acknowledged"
 Guid="c0baaacd-8cda-4b3a-833f-708752ba0be7"
>
<Comment>If the acknowledged message was displayed in the output information, it is marked as acknowledged.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Indicate the acknowledged message as acknowledged"
 Guid="f3efbd47-a2b1-4f27-9d6b-b063ca558682"
>
<PreConditions>
<PreCondition
 Guid="7a61adec-0d5c-493d-bcbe-030375170dbb"
>THERE_IS aMessage IN PlainTextMessages | aMessage ==DMI.MasterDMI().In_AcknOfPlainTextInformation.Message</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f4722bf6-73a7-442b-ba6c-9a662ff85f63"
>(FIRST aMessage IN PlainTextMessages | aMessage == DMI.MasterDMI().In_AcknOfPlainTextInformation.Message ).IsAcknowledged &lt;- True</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Handle acknowledgement report"
 Guid="a9dd594a-ea6a-47bd-bc1c-37e39d76b549"
>
<ReqRef
 Id="d24596c8-72fe-40e3-977b-33c6516a16ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3abc8cb0-00f8-4ad0-bc10-311e46db9646"
>
</ReqRef><Comment>In case the trackside requested to report the driver acknowledgement, the on-board sends a message to the RBC.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle acknowledgement report"
 Guid="fd138d4f-78ea-4cd6-9060-1e9f9200b3f4"
>
<PreConditions>
<PreCondition
 Guid="b14015b9-9e05-43f3-8ad9-f644bbd521e6"
>DMI.MasterDMI().In_AcknOfPlainTextInformation.Message.ReportInformation.ReportRequired</PreCondition></PreConditions>
<Actions>
<Action
 Guid="942fd3cc-a27e-4e45-9bb2-c28d74423482"
>SendAcknowledgementReport( aMessage =&gt; DMI.MasterDMI().In_AcknOfPlainTextInformation.Message )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Delete messages reached their end condition"
 Guid="e8d85aca-9f88-47d9-b0ab-10eedf1c1f23"
>
<Comment>If the end conditions of displayed messages are satisfied, they are removed.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Delete messages reached their end condition"
 Guid="a771fbbf-b1e1-4f75-adf8-936825c6dba9"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="14229478-941a-4073-8794-660ffeb2e373"
>REMOVE ALL
  EndConditionSatisfied( aMessage=&gt; X )
IN
  FixedTextMessages</Action><Action
 Guid="944d0f12-47e8-4e82-b550-70151be74ac4"
>REMOVE ALL
  EndConditionSatisfied( aMessage=&gt; X )
IN
  PlainTextMessages</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="730"
 Y="300"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="SendAcknowledgementReport"
 Guid="21674b58-1550-4da6-9347-66cb1ad0c861"
>
<ReqRef
 Id="d24596c8-72fe-40e3-977b-33c6516a16ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="598f146e-862d-486e-b49d-600045ec450d"
>
</ReqRef><ReqRef
 Id="8193d565-11c0-4fc4-98f4-e0be84322432"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="8a67d836-5045-4bfa-9294-7120085b147e"
>
</ReqRef><Comment>Sends the text acknowledgement report to the specified RBC.</Comment>
<Parameters>
<Parameter
 Type="TextMessageInterface"
 Name="aMessage"
 Guid="c39ab6f2-0745-46b4-9662-e21dd498ca6b"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 Name="Select the RBC to contact"
 Guid="c3cba9e8-598b-47fe-aa69-644231561c93"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Check the current RBC"
 Guid="c6b3b607-6a57-46ca-bc5a-a3615a1e9228"
>
<Comment>If the specified RBC corresponds to the current connection, send the message to the current connection.</Comment>
<PreConditions>
<PreCondition
 Guid="0f28add5-2175-464e-82c3-2af39cc45dfd"
>EURORADIO.Terminal.HasActiveSession()</PreCondition><PreCondition
 Guid="506b011c-7dba-4b8b-a03f-cc57d1fb0f0b"
>EURORADIO.RBCConnection.CurrentRBCConnection().ContactData.Id.Id == DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.NID_RBC</PreCondition><PreCondition
 Guid="c860e5cf-4b89-4000-8af1-ad07763f9720"
>EURORADIO.RBCConnection.CurrentRBCConnection().ContactData.Id.Country == DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.NID_C</PreCondition></PreConditions>
<Actions>
<Action
 Guid="98639b6d-8ac7-441b-9816-4b6404835d3b"
>EURORADIO.RBCConnection.CurrentRBCConnection().SendTextMessageAcknowledgedByDriver( aTextId =&gt; DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.TextId )</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Check the handing over RBC"
 Guid="8bb1c26d-b314-4789-8cff-d47e323c495d"
>
<Comment>If the specified RBC is the handing over RBC, send the message to the handing over RBC.</Comment>
<PreConditions>
<PreCondition
 Guid="d34fec77-c273-4b0e-bed3-2a3008534b50"
>EURORADIO.Terminal.HasActiveSession()</PreCondition><PreCondition
 Guid="91489dbc-5e98-4a6a-a4ba-6a9fea3af535"
>EURORADIO.RBCConnection.SecondaryRBCConnection().ContactData.Id.Id == DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.NID_RBC</PreCondition><PreCondition
 Guid="e462e0e0-3f7c-4f00-a85c-464901b044f9"
>EURORADIO.RBCConnection.SecondaryRBCConnection().ContactData.Id.Country == DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.NID_C</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a4f5b195-c601-4015-97fd-fe549562c7be"
>EURORADIO.RBCConnection.SecondaryRBCConnection().SendTextMessageAcknowledgedByDriver( aTextId =&gt; DMI.MasterDMI().In_AcknOfFixedTextInformation.Message.ReportInformation.TextId )</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="620"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ForceAckStopsDisplay_FT"
 Guid="d9c86ce4-c9b1-4b10-ab19-a7beb0354ebf"
>
<ReqRef
 Id="4711bf7f-fcec-4b8d-812e-13af28894835"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9fa418a-78e8-49d5-b561-d29e3424895b"
>
</ReqRef><Comment>Internal procedure to help implementation of 6.6.2.1.1 .</Comment>
<Parameters>
<Parameter
 Type="FixedTextMessageStruct"
 Name="aFixedTextMessage"
 Guid="6a7b205f-be5d-486d-8b3a-4f8d029bec02"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SetAckStopsDisplay"
 Guid="e950d994-5f28-4367-b4d8-1ea279a9e7ab"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SetAckStopsDisplay"
 Guid="88a38242-d677-4d56-a4c4-50507cb0b798"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="4f1795d3-0a52-4b18-ae4b-9b3814c2a220"
>aFixedTextMessage.AckStopsDisplay =&gt; True</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure><Procedure
 X="730"
 Y="240"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="ForceAckStopsDisplay_PT"
 Guid="fdcb4b85-11f0-4df6-973e-f0cedb5295ab"
>
<ReqRef
 Id="4711bf7f-fcec-4b8d-812e-13af28894835"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f4f7c3bf-b41a-40f0-91a5-8cceb0c84d68"
>
</ReqRef><Comment>Internal procedure to help implementation of 6.6.2.1.1 .</Comment>
<Parameters>
<Parameter
 Type="PlainTextMessageStruct"
 Name="aPlainTextMessage"
 Guid="ca86eea8-4632-4ee7-9996-23feb4d2d294"
>
</Parameter></Parameters>
<Rules>
<Rule
 Priority="Processing"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SetAckStopsDisplay"
 Guid="d65731cb-e796-498a-97a4-1b3544d09fb2"
>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SetAckStopsDisplay"
 Guid="cb29519a-ed5b-4947-bbf6-1d7188336ad1"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="712223a2-ec22-442c-8623-2b9fec12dc41"
>aPlainTextMessage.AckStopsDisplay =&gt; True</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="FixedTextMessagesCol"
 VariableMode="Internal"
 X="340"
 Y="360"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="FixedTextMessages"
 Guid="4c456f5c-d7f1-4309-abe9-14b3f421d702"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ed68fc3c-9457-4fe5-bf38-f1fa8868e699"
>
</ReqRef><ReqRef
 Id="85fef952-5e74-4514-b7d4-1c70f23587c0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f102a695-6bde-44f7-9314-6d56788250d7"
>
</ReqRef><ReqRef
 Id="52943307-1c06-4cc3-94d3-f778ce8dd8d6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3d6185f4-4bdc-4a2a-b3bf-00880bc29aad"
>
</ReqRef><ReqRef
 Id="67c0ab2b-17af-47e9-b8f6-322caf6c7bdf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9d5c7c2a-ad76-43ae-b646-361c696d85b8"
>
</ReqRef><ReqRef
 Id="2756e35e-8821-4ea1-b357-f59f62a8ff5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d5bede3b-913e-4546-a05a-7b657599c7ae"
>
</ReqRef><ReqRef
 Id="421b1ec9-4fb4-4b14-9e6d-498fccd32eee"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="062e7562-9e1f-4fdd-ba1a-8bb995151ab9"
>
</ReqRef><ReqRef
 Id="7287a160-b4b5-453b-af0e-c36f019a289e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef98e188-eecf-4a9d-9800-3512df470cc0"
>
</ReqRef></Variable><Variable
 Type="PlainTextMessagesCol"
 VariableMode="Internal"
 X="140"
 Y="360"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="PlainTextMessages"
 Guid="3834be14-4de9-414b-9454-865dd7c59fa3"
>
<ReqRef
 Id="c3338b70-b8f1-4525-ae95-a94e1b92981b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3c9d8979-8aad-432e-95b7-d55447adb218"
>
</ReqRef><ReqRef
 Id="cc1f66d4-6eec-4fe4-a302-2e6287ccb3f0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d8b87722-17b9-4490-9ddc-d9fdf463427c"
>
</ReqRef><ReqRef
 Id="2b4cc227-208a-49c5-8f4c-a566e7eac74b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5fda2852-6daa-4804-8073-50b8daeedcef"
>
</ReqRef><ReqRef
 Id="67c0ab2b-17af-47e9-b8f6-322caf6c7bdf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7f71982b-f19b-4229-ad0e-dffb88a4ff5e"
>
</ReqRef><ReqRef
 Id="2756e35e-8821-4ea1-b357-f59f62a8ff5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ff680376-8d3d-4405-8503-95f9af1c061c"
>
</ReqRef><ReqRef
 Id="421b1ec9-4fb4-4b14-9e6d-498fccd32eee"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf54368c-322c-46ed-a272-1d662a7ed684"
>
</ReqRef><ReqRef
 Id="7287a160-b4b5-453b-af0e-c36f019a289e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="612d4c3e-4c5c-46ec-b15c-578de44ab007"
>
</ReqRef></Variable></Variables>
<Rules>
<Rule
 Priority="Processing"
 X="10"
 Y="360"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Handle messages to display"
 Guid="66739137-2cf8-43e9-9b17-4cf49d353c40"
>
<ReqRef
 Id="a0ee7e6f-9f66-49f1-bc16-d37d227fcf23"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2f959a03-116a-4a44-947e-e9f3179e1949"
>
</ReqRef><Comment>Calls the procedure handling the display of stored text messages according to their start and stop conditions.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle messages to display"
 Guid="b4401b93-a7e2-49bd-bd8e-26e9dbb08951"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="7bdc1966-b6b3-4489-9947-b1e9b22347d2"
>HandleMessagesToDisplay()</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
