<NameSpace
 X="20"
 Y="180"
 Width="100"
 Height="50"
 Pinned="TRUE"
 Name="ModeTransitions"
 Guid="19ea2d70-2e6d-45f4-9d4f-bf0d09e19e4c"
>
<NameSpaces>
<NameSpaceRef
 Name="ModeRules"
 Guid="5d559919-0d74-489e-bbe4-8fd114cd0981"
>
</NameSpaceRef></NameSpaces>
<Functions>
<Function
 Type="Boolean"
 Default=""
 X="340"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition12"
 Guid="bcb91233-195e-4a1f-81f8-aaa28ae8781a"
>
<ReqRef
 Id="2b6813e2-5be1-4f47-8f56-d6f4b4839fa9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b5097fd-0b9e-4ebc-bdf5-2a8178756bf7"
>
</ReqRef><ReqRef
 Id="9a2c09f8-7df9-4251-9530-ae098d435bc9"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="f072b690-9a94-4193-bb25-7519a0fe1a2a"
>
</ReqRef><ReqRef
 Id="858a955b-8eb5-4eac-b52e-49723ffd3d9b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e6bc2468-e58d-426a-a30f-31f96e91a5ee"
>
</ReqRef><ReqRef
 Id="f27f67c3-6ff7-425e-8ab3-f3eb40f14326"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86996d80-ce44-4067-9ed0-2f5b712fa8ac"
>
</ReqRef><Comment>Returns True if:
  - the min safe antenna position overpassed the EOA/LOA
  - the current ERTMS/ETCS level is 1.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="22a0bb96-bcae-458d-b8bf-a1c3c98628db"
>
<Expression>Kernel.TrainPosition.Position.DataState == DataStateEnum.Valid
  AND
MA.EOA.EOA().Location &lt;= BTM.AntennaDistance ( DistanceIntervalEnum.Min )
  AND
Kernel.Level.Value.Value == Default.LevelEnum.L1</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition13"
 Guid="0f0cab76-ea06-4831-a0a6-68559f0758e4"
>
<ReqRef
 Id="7e726e84-9124-4cde-8f01-c55138340476"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4fe9df59-e2d7-4d18-8f4c-d1839a59642e"
>
</ReqRef><ReqRef
 Id="ecdd4d2a-94b2-405c-bdd5-a4f4050fb58d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d412659-fd9e-428e-a1a4-ff689bb953fb"
>
</ReqRef><Comment>Returns True if the on-board equipment has detected a fault that affects safety.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="8b201671-d6a9-4381-9ead-0282a8f9b60d"
>
<Expression>THERE_IS SafetyCriticalFault IN Kernel.SafetyCriticalFaults | Kernel.FaultIsUrgent(SafetyCriticalFault.Fault)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition10"
 Guid="0c593dc0-ca60-4992-aad3-3318fbbe5361"
>
<ReqRef
 Id="a2147db3-32c3-44f2-80c8-fdb4a6002046"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="209032bf-8368-4395-8f9a-8a9c9ff44ffd"
>
</ReqRef><ReqRef
 Id="9055a6b1-6135-49e8-a779-622b3270c280"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ce8fbba7-53b4-4089-b872-bedd87d44635"
>
</ReqRef><ReqRef
 Id="1ddf180b-6ef1-4795-94bd-116943f8ce63"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="68627c09-0112-462b-8426-20956a12e8f3"
>
</ReqRef><ReqRef
 Id="c610a0e4-7479-4ceb-8944-e767ebd408b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1141146b-6008-4245-a46d-b2b4dac2db29"
>
</ReqRef><ReqRef
 Id="1bfba96f-abb7-44aa-a403-719474913d61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="303fa28c-970d-47c9-8f84-de1b4a3d1ad6"
>
</ReqRef><Comment>Returns True if:
  - valid train data is stored on-board
  - there is a MA with SSP and gradient information
  - the mode profile does not require any specific mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="782ed2a5-97a0-4ee0-9858-d1769d06efec"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S21.MARequestSent
  AND
Available ( Kernel.MA.MA )
  AND
NOT Kernel.MA.ModeProfile.ModeProfileIsApplicable()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition11"
 Guid="6f0ab94b-f7a8-47a1-915e-f5029a66fb6e"
>
<ReqRef
 Id="6bf92a01-d19d-4867-9f1b-7e94b5b8b7fa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e65e2b0a-0e49-44ae-b12f-c734701d0453"
>
</ReqRef><Comment>(No rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="193a8c06-055d-41fa-a1be-34b4d11dfa31"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition16"
 Guid="53302d38-c67d-434c-b6d8-6517586a50e4"
>
<ReqRef
 Id="df89284e-0f00-4a16-9016-6216db952f74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="092b1815-9aa5-4781-a435-b87b3cc1e2cc"
>
</ReqRef><ReqRef
 Id="1da03f20-a99e-4472-aa18-712448e84434"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="65c1e797-e8b8-42d6-a327-2a9d8b5b8cec"
>
</ReqRef><ReqRef
 Id="9a2c09f8-7df9-4251-9530-ae098d435bc9"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="0eb3a4a7-4cf8-4633-87ee-d2b21acd0bc9"
>
</ReqRef><ReqRef
 Id="f27f67c3-6ff7-425e-8ab3-f3eb40f14326"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44442b67-dfd4-43ea-8a1a-6b56199adbba"
>
</ReqRef><Comment>Returns True if:
  - the min safe front end overpassed the EOA/LOA
  - the ERTMS/ETCS level is 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="f95451bd-ad23-4a43-a7d5-1cb82f00d693"
>
<Expression>Kernel.TrainPosition.Position.DataState == DataStateEnum.Valid
  AND
MA.EOA.EOA().Location &lt;= Kernel.TrainPosition.FrontEndPosition ( DistanceIntervalEnum.Min )
  AND
Kernel.Level.Value.Value in [Default.LevelEnum.L2, Default.LevelEnum.L3]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition48"
 Guid="d3d8ccc7-efcb-4485-bf89-a2f87b2b1f69"
>
<ReqRef
 Id="2a3017fb-b5d7-48ea-8a4d-7c582ca8ba98"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a1e511a1-bceb-4d58-b557-eb9d89328d5e"
>
</ReqRef><Comment>(no rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="a9adf8dd-65b1-4e42-a231-d331f576c254"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition14"
 Guid="278f6727-f9b8-4966-98e6-d4ce5403406a"
>
<ReqRef
 Id="fcc9f8c8-ec5c-4e6e-a905-d17b3e6c2a14"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="651d8ebd-ff35-4ccf-ad7f-6732ba145d2b"
>
</ReqRef><ReqRef
 Id="705d58b9-e6bf-4033-9442-3c725365f693"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="1fa1fa03-594c-4948-9eda-2a5d57f0fb64"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="90a16cb4-7a74-4593-9c21-ebf3bcd3ee10"
>
</ReqRef><ReqRef
 Id="762a9543-7c55-4a02-947b-aee9c3570c30"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e227ee35-609a-43eb-b8a8-ea496ba41f10"
>
</ReqRef><Comment>Returns True if:
  - &quot;Sleeping&quot; input was received
  - the train is at standstill
  - all desks are closed.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="55b0dfe4-4ca4-4645-9720-0fac06f7a853"
>
<Expression>TIU.SleepingRequested
  AND
Odometry.TrainIsAtStandstill()
  AND
DMI.DesksAreClosed()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition15"
 Guid="f3ce7fab-8fc0-4dfb-b453-8545302f369f"
>
<ReqRef
 Id="7a006572-8e75-4e6b-be5e-b096bfa7f855"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5729e867-29ae-41aa-ba1a-05e386470bbe"
>
</ReqRef><ReqRef
 Id="ee3fda90-8914-4b80-8367-51faabd4f1b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c7a04ea-4151-4e1b-8c00-380098de4b0a"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="859e6a8b-c7c5-417e-a5df-d29da9100b1b"
>
</ReqRef><Comment>Returns True if the driver has acknowledged a request for OS mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="21f2c88e-bf50-4354-938f-346f4cd8306f"
>
<Expression>DMI.MasterDMI().In_AcknOfOSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition9"
 Guid="91a1cd64-945f-4e92-acc1-d881f38da32f"
>
<ReqRef
 Id="0400928c-85ba-45bd-8b2d-5785fd0af672"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2fc64d71-37b5-455f-b5b2-f43460df7e9e"
>
</ReqRef><Comment>(no rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="7aa8a2b3-d91d-4cc5-be43-117e4225ed06"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition73"
 Guid="b9854357-3975-4acc-8a77-a10aaa1acd77"
>
<ReqRef
 Id="f847ed7d-cbee-45e0-99ec-69646864f621"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbabef2d-a279-43b3-8fb2-1bad65e0211f"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="976f58be-4ad2-47a0-a3f3-c8b69f8dbe80"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="31c44e7c-d474-4324-a8a8-b531840191d7"
>
</ReqRef><ReqRef
 Id="de18f207-08ba-467b-a877-d3c5a458123d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fda7b0ed-9929-4be5-81a2-2d9008b43d9b"
>
</ReqRef><ReqRef
 Id="2ef2992f-43ce-4f58-abf6-55560cf910bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c242ebd-c5be-4275-a6f3-9196bef07b8a"
>
</ReqRef><ReqRef
 Id="b0df62a1-a43d-4be0-b113-f95ea62363b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1bb6ba73-08b9-43aa-9c1f-9a2827ee73f9"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="98b22a1e-cd6b-4a4c-bf5e-b2050c1e965b"
>
</ReqRef><ReqRef
 Id="68417b0f-5ef1-4881-8861-1394a76219fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0bd188c0-e4b3-40ff-ae58-acaa303bb835"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for OS mode
  - the max safe front end is in the OS mode area
  - the max safe front end is not in a LS mode area.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="1eb773c0-9cf5-4a53-bb0d-22a83b97659e"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.OS
  AND
NOT
  (
    ( FIRST X IN Kernel.MA.ModeProfile.Profile | X.Mode == ModeEnum.ModeProfile.LS ) == EMPTY
      OR
    Kernel.MA.ModeProfile.AcknAreaReached ( FIRST X IN Kernel.MA.ModeProfile.Profile | X.Mode == ModeEnum.ModeProfile.LS )
  )</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition4"
 Guid="b8147f74-2e2c-4442-88c5-fcf56083b298"
>
<ReqRef
 Id="b144cb88-77c8-4ba0-96b6-b83f713905dd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="09609796-f3a2-4177-a986-8b7331cc7091"
>
</ReqRef><ReqRef
 Id="1f1c9287-1b39-4766-bafc-d7d30df64659"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="95e02140-7865-4510-a9bd-6ffc95743bea"
>
</ReqRef><Comment>Returns True if the ERTMS/ETCS equipment is powered.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="b381425a-dfca-485d-ab40-bb9c589f34f7"
>
<Expression>Kernel.PowerOn == Boolean.True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition1"
 Guid="e252370b-f571-42bb-974c-044f1395958b"
>
<ReqRef
 Id="df71d1ef-a7ee-44b4-839b-8a08ebe2e1c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53e4b25e-f8ad-4b17-bd1e-604420db67c0"
>
</ReqRef><Comment>Returns True if the on-board equipment is isolated.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="fe0a93af-33fa-4a27-87fe-a318d04f3e8e"
>
<Expression>TIU.ETCSIsolated</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition2"
 Guid="4a07a1fa-4a7e-4173-bfa4-d0f3f4737ba4"
>
<ReqRef
 Id="3248d063-94ae-4ea6-b0e5-62e9847fc915"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46f7abcd-4e95-4395-b92a-a6a513ecfeba"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="e374ae6a-8a9e-4625-82c2-9bc4839679ac"
>
</ReqRef><ReqRef
 Id="3489ccc5-90b5-4dc7-8292-6852d91e9f00"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="32b519ee-755a-4cc0-82ad-aa0caebbc742"
>
</ReqRef><ReqRef
 Id="238badc0-b047-419f-b4a8-0f746de05911"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b589f379-6a3e-4b37-9bde-32b25ad46d54"
>
</ReqRef><Comment>Returns True if a desk is open.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e09579e6-4a46-49c6-98c7-5fe5186b2076"
>
<Expression>DMI.DeskIsOpen ( DMI.MasterDMI() )</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition7"
 Guid="e9a32eed-756f-4fc1-b06c-cfa5b3925e0f"
>
<ReqRef
 Id="3d8929cd-3036-4ab6-a142-7e62115e9f72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3ab918c6-2129-4329-ab40-9ae91be2678b"
>
</ReqRef><ReqRef
 Id="e40e00de-e9d3-4dd1-9c51-60ef68b5365b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="09f14641-fd5b-47d9-bdc1-4a41d1045970"
>
</ReqRef><ReqRef
 Id="62231675-226e-4512-bb26-157f534b0300"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0fb9a20-1920-47cc-9803-ae27fc36eaba"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d8065856-a2f4-4d76-98e8-38cdd29e554c"
>
</ReqRef><Comment>Returns True if:
  - the driver has acknowledged the train Trip
  - the train is at standstill
  - the ERTMS/ETCS level is not 0 or NTC.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="668a3759-0bbb-4f98-88c7-e7bd37df6222"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.A105</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition8_PT"
 Guid="a1c5e113-860c-4588-92a0-8977cf12775d"
>
<ReqRef
 Id="67821ca1-b727-417d-bd7e-38b05017910c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="24529762-f793-4c0c-8d79-17c8ae1016d9"
>
</ReqRef><ReqRef
 Id="9061a410-98ec-4e01-86db-9e1ca5b8f777"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="05623018-54fb-4f2c-a3bf-bc286f92e14d"
>
</ReqRef><ReqRef
 Id="5c82bf92-4b63-4853-aa34-f9d3e2648b54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6e191573-3839-469b-be7e-50f486e54a5b"
>
</ReqRef><Comment>Returns True if the driver has acknowledged SR mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="83a0f812-78e9-4627-a91e-440229e33120"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.S160
  AND
DMI.MasterDMI().In_AcknOfSRMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition5"
 Guid="31932239-5a2f-45e4-8144-d71df2751065"
>
<ReqRef
 Id="ba63b58f-37bf-4729-a0d9-c8479e24f8c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eb5dc4d7-bc76-42a6-b82a-abf62037c414"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a3b16dfd-7786-4a2a-9aaf-cc3ef9d6157a"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e733f69-9090-4340-8906-f7dccf8a65b7"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8794aa1b-34bf-419b-bba0-464361cae07a"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6476fcfc-103e-4e3f-8e27-de2fdc04d4bc"
>
</ReqRef><Comment>Returns True if:
  - the train is at standstill
  - the ERTMS/ETCS level is 0, NTC or 1
  - the driver has selected Shunting.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="f5577155-da2c-443e-bcea-b556fd2b327c"
>
<Comment>The condition &quot;driver selects Shunting&quot; is satisfied by the state machine HandleModeChange being in the state ShuntingInitiatedByDriver, since it is only possible to enter that state if the driver selects shunting.</Comment>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.ShuntingInitiatedByDriver.D020
  AND
Kernel.Level.Value.Value in [LevelEnum.L0, LevelEnum.LNTC, LevelEnum.L1]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition6"
 Guid="90b0d6a5-6171-49a4-a987-f80106b6c1d7"
>
<ReqRef
 Id="4aa39e9d-5862-4deb-a36e-6ca050c94dc3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cff7899d-c40c-45b0-84b1-2a263672b6eb"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4076a96b-1a7d-4e27-b8e7-b483bced1b56"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6b70a290-bfcb-454f-8c37-a1ee8f30162c"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ff27ddb8-02c7-4700-8fd9-95cc87c7b359"
>
</ReqRef><Comment>Returns True if:
  - the train is at standstill
  - the ERTMS/ETCS level is 2 or 3
  - &quot;Shunting granted by RBC&quot; is received.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="cb64da1f-7c0d-47cf-b062-b536626b8bce"
>
<Comment>The condition &quot;driver selects Shunting&quot; is satisfied by the state machine HandleModeChange being in the state ShuntingInitiatedByDriver, since it is only possible to enter that state if the driver selects shunting.</Comment>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.ShuntingInitiatedByDriver.S050
  AND
Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]
  AND  
Available ( EURORADIO.Messages.UpdatedReceivedMessage( EURORADIO.RBCConnection.CurrentRBCConnection()).SH_AUTHORISED )</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition47"
 Guid="b73c9970-6414-4676-9699-4121a53052dd"
>
<ReqRef
 Id="17c51f18-919b-4a03-9c81-4ade6a2b7554"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a926b7be-ecf0-4b04-9fd0-ef7123e10084"
>
</ReqRef><ReqRef
 Id="662646fc-0a77-4297-b6f6-7b39dfaae824"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28ae0dda-8c95-4e40-b2c7-17e0cae4f4ba"
>
</ReqRef><ReqRef
 Id="d637f451-65e2-4f3f-af0e-aa6858ee6f29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="db0fd4eb-8e0e-44a2-9ad0-d629f7e691d4"
>
</ReqRef><Comment>Returns True if:
  - no &quot;non leading&quot; signal is received any more
  - the train is at standstill.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="dc9cbe84-19d1-4d8a-aacf-ca499d5c017e"
>
<Expression>NOT TIU.NonLeadingPermitted
  AND  
Odometry.TrainIsAtStandstill()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition50"
 Guid="b43ecb9d-8812-4608-98ba-e6245a240a1b"
>
<ReqRef
 Id="9fc9919d-e281-4a90-94fb-319cb850511a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f1068eea-7246-4d35-9ebe-e66545a0020d"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44990744-4871-42eb-b395-c142e0a6d622"
>
</ReqRef><ReqRef
 Id="ff6538d5-0eef-4940-86fb-edb285ba5066"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ee28ae4b-33c9-4095-8b38-b206a8412794"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4e30b123-72f1-4a5a-b309-31db6bae89d1"
>
</ReqRef><Comment>Returns True if the driver has acknowledged an acknowledgement request for Shunting.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="b7555f56-996d-45f3-a73c-e81f65b75fff"
>
<Expression>DMI.MasterDMI().In_AcknOfSHMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition49"
 Guid="9fed90e2-c3c1-48a8-8fc9-301e96ed0317"
>
<ReqRef
 Id="14b1efda-ce06-4c66-9dbe-9ec337d4879b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9ea25d32-80ec-4ed2-8613-17e9ec34e322"
>
</ReqRef><ReqRef
 Id="2c58a3a1-c451-4832-a446-2e45d7792b9c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="57675279-8b4b-40e2-9900-8b44c36c3232"
>
</ReqRef><ReqRef
 Id="d70520c1-bb18-45b2-a3e6-312149387ee3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="defcf236-084f-4c0d-a1e7-2d5045a6b853"
>
</ReqRef><Comment>Returns True if:
  - &quot;Stop if in Shunting&quot; information is received
  - &quot;override&quot; is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="49817480-d87b-447f-948e-60ae66ca0923"
>
<Expression>Kernel.Modes.Shunting.StopIfInShunting
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition44"
 Guid="b93769bb-3703-48be-9252-578f342e68ae"
>
<ReqRef
 Id="1b1e4f52-5960-48a7-a975-0702583492bc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="327f3d61-c5c1-416b-9a95-e96343e5a703"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ecb119ee-d72c-4134-8d46-a1e6ca25b640"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0fa855f-47b4-400f-842a-bd214a1fec65"
>
</ReqRef><ReqRef
 Id="c8b3f989-1504-46c0-84e3-3b54fdc4e132"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4745d9fc-40d9-4a4a-8e0c-abe373d601f1"
>
</ReqRef><Comment>Returns True if:
  - &quot;override&quot; is active
  - the ERTMS/ETCS level has switched to 1.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="5686c435-0bc4-418f-8e0c-8a3b1ddb1349"
>
<Expression>Kernel.Override.OverrideIsActive()
  AND  
Kernel.Level.Value.Value == LevelEnum.L1</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition43"
 Guid="268b8ff9-0594-450d-8148-9d8e007b0ac9"
>
<ReqRef
 Id="a6eff8c5-d19c-4737-a020-b05ede4aae83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a02526b1-cabe-4dbe-8962-b23f127a152f"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="77e46ecd-3843-43b3-b7ae-379e93c9eee2"
>
</ReqRef><ReqRef
 Id="b5348bb2-ed11-48b7-89f4-8e3118fd396a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f22744ef-5beb-4cc9-a14c-3ef667eb7efb"
>
</ReqRef><Comment>Returns True if:
  - the min safe antenna position overpasses the former EOA (when &quot;override&quot; was activated
  - &quot;override&quot; is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="f213656b-b350-4d20-852b-1d46f86d6e64"
>
<Expression>(
Override.OverrideSupervision.FormerEOA &lt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min)
  AND  
NOT Override.OverrideSupervision.FormerEOAPassed
)
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition46_SB"
 Guid="44894169-9646-4b04-8ea4-2a5bd23dbc4b"
>
<ReqRef
 Id="d0507ada-5b0f-4754-b198-46988a339561"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="58db0cf0-9eb8-4652-94cf-5701cb5e598d"
>
</ReqRef><ReqRef
 Id="2df20d0d-1f50-4e04-aa20-f8d1ab4e0945"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f2fbf471-3d61-4757-b498-c72fe42039b5"
>
</ReqRef><ReqRef
 Id="8d4bca45-40ed-4ff2-9225-d87067e371b6"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="29d4c4b2-c8f5-46db-9f16-b42d61c367fe"
>
</ReqRef><ReqRef
 Id="aba0e684-4967-4fc6-850e-d080a2909bc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7c0e30c6-2cce-46df-9b55-180c4d94e6a1"
>
</ReqRef><Comment>Returns True if:
  - the driver has selected &quot;non leading&quot;
  - the train is at standstill
  - the &quot;non leading&quot; signal has been received
  - the on-board is currently in the Start of Mission procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="5ab0834a-1e43-4826-9306-fca0a46e9034"
>
<Expression>(
  Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S10
    OR
  Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S20
)
  AND
DMI.MasterDMI().In_NonLeadingRequest.InputInformation.DriverAnswered
  AND
TIU.NonLeadingPermitted</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition45"
 Guid="df98bf4a-c177-46e2-b968-d88a3683f292"
>
<ReqRef
 Id="22898522-d4be-403b-909d-f6935f3055ab"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d086ed01-5313-4830-8f01-3dbe10395f97"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14ebe496-f775-4a40-8c87-d2adf9af3fd1"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b7a02818-dcd2-4164-90f0-ba90b91d40ad"
>
</ReqRef><ReqRef
 Id="c8b3f989-1504-46c0-84e3-3b54fdc4e132"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="98baa48d-3585-4ac7-8ea4-a342b2f68570"
>
</ReqRef><Comment>Returns True if:
  - &quot;override&quot; is not active
  - no unconditional emergency stop has been received
  - the ERTMS/ETCS level has switched to 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="6e85bf2e-e3a7-472c-9cea-c751c8b54f03"
>
<Expression>Kernel.Override.OverrideIsActive()
  AND  
NOT THERE_IS EmergencyStop IN Kernel.BrakeCommands.EmergencyStops | (NOT EmergencyStop.IsConditional)
  AND  
Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition51"
 Guid="af768e8f-b913-438e-8123-ed00f9e901f5"
>
<ReqRef
 Id="881a6c5b-57f0-4e73-80fe-3639eed19d7c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="54877547-28b8-401e-94c8-377ac4d6cf8c"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aca13558-4ae1-417a-adbc-8a75c35b424a"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="159b439d-fe4f-40c4-afa5-3de8e2f4e443"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="770ba981-cf6a-4055-a59b-6c96ef7565de"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6fc92a49-1123-4e82-a9dd-6f63d3673173"
>
</ReqRef><ReqRef
 Id="b0df62a1-a43d-4be0-b113-f95ea62363b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e4e09587-00f2-4467-b794-ebe34471222c"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b8ab5ad-d5b5-48af-946b-2de03372bf25"
>
</ReqRef><Comment>Returns True if:
  - a mode profile for Shunting is on-board
  - the max safe front end is in the Shunting area.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="7925ab7e-266b-4384-b1cd-cb12d792c0d6"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.SH</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition61"
 Guid="497757fb-ebd5-42cb-b963-4c1ee60663a0"
>
<ReqRef
 Id="d1166622-728b-44e0-a665-45269727b524"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f35cdb94-bc0c-465a-b741-d25c1b3f5c8f"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b68c147f-b2ba-469c-9e8e-4c72980a64f5"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46bc7528-f12f-4c24-96d0-dd234a3a1bcd"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2ef46568-f79d-4c9f-bfaf-af5027a7816b"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d4426dff-8186-4899-9faa-449c1ddd1f76"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6b0bae48-e3f3-4fa9-9271-2c116db5ded7"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for SH mode on-board
  - the max safe front endis in the SH mode area
  - the ERTMS/ETCS level has switched to 1, 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="539ad9b6-300b-45a9-af0b-9fb73b834b70"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.SH
  AND
Kernel.Level.Value.Value in [LevelEnum.L1, LevelEnum.L2, LevelEnum.L3]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition56"
 Guid="635478a5-0d38-4751-9c96-c6ff6139cb2a"
>
<ReqRef
 Id="81774e69-b973-465d-b033-aa07162c1a2a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="72523e5f-83a8-456b-b37c-6782b4ec9ec2"
>
</ReqRef><ReqRef
 Id="224c9c98-ff18-4605-94ec-0335eed3e6e6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19a709e6-2912-4690-b804-ac74ac079a31"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cfa34a6d-3aa2-4b8b-a2ed-1d400d9f9484"
>
</ReqRef><ReqRef
 Id="ba0e225b-846b-481e-a088-b2b89bf9423a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66dd67f1-3773-49b5-9089-9c8bd9de6349"
>
</ReqRef><ReqRef
 Id="0666dc22-e993-4ffe-ae9f-16b61ec773e5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8695aec9-b07b-4366-8ce7-831a9f0a2dbd"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fb53f1c9-3006-46ab-997c-5c5b304b6a51"
>
</ReqRef><ReqRef
 Id="6135b1eb-f20a-4b39-b050-6402be5707b7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ebad4375-15e7-470e-8d71-ea8bd7ca9ad0"
>
</ReqRef><Comment>Returns True if hte ERTMS/ETCS level switched to NTC.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="ec0576c6-5e8d-4205-8a1a-5c5ee771fd68"
>
<Expression>Kernel.Level.Value.Value == LevelEnum.LNTC</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition59"
 Guid="be1186bf-fbb5-442c-a99b-f125b5bc479e"
>
<ReqRef
 Id="1b5ab328-6634-406b-898a-df7bae662f43"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1772cb93-e711-4b36-afa8-0b293b7dd6c6"
>
</ReqRef><ReqRef
 Id="3145c17a-3e8d-4814-a54e-7c42d2781956"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ec986ead-bf41-4292-9b9d-f55725f56abb"
>
</ReqRef><ReqRef
 Id="bb32ac23-0ea3-44b3-87ec-abfd142d6958"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9a5d909a-c1d1-4d8f-aaba-eff38c6ae07f"
>
</ReqRef><Comment>Returns True if:
  - the train is at standstill
  - the driver has acknowledged reversing.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="d98df1f4-c489-4732-b665-bb23b1217c7e"
>
<Expression>Odometry.TrainIsAtStandstill()
  AND
DMI.MasterDMI().In_AcknOfRVMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition58"
 Guid="dd0537b3-8a7f-4a54-a3b9-5563d045ccdd"
>
<ReqRef
 Id="55044273-5fd0-4917-87ed-9ded7ed255f6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bda25a49-9596-4f10-9482-161a2021594c"
>
</ReqRef><ReqRef
 Id="9a711b7c-ff6b-448c-a9cd-2aa9669899ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a555e009-2131-420a-8a20-e1213464097b"
>
</ReqRef><ReqRef
 Id="e4ffa67a-4fa2-4956-8893-7e3626e80e04"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="076b64c8-72df-44d2-9ff5-70a278f2e0e1"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f71e242-4537-4739-8fb5-116042c4bb2f"
>
</ReqRef><Comment>Returns True if:
  - the ERTMS/ETCS level is NTC
  - the driver has acknowledged SN mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="6e5e5796-8cda-4835-b133-d2ccd6666d77"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S22.DriverAckRequested AND
DMI.MasterDMI().In_AcknOfSNMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition53"
 Guid="cbb87e5a-16e8-4258-9c8e-876d02abfe26"
>
<ReqRef
 Id="6b7808d3-f31f-4866-9957-10fff081a67d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f53438cc-8284-4579-a534-a741f3c75dcd"
>
</ReqRef><Comment>(no rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="b935974f-566a-404a-8b5d-94a83361b642"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition52"
 Guid="30d774f3-2dd5-4a0a-95e5-ca056924c45d"
>
<ReqRef
 Id="1abefeb3-7b1d-42ba-9102-267a6221a5ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b4c189ab-3aca-41d8-8ab5-31a6a9221c21"
>
</ReqRef><Comment>Returns True if:
  - the overpassed balise group was not in the list of expected balises for SH
  - &quot;override&quot; is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="4f1f4ed4-0fdd-445a-b62c-77d11810378b"
>
<Expression>Kernel.Modes.Shunting.UnexpectedBGPassed
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition60"
 Guid="26256a4d-9eed-469b-b64b-7c3e19336817"
>
<ReqRef
 Id="3669199a-18f6-43d9-af2a-740333adccc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c6ed5870-a306-4c90-a423-9df75ce73f5f"
>
</ReqRef><ReqRef
 Id="64b644e8-aaed-41c9-ab84-f81ea4041d54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="227d698d-a2fd-40ed-8374-ee914036fe61"
>
</ReqRef><ReqRef
 Id="bdc170e3-e586-41a7-9483-e63ba019c92f"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="e57a4040-08fa-4069-9dc1-5abea693ee23"
>
</ReqRef><Comment>Returns True if the driver has acknowledged UN mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="9f622278-802e-47ad-880a-609792f0a6be"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S23
  AND
DMI.MasterDMI().In_AcknOfUNMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition54"
 Guid="d57ff110-7152-4909-a2bc-8f0f15c24e18"
>
<ReqRef
 Id="98a5c6ab-1a8f-4522-b2ce-57728dc6df86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="753bc4d6-87c9-4624-9191-3c70f0d6dec6"
>
</ReqRef><ReqRef
 Id="01a39be8-2459-4c78-a817-469f0b6b6748"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="99f88663-7201-4057-ba33-4d460e44a7bf"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8d627100-6d4d-4246-8ee3-0a733e9fd219"
>
</ReqRef><ReqRef
 Id="9a0690ff-e942-464b-82af-67799b46e5c0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="080d74c0-a4d3-412d-91ae-fde0c175d94c"
>
</ReqRef><ReqRef
 Id="bacfa4f9-40d3-4d67-8167-3ebfee36ca47"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3e589a7f-3ddf-4934-b3e7-fea03d8fc6f1"
>
</ReqRef><Comment>Returns True if:
  - &quot;Stop if in SR&quot; information has been received
  - no list of expected balises for SR mode or the list received does not include the overpassed balise group (subcondition excluded if Operated System Version = 1)
  - override is not active.</Comment>
<Cases>
<Case
 Name="Operated System Main Version X=1"
 Guid="494ae54b-7bf5-45d1-b0bc-c1ce2f23c407"
>
<Comment>Clause 6.6.2.2.1, exception to chap4.</Comment>
<PreConditions>
<PreCondition
 Guid="bf12396e-5c6e-4628-94d7-a4474c2d80d6"
>VersionManagement.MainVersionFromDetailledVersion(VersionManagement.OperatedSystemVersion) == VersionManagement.SystemMainVersionEnum.Version1</PreCondition></PreConditions>
<Expression>Kernel.Modes.StaffResponsible.StopIfInStaffResponsible
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case><Case
 Name="Value"
 Guid="7df588b1-7b61-44ff-b4c0-8cef08b7afe0"
>
<Expression>Kernel.Modes.StaffResponsible.StopIfInStaffResponsible
  AND
(
  NOT Kernel.Modes.StaffResponsible.SRAuthorisation.BGListReceived
    OR  
  Kernel.Modes.StaffResponsible.UnexpectedBGPassed
)
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition42"
 Guid="e4a0c0be-ab8f-406f-96c9-80087a307ec9"
>
<ReqRef
 Id="7f0cccdd-1753-4525-bda2-f82e896b7ce0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ca7ef8b-943c-4251-97e7-65d723eb816a"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc49f95e-ff5b-4149-9355-badfc37c8a0a"
>
</ReqRef><Comment>Returns True if:
  - the estimated front end passes the SR distance
  - &quot;override&quot; is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="d38d55bd-0075-453f-9c99-d47d90b65f9d"
>
<Expression>Kernel.TrainPosition.DistanceRunInSR(DistanceIntervalEnum.Nom) &gt; Kernel.Modes.StaffResponsible.DistanceToRun()
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition25"
 Guid="2e5dcd53-c6f0-425c-bf30-391a1b3a7f9c"
>
<ReqRef
 Id="5ddedd84-6871-41d1-9613-4eceb6d69872"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6cb1ff4e-5240-4406-8fa7-5263aaf383fd"
>
</ReqRef><ReqRef
 Id="c610a0e4-7479-4ceb-8944-e767ebd408b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5f71d549-b676-40f7-b79c-9a8628c59323"
>
</ReqRef><ReqRef
 Id="1bfba96f-abb7-44aa-a403-719474913d61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56e4051a-f0f4-4491-888a-4a94a8f9c388"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e5a6553-8a12-4cdb-aae3-5177f869ee6e"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f7c6d2af-12b9-4145-9914-12c2be310fff"
>
</ReqRef><Comment>Returns True if:
  - the ERTMS/ETCS level has switched to 1, 2 or3
  - there is a MA with SSP and gradient information
  - the mode profile does not require a specific mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e1e5a254-55f8-496c-8269-0f2331f0b6f2"
>
<Expression>Kernel.Level.Value.Value in [LevelEnum.L1, LevelEnum.L2, LevelEnum.L3]
  AND
Available ( Kernel.MA.MA )
  AND
Kernel.TrackDescription.StaticSpeedProfile.SSP != []
  AND
TrackDescription.Gradient.Gradients != []
  AND
Kernel.MA.ModeProfile.Profile == []</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition24"
 Guid="05798cc9-6f10-4368-9b63-5b06deb82cf4"
>
<ReqRef
 Id="6239e329-0f28-442b-921e-984e25578b32"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="78ea9819-a639-4645-a3df-81b854b597a7"
>
</ReqRef><Comment>(no rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="72186606-fb0c-46be-b268-aa3f4e6429f9"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition23"
 Guid="a9a500fb-b73f-4316-b1f2-e9762eeebbc2"
>
<ReqRef
 Id="854de651-e288-44ca-ac32-2092b1ef5c86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7ab6aecd-e4d0-4b43-8f55-3faa56ad06fb"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="b54fc244-c2e4-4dad-86d1-c4c7a8429e4a"
>
</ReqRef><ReqRef
 Id="5f4831dc-11e2-40f0-b7fe-d48e5a41c5e1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6e118b52-5c73-4d15-85cd-c3aff8db5daa"
>
</ReqRef><ReqRef
 Id="b101c43f-e73c-4f94-9ee0-c21f49d37520"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5dae8b2d-c9f3-4a61-878b-d72be4122d75"
>
</ReqRef><ReqRef
 Id="796a1b6d-6f3e-4983-b877-eadd0a1f1499"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="483e5313-4190-468c-bde0-761bf5955fd3"
>
</ReqRef><ReqRef
 Id="45346988-48b3-4cb1-9db8-68a93d916895"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c43e8e82-0b1d-492a-bb50-e8db7aa33498"
>
</ReqRef><Comment>Returns True if:
  - a desk is open
  - the &quot;Stop Shunting on desk opening&quot; information is absent.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="4deb44d5-7aaa-4f8a-a3f3-80141bb2b686"
>
<Expression>DMI.DeskIsOpen ( DMI.MasterDMI() )
  AND
NOT Kernel.Modes.Shunting.StopShuntingOnDeskOpening</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition28"
 Guid="f7ea8946-42fc-44aa-aa69-768ed6a84a08"
>
<ReqRef
 Id="be813d86-793b-49e5-ae84-eb22743ce71a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6ed8ec43-118d-4791-a43b-9911b1dffa11"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="48173931-4310-48a2-b39c-529975531b77"
>
</ReqRef><ReqRef
 Id="b3b9e862-f9fe-4c98-a6c0-4393e3ce2340"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="35d92b22-9a06-44c4-bd7e-2bf210c32cdf"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef864116-7e3b-4199-ab9b-eadf12a608cf"
>
</ReqRef><Comment>Returns True if the desks are closed.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="76429653-d3ad-4c36-808b-03c2a9edf2d5"
>
<Expression>DMI.DesksAreClosed()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition27"
 Guid="a3861caa-67bc-4b5d-88b4-d284b82c2a63"
>
<ReqRef
 Id="2695652b-30cd-4582-8306-64d14e50dc79"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="20114331-483d-418c-b78e-b06472ca99b9"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="49518805-9647-455a-acb0-222c5aade4a6"
>
</ReqRef><ReqRef
 Id="d40945cf-a283-481c-b33d-a666a705fbf4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="219068ee-e328-4733-891b-63a5920ddd34"
>
</ReqRef><Comment>Returns True if:
  - the desks are closed
  - the &quot;Continue Shunting on desk closure&quot; function is inactive.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="9e0b8659-9489-4799-b474-44713d11b2ad"
>
<Expression>DMI.DesksAreClosed()
  AND
NOT Kernel.Modes.Shunting.ContinueShuntingOnDeskClosure</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition26"
 Guid="8b417016-7e78-479c-bef1-c5a7f46be15d"
>
<ReqRef
 Id="b630705b-2851-4efe-b023-a26113425740"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7c5d2cbe-8375-437d-bbab-528dba4f731f"
>
</ReqRef><ReqRef
 Id="df56552b-73ea-4617-bea7-d04ca4234fc4"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="9481cec6-b798-4efd-8bdd-5c07347040f7"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="aea8ad58-9357-4082-bc14-d17769adf5e2"
>
</ReqRef><ReqRef
 Id="81a6f499-6dd5-437b-a330-35c901d3c002"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fca69cde-b243-452a-bdb5-a2f68a43006c"
>
</ReqRef><ReqRef
 Id="d40945cf-a283-481c-b33d-a666a705fbf4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="de26db90-9125-452e-a8b4-904a918321b3"
>
</ReqRef><ReqRef
 Id="1cd8355b-cc0b-40f9-aa32-323573c96f02"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8cc873e4-b276-4ffb-acbb-60e6f9e298da"
>
</ReqRef><ReqRef
 Id="77f7a3f9-a5a0-4a11-876a-5da84bc879e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b0eff1c-efeb-401b-a068-c65125aaf8f7"
>
</ReqRef><Comment>Returns True if:
  - all desks are closed
  - &quot;Continue Shunting on desk closure&quot; is active
  - the &quot;Passive Shunting&quot; signal is received.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="80000771-c009-4002-bb89-e12ff41b9d10"
>
<Expression>DMI.DesksAreClosed()
  AND
NOT Kernel.Modes.Shunting.ContinueShuntingOnDeskClosure
  AND
TIU.PassiveShuntingPermitted</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition18"
 Guid="3b751aad-8b9f-4eee-a867-f46f5b060126"
>
<ReqRef
 Id="76ef1b92-ab15-437d-b8b0-8c5507716ff8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6cbb0bdf-5040-47e5-871a-bbb28bf546f7"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9d2b7464-6a9a-48a3-add0-898fd26abc84"
>
</ReqRef><Comment>Returns True if:
  - the train has received and accepted a trip order given by balise
  - Override is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="59d96538-41f7-4367-8877-a4782790499e"
>
<Expression>Kernel.SpeedAndDistanceMonitoring.TrainTripped
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition19"
 Guid="423ffb04-39d6-4c19-9b6d-2a4a5bef09b1"
>
<ReqRef
 Id="56fd9a5c-1d1a-4e3e-9dba-401cd3920f5d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="398515c2-6b03-4016-ac5f-a7ab75f60190"
>
</ReqRef><Comment>Returns True if:
  - the driver has selected &quot;exit Shunting&quot;
  - the train is at standstill.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="40ef8477-1d9b-4987-9d49-7ca23018349e"
>
<Expression>DMI.MasterDMI().In_ExitOfShuntingRequest.InputInformation.DriverAnswered AND
Odometry.TrainSpeed() == 0.0</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition22"
 Guid="c845041a-43ac-4077-b76c-6ac7f0b7fe79"
>
<ReqRef
 Id="3f7c6fc5-c683-4475-a2bf-06caf18f87ca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9596304b-046f-4cc3-bd6a-10e571e98e4c"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="28869923-ef8a-4add-a716-00599ff5b52b"
>
</ReqRef><ReqRef
 Id="21668075-c10a-4e08-9120-597a2c9a8ddf"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d6629ed6-a4e1-4dec-895e-4e9e88b3e97a"
>
</ReqRef><Comment>Returns True if:
  - a desk is open
  - the &quot;Stop Shunting on ddesk opening&quot; information is present.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="ceae814f-03ea-4f27-ab95-ad5fdc28bb7f"
>
<Expression>DMI.DeskIsOpen ( DMI.MasterDMI() )
  AND
Kernel.Modes.Shunting.StopShuntingOnDeskOpening</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition21"
 Guid="561e7891-c7b7-4266-9c0b-0c5211edecf6"
>
<ReqRef
 Id="007f9b9f-385a-4b6a-be48-8bf30331950c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fe7baed0-d91c-4553-80c1-46516af1cfbc"
>
</ReqRef><ReqRef
 Id="224c9c98-ff18-4605-94ec-0335eed3e6e6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89998e32-dffa-4fa7-85f1-c495456f97e8"
>
</ReqRef><ReqRef
 Id="ba0e225b-846b-481e-a088-b2b89bf9423a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e88b5fa4-ae6a-4706-98b2-02857973bd5e"
>
</ReqRef><ReqRef
 Id="0666dc22-e993-4ffe-ae9f-16b61ec773e5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="818c0e14-cf2f-4d5c-8def-78d9bd5a3f73"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="13ffc673-4a45-4ca0-868b-0779722b1bed"
>
</ReqRef><ReqRef
 Id="6135b1eb-f20a-4b39-b050-6402be5707b7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cf0c13e9-fc5f-4e47-98c7-32531468b603"
>
</ReqRef><Comment>Returns True if the ERTMS/ETCS level has switched to 0.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="352b596a-a555-4dcb-8e37-9775c7755e6a"
>
<Expression>Kernel.Level.Value.Value == LevelEnum.L0</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition20"
 Guid="4a53780e-7090-4ee3-a79b-9992612a6b15"
>
<ReqRef
 Id="ae3887d8-9de6-4ac1-9187-c809b28d0ff2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="826cc866-4387-4da5-9940-0f2c04063877"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="39fcf35b-6892-4f83-b65e-23b48430ec22"
>
</ReqRef><ReqRef
 Id="a4e2bd0e-5e3f-43c4-ae8d-7de81347dfed"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="d85c216f-92c4-4d0a-9eb2-bf34cd66a227"
>
</ReqRef><Comment>Returns True if an unconditional emergency stop has been accepted.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="eb07c999-d231-4dc5-b70f-9699310621f7"
>
<Expression>THERE_IS X IN Kernel.BrakeCommands.EmergencyStops | (
    NOT(X.IsConditional) 
AND 
    X.Reason == BrakeCommands.BrakeReasonEnum.OrderFromRBC
)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition29"
 Guid="b1a15e3f-483f-455d-bb71-0879aae96f24"
>
<ReqRef
 Id="458a979f-d217-400d-88e6-e28432e25d92"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="06b96fd1-3ea0-46be-a1d5-4576f9a47da4"
>
</ReqRef><ReqRef
 Id="8e0c1f96-45b8-4efd-9014-4237d9bae112"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8e4ee8d8-cdef-4725-a68e-be459fe34aa7"
>
</ReqRef><Comment>Returns True if the ERTMS/ETCS on-board equipment is not powered.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="0838e6c8-b3ca-4297-9442-461c53119f22"
>
<Expression>NOT Kernel.PowerOn</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="250"
 Width="100"
 Height="50"
 Name="Condition38"
 Guid="4efd12f7-edca-4c14-8f4c-866168e2070e"
>
<ReqRef
 Id="4d360803-67ae-4eac-8ac3-370465c9d5d6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a85dfc25-8ecf-4938-817a-07f4779344ec"
>
</ReqRef><Comment>Returns True if:
  - the on-board is interfaced with a National System
  - the ERTMS/ETCS has switched to 0, 1, 2 or 3
  - a National Trip procedure is active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="89098fd0-249b-490a-a89d-04e45b0808f7"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition37"
 Guid="a72d519b-d616-46c1-b834-5be99244b9ab"
>
<ReqRef
 Id="105c2ac3-690d-4d9f-805f-76ae298a3ab7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bface6f2-bee0-476f-9361-2a99c20e2174"
>
</ReqRef><ReqRef
 Id="0882a887-8e70-4391-9d2b-97be7cebd091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c281e1a3-f940-47ba-ab42-ca4f58a3824c"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e5606096-b7d9-4347-8d80-c72394621558"
>
</ReqRef><ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="73b03ee5-8ac4-4708-88c4-441e5fd8f918"
>
</ReqRef><Comment>Returns True if the driver has selected &quot;Override&quot;.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e322a5e8-a872-4bb1-b82a-a30c01a9deb1"
>
<Expression>DMI.MasterDMI().In_OverrideRequest.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition36"
 Guid="1fc690af-dfaa-41dd-b3f3-723422e597f1"
>
<ReqRef
 Id="4194dc47-a12e-4906-99ac-3f43ccf3b796"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f423955-8cdf-4344-b316-0c454cd72d72"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="102f67d5-0682-486a-8823-c8abfcccd1e7"
>
</ReqRef><Comment>Returns True if:
  - unexpected Balise group passed in SR mode
  - not in Override.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="315562f4-6a17-4612-829e-408ee5dbf910"
>
<Expression>Kernel.Modes.StaffResponsible.UnexpectedBGPassed
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition41"
 Guid="b171927f-060b-468d-8c8e-8241fd9aac51"
>
<ReqRef
 Id="05c70ee2-30d1-46d0-b2ee-6a256bc75cd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2c41ef96-2fc4-4f45-b1d0-70aeb02d43be"
>
</ReqRef><ReqRef
 Id="60e39a2f-4380-44e7-bf85-7142748b200f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="91e8810f-2d9c-42b2-9e26-2cb5e2d0df70"
>
</ReqRef><ReqRef
 Id="3d4a4bc1-0bca-4a3b-9856-b6e42e4c9d03"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bb6cfba7-d3d6-4551-a9d1-5e8efc3badb8"
>
</ReqRef><ReqRef
 Id="4aafaa1d-6dad-4116-9c76-919faa0a29e7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75cba4ae-5f9d-4247-8501-b567a286b8e1"
>
</ReqRef><Comment>Returns True if:
  - T_NVCONTACT has been passed
  - the associated reaction is &quot;train trip&quot;.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="0eaca326-aecc-458d-aff0-ebbe0a856138"
>
<Expression>EURORADIO.TrainTripDueToMaxTimeBetweenMessagesExceeded</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition40"
 Guid="972b42f6-c23f-4cb3-88b5-8287638fd18a"
>
<ReqRef
 Id="522c85b9-86d1-4001-8889-a1a4e5ca7c51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f1c6ede9-03f0-4cb3-8a81-5d4671157023"
>
</ReqRef><ReqRef
 Id="2ef2992f-43ce-4f58-abf6-55560cf910bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="283ea363-1032-47d6-8be1-f9f620fb339d"
>
</ReqRef><ReqRef
 Id="de18f207-08ba-467b-a877-d3c5a458123d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e3d9cc6e-c7ac-4483-aaac-f41ff0ed2a8e"
>
</ReqRef><ReqRef
 Id="68290e3a-68aa-485c-9b80-ad0a6da08d3f"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="75230d9c-637d-4731-8943-d8c8d33da805"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="748cdf59-48fd-403e-8504-9b5e54ef9d93"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="78377d1d-1a40-458d-bbd6-72716dbce105"
>
</ReqRef><ReqRef
 Id="68417b0f-5ef1-4881-8861-1394a76219fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0321d4d6-fa26-4dfb-9306-fbf2d3d6d7a5"
>
</ReqRef><Comment>Returns True if:
  - there is a OS mode profile on-board
  - the max safe front end of the train is in the OS area.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="f6fb1fbb-a012-467d-bbeb-28574df97b22"
>
<Expression>Available ( Kernel.MA.MA )
  AND
Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.OS</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition39"
 Guid="9d661590-9c79-4924-8d29-b5fe185a6cee"
>
<ReqRef
 Id="9f7cd9dd-dfd3-4f94-a0de-9aec2ca7834a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7cf058f1-82e1-45ef-8f78-d7682f0f2aa9"
>
</ReqRef><ReqRef
 Id="5ccf76c1-cbde-4d3f-bd38-dfdee972897f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f8192a8b-2d50-4a87-9991-10b90018392b"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="452fa670-1fa7-40aa-9272-bb2f7acc6669"
>
</ReqRef><ReqRef
 Id="a4e2bd0e-5e3f-43c4-ae8d-7de81347dfed"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="860b076d-353c-412a-a783-eb12fcd3b2bc"
>
</ReqRef><Comment>Returns True if:
  - the ERTMS/ETCS level has switched to 1, 2 or 3
  - no MA has been accepted.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="9f989227-1a5b-40c0-bdc9-f6354a483985"
>
<Expression>Kernel.Level.Value.Value in [LevelEnum.L1, LevelEnum.L2, LevelEnum.L3]
  AND
Kernel.MA.MA == EMPTY</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition32"
 Guid="4756dd4d-95bd-4806-a60d-473fc7ea6d3b"
>
<ReqRef
 Id="188099a1-bd0d-4cd6-83a9-6010e3faea5f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8bb6d52d-568a-4d77-94d2-40abeb640876"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa525ba0-800c-4c16-bb65-e4e5c140a2a0"
>
</ReqRef><ReqRef
 Id="a051cbfd-ad01-436a-a8df-582e22e209df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="560fbb62-f5e1-4635-b245-65a28bdc492f"
>
</ReqRef><ReqRef
 Id="3744b0d8-d7f3-4c73-a8a6-4fc0444df060"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0e669e19-3c9c-4d0e-808a-18d08220a5e7"
>
</ReqRef><ReqRef
 Id="b0df62a1-a43d-4be0-b113-f95ea62363b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7b8a4b45-edb6-4b47-923d-0cdb3617959a"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4e1336e8-179e-49ea-b5be-4d52792be22c"
>
</ReqRef><ReqRef
 Id="c610a0e4-7479-4ceb-8944-e767ebd408b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d66dedff-52af-43e5-8534-7c06b573b665"
>
</ReqRef><ReqRef
 Id="1bfba96f-abb7-44aa-a403-719474913d61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3eef6124-2e45-446d-9a32-5fa7f9a8af94"
>
</ReqRef><Comment>Returns True if:
  - there is a MA with SSP and gradient information
  - no specific mode is required by a mode profile
  - the ERTMS/ETCS level is 1
  - no trip order has been received from a balise.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="269406ab-1582-482b-a177-750fabddebe6"
>
<Expression>Available ( Kernel.MA.MA )
  AND
Kernel.TrackDescription.StaticSpeedProfile.SSP != []
  AND
TrackDescription.Gradient.Gradients != []
  AND
NOT Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.Level.Value.Value == LevelEnum.L1
  AND
Kernel.SpeedAndDistanceMonitoring.TrainTripped == False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition31"
 Guid="499c22c5-2b91-48d4-90db-4b27df5f3268"
>
<ReqRef
 Id="4dd0d4f7-73bf-43b2-8800-82df892b890d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a48156fb-17f9-4ebf-b12a-ec00929b7ac7"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9792d86f-3e2b-4d62-a1b0-57f43012c163"
>
</ReqRef><ReqRef
 Id="a051cbfd-ad01-436a-a8df-582e22e209df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5ee57369-2a50-4386-b68e-b440579f9ce0"
>
</ReqRef><ReqRef
 Id="3744b0d8-d7f3-4c73-a8a6-4fc0444df060"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e2881230-c731-467e-ade7-ea9af7b920b7"
>
</ReqRef><ReqRef
 Id="b0df62a1-a43d-4be0-b113-f95ea62363b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="971b073a-60b4-41d6-9ccb-66fc92f366bd"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="23ca4a45-f91b-430c-912a-620b1ebf1dca"
>
</ReqRef><ReqRef
 Id="c610a0e4-7479-4ceb-8944-e767ebd408b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="71fd7d5b-ffad-4523-8340-d5ac6c303e80"
>
</ReqRef><ReqRef
 Id="1bfba96f-abb7-44aa-a403-719474913d61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="152ed13c-1fdc-4f0e-b3e4-f2e3a47338f6"
>
</ReqRef><Comment>Returns True if:
  - there is a MA with SSP and gradient information
  - no specific mode is required by a mode profile
  - the ERTMS/ETCS level is 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="78d08ac6-7899-46dc-9873-64f9adb589c5"
>
<Expression>Available ( Kernel.MA.MA )
  AND
Kernel.TrackDescription.StaticSpeedProfile.SSP != []
  AND
TrackDescription.Gradient.Gradients != []
  AND
NOT Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition30"
 Guid="1ed756b3-59f3-488a-b1a0-73863a63711e"
>
<ReqRef
 Id="19f2d380-29dd-4668-a992-36ea2f07fce8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d0a3b9d0-f665-42d0-942b-f6b1969d5588"
>
</ReqRef><ReqRef
 Id="80ae3df2-b47f-4772-93e7-1c1e7395f9b2"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="6dafc62c-57f7-460e-a95f-2d8b3323e402"
>
</ReqRef><Comment>Returns True if:
  - the desks are closed
  - no &quot;passive shunting&quot; signal has been received.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="8b01a6ac-2983-442a-9e69-6e27436a743e"
>
<Expression>DMI.DesksAreClosed ()
  AND
NOT TIU.PassiveShuntingPermitted</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="250"
 Width="100"
 Height="50"
 Name="Condition35"
 Guid="fac8a455-23bd-4b2d-8592-9ae58974e888"
>
<ReqRef
 Id="4bb7f7b9-0109-46d3-9855-6a7558ac31fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dccdbebe-bd13-4f7a-863d-bce04a77bffe"
>
</ReqRef><Comment>Returns True if:
  - the driver has selected Shunting mode
  - the ERTMS/ETCS on-board is interfaced to a National System
  - a National Trip procedure is active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="3336a6f9-afeb-4792-9b0a-66fd0eb22068"
>
<Expression>False</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition34"
 Guid="aa3e7274-d754-420b-aa5a-8b1f0a31c754"
>
<ReqRef
 Id="d36ad0a3-d955-4bcf-8e7c-29e8ad53a491"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b6c1bf40-5cb8-4dac-9c19-134da5f66f30"
>
</ReqRef><ReqRef
 Id="25c1b633-d7e9-42a2-be80-037ff105dcd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53c6c85d-cc5f-4382-8c40-15e5867c8bd8"
>
</ReqRef><ReqRef
 Id="68290e3a-68aa-485c-9b80-ad0a6da08d3f"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="dc9d5b7b-6e14-4c77-99ba-711c9308dd7d"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b03f1c7f-1530-441a-aac3-595f7708885a"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cacaa98e-9209-48e4-8221-134b1c971b88"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="876f81d9-8f7a-43ee-b853-61d06063beb2"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c7005f8d-789a-482f-869d-fe9663e90cbf"
>
</ReqRef><ReqRef
 Id="68417b0f-5ef1-4881-8861-1394a76219fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="07d7bcdf-2f65-46b1-8963-f1be397b4422"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for OS
  - the max safe front end is in the OS mode profile
  - the ERTMS/ETCS level has switched to 1, 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="314201be-65f6-4b33-a358-5aedceec2752"
>
<Expression>Available ( Kernel.MA.MA )
  AND
Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.OS</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition33"
 Guid="56e49eba-9de2-43e2-a374-73e30eebd7b0"
>
<ReqRef
 Id="29d97c7f-496b-4ecb-b153-707f8b53e5fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3ce2e439-ca64-48ac-91d4-a455a45978ce"
>
</ReqRef><Comment>(no rule)</Comment>
<Cases>
<Case
 Name="Value"
 Guid="d49c34da-bb3c-431f-b081-b78addb1d99b"
>
<Expression>True</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition62"
 Guid="f56afd52-9cf6-4e44-a25f-8b9312f33090"
>
<ReqRef
 Id="5922076b-396c-4635-a3bc-dd00149b3647"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="16c6570a-fadc-4174-82ad-af44868f558c"
>
</ReqRef><ReqRef
 Id="3201c894-f04f-4c57-97c5-2f8a5c33cad1"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="15f40802-63aa-4fa9-9d18-a6fe7e31b461"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c07b8b8c-b7b6-41ed-b13f-5d51a8a3a37f"
>
</ReqRef><Comment>Returns True if:
  - the driver acknowledges the train trip
  - the train is at standstill
  - the ERTMS/ETCS level is 0
  - there is valid train data on-board.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="602feefd-c298-4afa-8e06-070ab3a33a7a"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.A145</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition3"
 Guid="7dc7b44f-688f-4d77-bb5c-e6735f874682"
>
<ReqRef
 Id="b1cc8b5b-794d-474f-a00b-f1ae16b9be7f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="99349e2b-fb8b-4fa7-8663-011cbd0bd6e9"
>
</ReqRef><ReqRef
 Id="b0c65dc5-e0b6-43dd-a6e7-0e7506cfb576"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19a11958-c517-48e4-9094-4d2c135dbb54"
>
</ReqRef><ReqRef
 Id="793df248-b41b-4ac2-a3cf-dcd071acf349"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7bfe6df1-99b0-4ee3-be7c-4a74e49846da"
>
</ReqRef><Comment>Returns True if:
  - the on-board stops receiving the &quot;go sleeping&quot; signal
  - the train is at standstill.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="baf378f9-6beb-492b-8137-32a5db8cb1e3"
>
<Expression>NOT TIU.SleepingRequested
  AND
Odometry.TrainIsAtStandstill()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition70_PT"
 Guid="635e1aac-9602-4a02-8524-92f4335cc313"
>
<ReqRef
 Id="677e1cd0-782f-4d54-89a9-5127fdfb86fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bdf5ac97-c94f-44c7-9dfe-470048fb936a"
>
</ReqRef><ReqRef
 Id="5f9b351d-def6-4d69-bd03-588e8929f683"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="20cdfdf0-4388-4b14-983b-05802574be8b"
>
</ReqRef><ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e29442b5-670c-4447-b295-685a911d2a75"
>
</ReqRef><ReqRef
 Id="92edb3f6-1eeb-4b7c-bea6-f58f1cd5e70a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="63479266-6d51-491f-9e5b-6c3b90152568"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4c8da253-c1f6-4888-9ae5-d4e5fde3d0d4"
>
</ReqRef><Comment>Returns True if the driver has acknowledged the LS mode in Post Trip.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="69cdc1a2-3a47-48b5-86cd-8b06ff1b9f57"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.S170.DriverAckRequested
  AND
DMI.MasterDMI().In_AcknOfLSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="230"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition69"
 Guid="04f7b324-5473-4642-aa2f-10ab852fdf9e"
>
<ReqRef
 Id="7ac203e4-c918-47f0-bbd3-4c715345a927"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e06cc54-8cb4-467a-b5bf-ff420304ebe2"
>
</ReqRef><ReqRef
 Id="83484e2e-340f-443e-931d-762efbc3dcdc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ee41406e-ca0b-433f-8f39-2163a3a303c9"
>
</ReqRef><ReqRef
 Id="ef357556-b9eb-422f-9405-83e4b929a1c3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0576627b-ddd7-448c-bc85-5a004747360e"
>
</ReqRef><ReqRef
 Id="bef5de12-943a-4b92-94ba-8f9f55bf7241"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="432fb1ac-8b27-465e-a1bd-2a084265f800"
>
</ReqRef><Comment>Returns True if the estimated front end is in rear of the SSP or gradient start.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="6d1267bb-2737-4321-af1f-b133b7477942"
>
<Expression>Kernel.TrackDescription.StaticSpeedProfile.SSPStart() &gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom) 
  OR  
TrackDescription.Gradient.GradientProfileStart() &gt; Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Nom)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition72"
 Guid="a322ffb7-bc95-4f25-8207-617bd94901f1"
>
<ReqRef
 Id="08588528-d0f6-47db-a2bb-4b17e545423c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="004f60ef-f9cc-44c9-b104-ea9561a03cbd"
>
</ReqRef><ReqRef
 Id="a051cbfd-ad01-436a-a8df-582e22e209df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f108b12-a25a-4fe3-8fda-d0eee1df996d"
>
</ReqRef><ReqRef
 Id="887a3be9-9d97-4eb6-9899-061f9b9fed93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e5ddccc1-36e4-40c6-9e04-123afe47d619"
>
</ReqRef><ReqRef
 Id="11359b80-21ab-4618-8bc8-d3b7a07f8566"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b08a4ca-5d29-42f1-9d8e-94c54901db4b"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56c79534-df9e-4fa5-b12e-541fcc8aefa7"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c06ea9e5-cffb-4663-94b7-73b3b1b32007"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for LS mode
  - the max safe front end is in the LS mode area.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e5267ebb-ffc7-4d65-8510-a3e1f74162bd"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.LS</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition71"
 Guid="4c58463e-7643-4990-8d2e-032e5f9af9ef"
>
<ReqRef
 Id="dabf7368-be5e-4ae1-91c6-c70999068a80"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f7601b38-a283-4075-a7fc-ff76e49c2515"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="de2361da-5781-4fb7-bc57-b5c81716e1df"
>
</ReqRef><ReqRef
 Id="dbd12b73-87dc-4f8b-aad5-7e3cb90fa5b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81e2cc07-6720-43d3-9025-27d31bbed846"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="70f34b7d-9af7-4547-8a8c-b094e1a6e5c7"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="47fe02cd-7b1e-4c04-94c3-0a5f88677989"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9ca56d08-8c12-4787-be29-3fd7ea82a685"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for LS mode
  - the max safe front end is in the LS mode area
  - the ERTMS/ETCS level has switched to 1, 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="1df971c0-d11a-490c-b99d-cac062ffff2b"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.LS
  AND
Kernel.Level.Value.Value in [LevelEnum.L1, LevelEnum.L2, LevelEnum.L3]</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition66"
 Guid="d235d312-ca94-498a-994a-8e987fd0de6d"
>
<ReqRef
 Id="e9d5f82a-8857-4eaf-bb0e-8dedfd3e4500"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="108256cd-ff81-47e0-b072-4b2cc142f7b5"
>
</ReqRef><ReqRef
 Id="3520c91c-8938-4bdf-b683-bc1fd7071fd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="10289fc2-db86-4494-a971-03359f5d9652"
>
</ReqRef><ReqRef
 Id="277ee440-7786-4aac-8364-7e60a82e94a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="51fb8f19-c1b9-44bd-be71-65d4110e044d"
>
</ReqRef><Comment>Returns True if a linked balise group was passed in the unexpected direction.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e2fb9afb-64d9-485c-8440-c499c2a9fb91"
>
<Comment>This returns True if the expected balise group was passed over in the wrong direction.
LinkingApplicable() and Available(CurrentBaliseGroup) protect against errors from accessing empty collections.
BaliseGroupIdentifier == NID.BG is also protection, ensuring that the balise group received was the expected one.
BGOrientationIsValid is a function that returns true if the orientation of the received BG matches the orientation announced in Linkings</Comment>
<Expression>BTM.Linking.LinkingApplicable()

  AND  

BTM.CurrentBaliseGroup != []

  AND  

( (FIRST X IN BTM.Linking.Linkings).BaliseGroupIdentifier == (FIRST X IN BTM.CurrentBaliseGroup).Telegram.NID_BG )

  AND  

( NOT BTM.Linking.Supervision.BGOrientationIsValid(BTM.CurrentBaliseGroup) )</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition65"
 Guid="aa0ec65c-9575-4222-a337-79872833e801"
>
<ReqRef
 Id="c808a6f7-a4d4-4dad-955f-f538e5cd0f7b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="95acbe73-2170-4130-9ce8-1ac2acafeaad"
>
</ReqRef><ReqRef
 Id="a4e2bd0e-5e3f-43c4-ae8d-7de81347dfed"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="d1370919-ce0a-4aee-a2e8-1a44b439b695"
>
</ReqRef><Comment>Returns True if:
  - the system version received from a balise telegram is greater than the highest system version supported on-board
  - the ERTMS/ETCS level is 1, 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="5fa221f2-db1d-45b5-89d3-ce05557c230a"
>
<Expression>Level.Value.Value in [LevelEnum.L1, LevelEnum.L2, LevelEnum.L3]
  AND  
(
  BTM.FullBGReceived(BTM.CurrentBaliseGroup)
    AND  
  VersionManagement.SystemVersionXIsGreater(
    X1 =&gt; VersionManagement.SystemVersionFromMessageVersion( (FIRST X IN BTM.CurrentBaliseGroup | NOT X.Missed).Telegram.M_VERSION ),
    X2 =&gt; VersionManagement.OperatedSystemVersion
  )
)</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition68"
 Guid="9a4fefe5-1d9f-4407-b4ef-8c8058862c54"
>
<ReqRef
 Id="19c49a5f-d2e2-456a-847c-6d87a956a360"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9b173812-9e5b-452a-837e-608f6497e5c6"
>
</ReqRef><ReqRef
 Id="c07f87bc-9695-4de2-9711-0785c2be5e0f"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="901a4dd6-ec0f-41fb-a515-1667a20f510f"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="944fcdb5-1bf7-43c3-9b6f-c9636e948640"
>
</ReqRef><Comment>Returns True if:
  - the driver has acknowledged the train trip
  - the train is at standstill
  - the ERTMS/ETCS level is 0 or NTC
  - there is no valid train data on-board.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="a82c4357-23e7-4207-886d-bb18d6fa88f2"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.A140</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition67"
 Guid="e32dd89b-48c7-49c7-a22b-99e77fb4d24e"
>
<ReqRef
 Id="99059192-8421-48c9-893d-5ceb5c3770ac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b973c1d9-901a-46db-8814-0bc2a0923796"
>
</ReqRef><ReqRef
 Id="77503400-7492-4687-93e6-d51364d37209"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="355acf8d-4476-4e2a-a058-53b6e6a2f5f1"
>
</ReqRef><ReqRef
 Id="3419ac3c-8b3b-4465-8ba8-a0628cc3c11b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0fb88dca-045d-4096-93f6-352d603c8caa"
>
</ReqRef><Comment>Returns True if:
  - the ERTMS/ETCS level has switched to 1
  - a trip order has been received
  - &quot;override&quot; is not active.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="254a42ce-42ff-4bfa-bb57-6311a6aca2a6"
>
<Expression>Kernel.Level.Value.Value == LevelEnum.L1
  AND  
THERE_IS EmergencyStop IN Kernel.BrakeCommands.EmergencyStops
  AND  
NOT Kernel.Override.OverrideIsActive()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="430"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition63"
 Guid="2b98e2a8-e698-417f-a890-0394ba9db8ec"
>
<ReqRef
 Id="baa74e49-0452-49c0-a452-f75558625db1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f72effd8-ce3c-44be-84ac-c1151ec5167a"
>
</ReqRef><ReqRef
 Id="36a5f675-e085-4644-a66e-482120cab435"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="d970c5ce-d55c-4473-9958-a3615dea0054"
>
</ReqRef><ReqRef
 Id="2b361c71-11d4-4fd7-aeb7-81d19aeb3b64"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2fca9569-07de-442a-a7eb-1215a4d281f5"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d2c418ef-6af8-470f-93ab-c808cc2998b5"
>
</ReqRef><Comment>Returns True if:
  - the driver has acknowledged the train trip
  - the train is at standstill
  - the ERTMS/ETCS level is NTC
  - there is valid train data on-board.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="d2f1f199-4026-4a6b-8db6-2e6c8006d9aa"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.A150</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="10"
 Y="550"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition74"
 Guid="d64db327-e192-4762-a17d-5731c4b67274"
>
<ReqRef
 Id="15a8dac9-8bdc-4e20-82c4-d8a8bf78cc03"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="45a6f71d-63f2-442e-a872-231f34a22a1a"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="58f91bd3-94d3-4d2e-bd3c-ae6f4a89b96e"
>
</ReqRef><ReqRef
 Id="a051cbfd-ad01-436a-a8df-582e22e209df"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7612fc26-74b1-4b16-b64c-7afc328762da"
>
</ReqRef><ReqRef
 Id="3744b0d8-d7f3-4c73-a8a6-4fc0444df060"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ab69f2a0-ebd9-4d37-8851-aedb728821ae"
>
</ReqRef><ReqRef
 Id="887a3be9-9d97-4eb6-9899-061f9b9fed93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef1a57cc-9529-4897-89af-26dce56b7450"
>
</ReqRef><ReqRef
 Id="11359b80-21ab-4618-8bc8-d3b7a07f8566"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="15952401-9176-4b3e-a674-7a0f9f989624"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4d6514cc-2086-4634-b01a-09d77ff3d31b"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="252f7c4b-177f-4fef-9418-ab77c21c016c"
>
</ReqRef><Comment>Returns True if:
  - there is a mode profile for LS mode
  - the max safe front end is in the LS mode area
  - the max safe front end is not in an OS mode area.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="1d9238ec-112c-44a2-83d0-bbead36b743f"
>
<Expression>Kernel.MA.ModeProfile.ModeProfileIsApplicable()
  AND
Kernel.MA.ModeProfile.CurrentMode() == ModeEnum.ModeProfile.LS
  AND
NOT
  (
    ( FIRST X IN Kernel.MA.ModeProfile.Profile | X.Mode == ModeEnum.ModeProfile.OS ) == EMPTY
      OR
    Kernel.MA.ModeProfile.AcknAreaReached ( FIRST X IN Kernel.MA.ModeProfile.Profile | X.Mode == ModeEnum.ModeProfile.OS )
  )</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="890"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition15_PT"
 Guid="8ed62eee-c09a-4dbe-9c30-5e66120266bf"
>
<ReqRef
 Id="7a006572-8e75-4e6b-be5e-b096bfa7f855"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="839323d0-c479-45f4-b6f0-2b8a4426b939"
>
</ReqRef><ReqRef
 Id="5f9b351d-def6-4d69-bd03-588e8929f683"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="4d4b7e50-a298-4406-bcf8-8ef7234604af"
>
</ReqRef><ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89f9a62a-e313-4b5f-9fbe-c9947f2a7e2c"
>
</ReqRef><ReqRef
 Id="c7fa380e-0e91-4109-8b8c-36f672fbb5d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="51739c00-2daf-42b7-aaf2-e60f008807d7"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cecc46cc-e46c-472e-b58a-ae2be97a90a5"
>
</ReqRef><ReqRef
 Id="68417b0f-5ef1-4881-8861-1394a76219fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d4eb002d-f4a1-4447-b5e5-5ed31a59d0f3"
>
</ReqRef><Comment>Returns True if the driver has acknowledged a request for OS mode during Post Trip.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="38d5b17e-1b8e-476c-a02b-eb663b6ccb8c"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.S170.DriverAckRequested
  AND
DMI.MasterDMI().In_AcknOfOSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="70"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition15_SB"
 Guid="4fcc3550-a546-4074-ad52-8242c577f470"
>
<ReqRef
 Id="7a006572-8e75-4e6b-be5e-b096bfa7f855"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7c2c0a8a-8243-493f-a0e8-7aede6a2a408"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1d803036-5972-40f2-9d01-610234c2cff2"
>
</ReqRef><ReqRef
 Id="bc849108-dc17-4e38-aafd-be4995db9f82"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="48d0cc66-930a-4cfb-af4f-d839878f06ae"
>
</ReqRef><ReqRef
 Id="c7fa380e-0e91-4109-8b8c-36f672fbb5d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5ca21602-e05b-47a8-bd98-a18d4e4cfa3e"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a8ba08fe-d38d-492e-98c8-6b47ac1c30c7"
>
</ReqRef><ReqRef
 Id="68417b0f-5ef1-4881-8861-1394a76219fd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cd7f8dd4-aff0-4290-8358-1fa28500d4dd"
>
</ReqRef><Comment>Returns True if the driver has acknowledged a request for OS mode during Start of Mission.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="4a33f1cc-738d-4688-ad30-bb1130f703f9"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S25
  AND
DMI.MasterDMI().In_AcknOfOSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="190"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition31_PT"
 Guid="2502c264-5808-43e9-8c73-463096c103b9"
>
<ReqRef
 Id="9b0bf055-ffec-4417-b3b2-6ad55ca298d1"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="7b4ac76f-860d-404d-b9bb-f5694198119c"
>
</ReqRef><ReqRef
 Id="4dd0d4f7-73bf-43b2-8800-82df892b890d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad1fbdc9-aba1-47c9-8320-14240e99af53"
>
</ReqRef><ReqRef
 Id="6ed812c6-f711-468a-8c0f-0843bf2384be"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4dba423a-dc4e-431e-821a-06195383be0c"
>
</ReqRef><ReqRef
 Id="c610a0e4-7479-4ceb-8944-e767ebd408b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbed64e5-ac7b-42e1-a047-07c48f1e4334"
>
</ReqRef><ReqRef
 Id="1bfba96f-abb7-44aa-a403-719474913d61"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eee8f6d0-0920-4318-89ed-16ea95f737d0"
>
</ReqRef><Comment>Returns True if:
  - there is a MA with SSP and gradient information
  - no specific mode is required by a mode profile
  - the ERTMS/ETCS level is 2 or 3.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="f2ae3bd6-98e2-4b91-a5c3-e084d9383ce5"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.S150.MARequestSent
  AND
Available ( Kernel.MA.MA )
  AND
NOT Kernel.MA.ModeProfile.ModeProfileIsApplicable()</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="120"
 Y="130"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition17"
 Guid="2a64e634-3fd7-4111-8590-880a93f8b3b9"
>
<ReqRef
 Id="a0f4b0d4-ee6d-40d4-94b4-05dd94f6bcd2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="74d69ce0-b4e7-477d-a521-7dc08544b74a"
>
</ReqRef><Comment>Returns True if a linking reaction set to &quot;Trip&quot; was activated.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="54e58d84-4d5d-41e0-b70d-1312a684cd21"
>
<Comment>The variable BTM.Linking.TrainTripDueToLinkingInconsistency is set to True when the train activates a &quot;Trip&quot; linking reaction</Comment>
<Expression>BTM.Linking.Supervision.TrainTripDueToLinkingInconsistency</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition37_PT"
 Guid="d83f8c41-2c8f-4039-afcd-cad6928c4726"
>
<ReqRef
 Id="105c2ac3-690d-4d9f-805f-76ae298a3ab7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd83d991-fb42-48e3-a032-99013fa01262"
>
</ReqRef><ReqRef
 Id="988a3e55-0b0a-467b-a0e7-398bad5bf268"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="12326fa6-f55b-4d1c-b64c-41a4b14c50b2"
>
</ReqRef><ReqRef
 Id="0882a887-8e70-4391-9d2b-97be7cebd091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86afb637-2bd6-49a2-9eb0-3a540f4a822b"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2dfdbb7-2a24-4368-8693-fceb8586a63f"
>
</ReqRef><ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f4903701-0087-444d-a0c3-81b6a03e47c5"
>
</ReqRef><Comment>Returns True if the driver has selected &quot;Override&quot; in &quot;Train Trip&quot; procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="715a565c-ccc0-47e3-95ce-cea36f6421a3"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip
  AND
Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]
  AND
DMI.MasterDMI().In_OverrideRequest.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition50_PT"
 Guid="d101082f-136f-429b-9b85-3887de988051"
>
<ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="877ec632-c724-4ac1-8e5a-fcdf09feac08"
>
</ReqRef><ReqRef
 Id="5f9b351d-def6-4d69-bd03-588e8929f683"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="9f7747a2-f4a0-4faf-9c44-fdd8ee3625ad"
>
</ReqRef><ReqRef
 Id="9fc9919d-e281-4a90-94fb-319cb850511a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a09351c3-b1e9-41a1-ad96-1264211b6aa0"
>
</ReqRef><ReqRef
 Id="a83acd4f-5228-4bcd-9ab5-74e560d16467"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f05dc11-034f-4a10-ab30-c17875fe4507"
>
</ReqRef><Comment>Returns True if the driver has acknowledged an acknowledgement request for Shunting in the Train Trip procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="18dccbbb-9140-4c28-9abb-d3adee603452"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.TrainTrip.S170.DriverAckRequested
  AND
DMI.MasterDMI().In_AcknOfSHMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="780"
 Y="10"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition8_SB"
 Guid="b5586d4e-49fc-4243-bba6-dd685715b012"
>
<ReqRef
 Id="67821ca1-b727-417d-bd7e-38b05017910c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ecaad456-f4bc-4893-aba8-66ca758bc3aa"
>
</ReqRef><ReqRef
 Id="588364b4-1c15-454c-a0f1-3235f2130fc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="228b6e5e-f856-42bf-98e1-ff147637f480"
>
</ReqRef><ReqRef
 Id="96acedcb-697b-4a9f-8c62-b01df8f31f77"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="d6af1b6a-0aaa-4ac6-ac26-bd0009c0a7dc"
>
</ReqRef><Comment>Returns True if the driver has acknowledged SR mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e38860af-a14f-444d-bee3-1d1b35e6a35c"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S24
  AND
DMI.MasterDMI().In_AcknOfSRMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="560"
 Y="250"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition37_SB"
 Guid="429d46ed-070b-437d-a553-7516104a68ae"
>
<ReqRef
 Id="105c2ac3-690d-4d9f-805f-76ae298a3ab7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4bddfd58-66b1-4dd5-85d9-ec3f4d84c70f"
>
</ReqRef><ReqRef
 Id="0882a887-8e70-4391-9d2b-97be7cebd091"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="696e7ac2-25a9-45ff-81b2-dfda8fd82a89"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66f55a41-d25c-4676-b5e4-bc251306d83a"
>
</ReqRef><ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dce30b70-6a3d-4583-9b75-0cbca46cb71e"
>
</ReqRef><Comment>Returns True if the driver has selected &quot;Override&quot; in &quot;Start of Mission&quot; procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="25a7beb6-0196-47f4-a9fd-8f9591758667"
>
<Expression>(
  Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S10
    OR
  Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S20
)
  AND
DMI.MasterDMI().In_OverrideRequest.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="450"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition70_SB"
 Guid="acbf197c-54d1-421c-8049-c303c567d547"
>
<ReqRef
 Id="677e1cd0-782f-4d54-89a9-5127fdfb86fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e2c435ae-40c1-4ed9-b74a-221a83d4f78c"
>
</ReqRef><ReqRef
 Id="bc849108-dc17-4e38-aafd-be4995db9f82"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="c5de9a26-eeee-4437-81f9-3c3f7a24f986"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a0299cfd-b5b0-48ab-ae6e-8dfbe604f3c8"
>
</ReqRef><ReqRef
 Id="92edb3f6-1eeb-4b7c-bea6-f58f1cd5e70a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2a4ef2ea-843e-4718-aa93-e7107c4e0b2b"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29a1e980-59b1-480b-baac-a9d01e34fd0a"
>
</ReqRef><Comment>Returns True if the driver has acknowledged the LS mode in the Start of Mission procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="e12e6870-6112-42e5-9e70-5c219e28706e"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S25
  AND
DMI.MasterDMI().In_AcknOfLSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="370"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition50_SB"
 Guid="5c033712-e0c0-441c-b9ca-5d0cbe85c7a7"
>
<ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="36621886-efa4-4088-904a-22248f659203"
>
</ReqRef><ReqRef
 Id="9fc9919d-e281-4a90-94fb-319cb850511a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a2ab6ea3-aa8f-4d9d-bd78-77f08163cfa7"
>
</ReqRef><ReqRef
 Id="bc849108-dc17-4e38-aafd-be4995db9f82"
 SpecId="c238ead1-8ba7-4613-ae49-4288833ea80d"
 Guid="94398e47-2953-4adb-9c35-052600d84757"
>
</ReqRef><ReqRef
 Id="a83acd4f-5228-4bcd-9ab5-74e560d16467"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="45995204-a98b-4285-864c-bec1ddba8e82"
>
</ReqRef><Comment>Returns True if the driver has acknowledged an acknowledgement request for Shunting in the Start of Mission procedure.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="8429102d-3dcb-42e9-803e-72ca2cdce070"
>
<Expression>Kernel.HandleModeChange in Kernel.HandleModeChangeSM.StartOfMission.S25
  AND
DMI.MasterDMI().In_AcknOfSHMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="670"
 Y="310"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition46"
 Guid="f13ace6e-9b0a-4dcc-9732-2180ffe4c24d"
>
<ReqRef
 Id="d0507ada-5b0f-4754-b198-46988a339561"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="032e4e87-977f-4376-ad53-34dc4bbd24c5"
>
</ReqRef><ReqRef
 Id="14a0113e-9a92-4745-9790-56bec28eace5"
 SpecId="33a01dd1-de78-4ea3-9e96-a198d1a29277"
 Guid="c5f45c3e-03b2-4daf-b1db-21b01657fdc3"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="84e302f7-782d-4b53-b8e1-6c7f7c8a48f6"
>
</ReqRef><Comment>Returns True if:
  - the driver has selected &quot;non leading&quot;
  - the train is at standstill
  - the &quot;non leading&quot; signal has been received.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="580df3bd-c8e6-48f2-aba6-78766237debd"
>
<Expression>DMI.MasterDMI().In_NonLeadingRequest.InputInformation.DriverAnswered
  AND
Odometry.TrainIsAtStandstill()
  AND
TIU.NonLeadingPermitted</Expression>
</Case></Cases>
</Function><Function
 Type="Boolean"
 Default=""
 X="340"
 Y="490"
 Width="100"
 Height="50"
 Implemented="TRUE"
 Name="Condition70"
 Guid="f4b856ca-113d-450e-8a46-b90bc7eb3ba9"
>
<ReqRef
 Id="677e1cd0-782f-4d54-89a9-5127fdfb86fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0adfaf41-f0ca-458a-829b-bd1634d6060a"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0f799610-9108-4a85-a7c5-5348398cd38d"
>
</ReqRef><ReqRef
 Id="3744b0d8-d7f3-4c73-a8a6-4fc0444df060"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="059e1ded-df01-495e-ae76-54e59803c379"
>
</ReqRef><ReqRef
 Id="0fe12114-3bcd-460f-8e08-ccb61b620101"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="22ce6469-4e37-4adf-8fbd-7d31929fd318"
>
</ReqRef><ReqRef
 Id="5fac2ca7-314d-40c2-9267-45948c003cd0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9d992584-015d-4d93-aca0-4ee8d6d9d4fc"
>
</ReqRef><Comment>Returns True if the driver has acknowledged the LS mode.</Comment>
<Cases>
<Case
 Name="Value"
 Guid="0f4cca70-9bb1-4700-9cb4-d8e4c5438e63"
>
<Expression>DMI.MasterDMI().In_AcknOfLSMode.InputInformation.DriverAnswered</Expression>
</Case></Cases>
</Function></Functions>
<Procedures>
<Procedure
 X="120"
 Y="550"
 Width="100"
 Height="50"
 NeedsRequirement="FALSE"
 Name="UpdateMode"
 Guid="89efced9-4d3d-4c6d-bdbf-45a6eba86958"
>
<ReqRef
 Id="325f853d-a507-4591-b20e-a0ef825d2d82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="86171919-a0ab-4b78-a7ab-8d60ccc2cac0"
>
</ReqRef><Comment>Updates the current mode.</Comment>
<Rules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update mode"
 Guid="cb9bee43-a1ca-465a-96a0-ed1fdbbb6026"
>
<Comment>Update the current mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NP"
 Guid="0d1cd198-b5a8-49dd-898e-5cfbf9c14fb2"
>
<Comment>If the current mode is NP, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="637c50bc-03df-4996-ae13-ed0ee66f0cf7"
>Kernel.Mode == ModeEnum.NP</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NP"
 Guid="a7292d7a-3fe6-4781-ae3b-4583c8072d7b"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="NP -&gt; IS"
 Guid="606ef851-4b92-47a9-81b2-534ed4371e1e"
>
<ReqRef
 Id="5b6d1268-1584-485e-8ebe-469bc6c3dea4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9a5e4d2-04fc-491c-9252-005ff347f65d"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="3838e6e2-2e03-4fef-b8f6-2e6fb0b98e24"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="82e077d0-e74d-42db-84e2-99fd0141f0f2"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="NP -&gt; SB"
 Guid="093d486d-4304-4bfa-af7a-42de6cd3b9f7"
>
<ReqRef
 Id="e0dc6646-4a9b-496a-806e-273ed48cf4ed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="98812f85-bb70-4896-b33c-c84d4f13c444"
>
</ReqRef><ReqRef
 Id="a4fadb0e-8c80-4803-99f0-ceff7d136e72"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="290216d6-000d-4b0a-a6be-aa15846dc13e"
>
</ReqRef><ReqRef
 Id="865bbdd6-2010-4869-ab3e-bc538ce5fe4b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9222388e-fdf5-45f2-b290-28f029cea192"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="4eb9f7ab-f9ff-4968-b61c-35120ed8e96b"
>Kernel.Modes.ModeTransitions.Condition4()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ee94747a-9874-4e1b-b90d-a6cd463f4bb5"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="c1fa9ed0-f8e5-4c64-9aae-544df9ed2468"
>EURORADIO.Terminal.RegisterMobileTerminals ( EURORADIO.Terminal.LastKnownNetworkId )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SB"
 Guid="69f62779-e596-4f71-a363-c4bd65348a81"
>
<Comment>If the current mode is SB, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="8a69d0e4-714f-41a4-ab4a-0bffeaf5ccd0"
>Kernel.Mode == ModeEnum.SB</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SB"
 Guid="01123f6c-b8f1-409e-a84d-ee71e25c6a88"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; IS"
 Guid="1daad2ae-8691-4178-a913-a820c30d724a"
>
<ReqRef
 Id="fb5746e3-d14b-46bb-a7d0-fe55081386b6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d0e440ba-19ac-43b4-8575-479d8d51ee04"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="fbe9b593-c3a5-4aa1-81a9-5d837a5a6960"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7ef4304a-4034-4ac7-8536-469d48e5a312"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; NP"
 Guid="e1485448-d11a-4d95-b260-98786b82da7a"
>
<ReqRef
 Id="6852e0d5-b955-4062-a08d-c8c99a68ec83"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df4990d6-7ba2-44ff-8b15-2401dfd77e1f"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="fa2994bc-2cee-4aa0-b231-473ca8c6dc22"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e7bd4475-61c5-4f4b-a7e8-8101e0880733"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; SF"
 Guid="5526f756-21d3-4d75-b2dc-0e9e8f6e782e"
>
<ReqRef
 Id="b6f2c20e-5394-4d83-ab60-49b870dd1f9d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6aea0588-965a-4f1e-b372-887acc79d664"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="4b0b41bd-14ec-42df-9a31-c2c25277c7a0"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="45a2ff52-2b54-4d61-87fd-d0860cf6ad87"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; TR"
 Guid="d8dcedcf-7c3b-4913-b1db-27e1fc436e60"
>
<ReqRef
 Id="049c58e2-9840-4387-83f9-fac23f7544bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="63070479-dd02-4e4b-8666-525d372af457"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c2ecc983-90df-42a1-b4f6-658390adaaa8"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f6e18848-1a16-48d0-af78-a42907f8a055"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="96602141-25d4-4583-b5e3-1389b3b3658c"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="0e8efe78-b855-448e-806f-06fe9c06a3ec"
>Kernel.Modes.ModeTransitions.Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6bd2c59a-d001-444e-abad-375c759f1a6c"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="742fe7d2-5e50-49c4-b328-8c87d39a2fc6"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action><Action
 Guid="64b127df-9606-4b7e-9fc7-f41fcee7e325"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; SL"
 Guid="d1cf198a-40d6-4dcb-9909-2053bc04c2db"
>
<ReqRef
 Id="a8b92c94-8c21-4d2d-bd37-ba317931ac09"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0ac162ec-a893-439f-89c2-01bd3c5ef1ed"
>
</ReqRef><ReqRef
 Id="9b24f0d9-f04e-410d-8c0f-8c2ea840f4c9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5d7a2bef-21c7-49da-a631-3a240fd6080a"
>
</ReqRef><ReqRef
 Id="57975d77-7335-4135-bac0-954cd1debb67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c6c8f1ef-6c8d-4c5e-91e8-c9ab05401bbd"
>
</ReqRef><Comment>Transition to SL.</Comment>
<PreConditions>
<PreCondition
 Guid="d050d4c5-921a-4471-9c80-319beb33d4cb"
>Kernel.Modes.ModeTransitions.Condition14()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="42130fe9-d7c2-4872-abf1-9727683463c3"
>Kernel.Mode &lt;- ModeEnum.SL</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; NL"
 Guid="42bca6b5-f0af-413a-ae34-5dbc1d6ad8d0"
>
<ReqRef
 Id="66344956-e826-42f5-8455-e11833971d9e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="82188f0b-cdb7-4c14-a22f-3c27cd949b9a"
>
</ReqRef><ReqRef
 Id="2df20d0d-1f50-4e04-aa20-f8d1ab4e0945"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5747d92e-2518-4ba4-b442-7fbcecfa0f5a"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e85e472b-43a6-45bd-8889-5dcac517b736"
>
</ReqRef><ReqRef
 Id="7c5af2d3-aa45-4d2e-b19d-ad71aaf624a2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7fe3a461-bace-4e1c-aea1-a8f4df9b013a"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e089e9d2-bebc-4a5e-b5d9-fe942a28397b"
>
</ReqRef><ReqRef
 Id="aba0e684-4967-4fc6-850e-d080a2909bc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d5ccf730-5529-4ecf-868d-ffd426bca863"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="3223e1ad-a340-4fe0-a931-c97c9dfc3ad1"
>Kernel.Modes.ModeTransitions.Condition46_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b9f02acb-1a57-4aa3-9132-d976eb86917a"
>Kernel.Mode &lt;- ModeEnum.NL</Action><Action
 Guid="0d16166b-3f10-4b18-a85c-80fba29cabd5"
>DMI.MasterDMI().In_NonLeadingRequest.InputInformation.Disable()</Action><Action
 Guid="3a19531c-605b-4225-bdff-76d2aaedf965"
>Kernel.MissionIsOnGoing &lt;- True</Action><Action
 Guid="5b0bcbc6-3aa3-496b-9d3b-38422971946a"
>DMI.MasterDMI().In_ShuntingRequest.InputInformation.Disable()</Action><Action
 Guid="5c7cb6fb-f332-4add-94c5-b70199c1263d"
>DMI.MasterDMI().In_TrainData.InputInformation.Disable()</Action><Action
 Guid="3de38327-49c3-472f-89d1-ad07e9eaa198"
>EURORADIO.RBCConnection.Contact.ContactLastKnownRBC()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle train position data state"
 Guid="a215559d-6266-40b2-9ad3-102c16cb48c3"
>
<ReqRef
 Id="42a6f10f-1298-4815-a950-88ff26725dd5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="db933f28-8821-45b4-b0a1-e1cd1c7742ea"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b9c2e6a-84b7-415d-97e8-97892c57fcdd"
>
</ReqRef><ReqRef
 Id="04851be0-a069-4c15-8352-726b54b6306a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fc652594-437f-4d02-b4e2-2f4ef7244291"
>
</ReqRef><Comment>Delete the train position if it is invalid.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Invalid to unknown"
 Guid="7d42bc91-5f19-40ed-b398-3aac9e8c0475"
>
<PreConditions>
<PreCondition
 Guid="ec27511b-b26a-4e7f-aefc-0f35fd516532"
>Kernel.TrainPosition.Position.DataState == DataStateEnum.Invalid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="75855857-3794-4961-872f-69d027ab953b"
>DeleteInformation(Kernel.TrainPosition.Position)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; SH"
 Guid="9607bcd7-36c1-4474-991c-326ee0c0918e"
>
<ReqRef
 Id="b71016be-ff08-4e3d-aad6-523ba3433ed4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4312e6bf-179b-40da-bff3-254d4d260e5f"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="349cd6b8-c07d-4547-a019-70d78f87110f"
>
</ReqRef><ReqRef
 Id="84e4bf85-c73c-4fd2-a440-bc180869ec08"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="40d38b32-743d-416a-bbb4-0f00c9672f5f"
>
</ReqRef><ReqRef
 Id="3d01d017-72ad-4ae6-888e-a4e7f0241a33"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d1d9cb59-5506-4542-a56b-bebdc1b78ffe"
>
</ReqRef><ReqRef
 Id="a7dfd21b-40f7-4ea2-8604-1cb1cf5a2a65"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="779e13d4-4e36-4cb1-aaad-95536b08778d"
>
</ReqRef><ReqRef
 Id="31c44e96-e029-418d-b715-af8b375bf89b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8f88393b-9e57-465f-82cc-4afe2a751eb4"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="141e16b7-9da7-4714-850f-9681e2e927fa"
>
</ReqRef><ReqRef
 Id="a83acd4f-5228-4bcd-9ab5-74e560d16467"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="28e5af52-b8bc-4805-9894-297d8c602cdf"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="02d9e05a-48c0-46e5-a988-fa82b48513ce"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition50_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c2085532-7c0c-4943-82b1-3a68ddc99512"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Post actions"
 Guid="76b79755-f6b7-49d8-ac48-e01cd203b70a"
>
<Comment>Remove the acknowledgement request for SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E33: Driver acknowledged"
 Guid="d30a6fe1-a235-4bb2-9478-abfe565950c1"
>
<PreConditions>
<PreCondition
 Guid="694e7620-38cc-41e7-adb0-b1faa07937bb"
>Kernel.Modes.ModeTransitions.Condition50_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="395b6dc7-c737-47e1-b915-e5929d9a123e"
>DMI.MasterDMI().In_AcknOfSHMode.InputInformation.Disable()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; FS"
 Guid="5d593c89-da4a-4e40-90c1-5633439e7500"
>
<ReqRef
 Id="8ab50b43-678a-419c-ae45-45d9461bdb8e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="077cfab2-9fc8-4903-9e33-5f4f931b7847"
>
</ReqRef><ReqRef
 Id="9055a6b1-6135-49e8-a779-622b3270c280"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d9df6748-83a7-464c-bb38-b85b31698225"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="163ff6e3-d942-4e70-a399-a6d76881c94d"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="0c073e7f-7bff-4af2-8dc1-553a258087d3"
>Kernel.Modes.ModeTransitions.Condition10()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="42a694d7-6181-4d08-aa1c-ffe35a05f9d6"
>Kernel.Mode &lt;- ModeEnum.FS</Action><Action
 Guid="40b8d473-3d7c-439d-bab1-c6ce77e33b98"
>Kernel.MissionIsOnGoing &lt;- True</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; LS"
 Guid="fa5df89c-472a-4561-955b-3e8ecb565665"
>
<ReqRef
 Id="ec3a05bc-399a-4e39-b092-13aa67e04de7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5d7fb1b9-a85d-4175-b212-233f80c26383"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="93646b6d-9cbb-4fd6-8501-06bda1c63936"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c831e421-b773-4852-aa41-79c577e10aa3"
>
</ReqRef><ReqRef
 Id="92edb3f6-1eeb-4b7c-bea6-f58f1cd5e70a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="04c95788-00a2-4b2d-8bd1-c0131f70168c"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="449144db-80a0-4059-bbf9-6a35b3c91ff2"
>Kernel.Modes.ModeTransitions.Condition70_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9a2e9fbb-f744-4591-8852-5f86807195b1"
>Kernel.Mode &lt;- ModeEnum.LS</Action><Action
 Guid="87dcd821-f086-414d-8c36-65fd3564a7ec"
>Kernel.MissionIsOnGoing &lt;- True</Action><Action
 Guid="26961c38-f889-4f3d-b7a0-c8703bf9d31a"
>DMI.MasterDMI().In_AcknOfLSMode.InputInformation.Disable()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; SR"
 Guid="d906415f-6e5f-4dc2-988a-ab9ac3332597"
>
<ReqRef
 Id="cceabd01-d7d5-48a4-a4c6-5878652584cc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c4376d33-c646-453d-a7dd-ac7e473a2f54"
>
</ReqRef><ReqRef
 Id="588364b4-1c15-454c-a0f1-3235f2130fc5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="68606fef-649a-4b70-9e35-6deea005f2bb"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2e37f41a-aa02-462a-9aeb-0cc04cfcd686"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="15785d3a-04a3-42c5-b53f-79148b5c7720"
>Kernel.Modes.ModeTransitions.Condition8_SB() OR Kernel.Modes.ModeTransitions.Condition37_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ec99669d-79ce-4749-a553-c2d81d00d837"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Post actions"
 Guid="8cc41bc7-34c7-4779-b147-16e5e47d84d3"
>
<Comment>Remove the acknowledgement request for SR mode.
If the train position is invalid, delete the stored position.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E32: Driver acknowledged SR"
 Guid="1102163f-44a3-4b4d-88dd-7213b1101df7"
>
<ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="822e538d-07ab-495d-9ca5-aee57109288e"
>
</ReqRef><ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="47fa5af7-9329-4bc0-837a-6697b3f5fb0c"
>
</ReqRef><Comment>Handle selection of SR.</Comment>
<PreConditions>
<PreCondition
 Guid="976ed7c9-c965-47ac-a82f-204c44b898be"
>Kernel.Modes.ModeTransitions.Condition8_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="dcbf2ee0-1f20-4df8-8c7b-969bdfa78ca4"
>DMI.MasterDMI().In_AcknOfSRMode.InputInformation.Disable()</Action><Action
 Guid="8b66a8dc-8b80-43b5-8bfb-ac6150e42502"
>Kernel.MissionIsOnGoing &lt;- True</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Invalid location"
 Guid="8996cd23-21e8-4533-9a01-ea64eea39c90"
>
<ReqRef
 Id="711ed0e3-0274-4299-ae1d-ce0df2fbb94d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0e0bdaa3-6e3a-4e2b-beae-9b707ff6f732"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c74949e-3c5f-4f40-af60-3b7aa5b33d2f"
>
</ReqRef><Comment>Delete the invalid position.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid location"
 Guid="8eb5af35-fd79-4125-a607-531005dbb339"
>
<PreConditions>
<PreCondition
 Guid="74f98c49-eca8-4aab-8a0b-7540f503733d"
>Kernel.TrainPosition.Position.DataState == DataStateEnum.Invalid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="732da1ab-fa5e-42b6-97bd-ccd958e4ff85"
>DeleteInformation(Kernel.TrainPosition.Position)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Driver selected Override"
 Guid="e2cfe6b5-cac6-4a15-9c78-e3070c88ffcc"
>
<ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7656b094-6b88-4f0c-8bcf-174b5ea59535"
>
</ReqRef><Comment>Handle selection of Override.</Comment>
<PreConditions>
<PreCondition
 Guid="b00b8432-45e2-4f5b-95af-9964d5f33bfc"
>Kernel.Modes.ModeTransitions.Condition37_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0b0750d8-3ae1-4080-b60e-862c8f47e728"
>Kernel.Override.EnterInOverride()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete train position in SoM"
 Guid="6dce938d-d516-44be-ab40-1546e1ef1d8e"
>
<ReqRef
 Id="ea9d2d52-6bdb-4a6e-9836-53be43a10271"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f36a0c7b-f5bb-4f3a-b84b-9776cdc78423"
>
</ReqRef><Comment>If the driver selects &quot;Override&quot; during the Start of Mission procedure, before the train position is validated, the position data is deleted (the data state becomes &quot;Unknown&quot;).</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Delete train position in SoM"
 Guid="21f38b96-59db-4282-a0ef-c8ecbaaea010"
>
<PreConditions>
<PreCondition
 Guid="54366b06-846d-4f54-9579-7705393fafe6"
>Kernel.TrainPosition.Position.DataState == DataStateEnum.Invalid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e4a4be8d-1fcb-4ea1-945a-bbb90d84c8ad"
>DeleteInformation(Kernel.TrainPosition.Position)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; OS"
 Guid="35ee7cd3-9756-4a46-9993-de5f8c7117aa"
>
<ReqRef
 Id="9c767473-0d8c-4d25-b478-46a155d770a6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0f8ab7ea-9c75-485a-b72b-5fb9ebd24380"
>
</ReqRef><ReqRef
 Id="66ed413a-6b6e-4b23-b847-4b1870c4d831"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9223ad00-a481-42ac-be84-973dc2bebbab"
>
</ReqRef><ReqRef
 Id="c7fa380e-0e91-4109-8b8c-36f672fbb5d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3cfd1104-e174-4317-ad82-e567bbdd07c4"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7a469d5b-256e-490d-bb38-01976b5d9bbb"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ac63b54a-3257-434e-b8db-7bb4d439ef2e"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="4410dfe6-8c07-4fec-bcd6-feb2765c7bb2"
>Kernel.Modes.ModeTransitions.Condition15_SB()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f90ad43c-3a24-4329-9826-81c480d5f52b"
>Kernel.Mode &lt;- ModeEnum.OS</Action><Action
 Guid="edb51d2a-e7fa-4f50-948f-b930517328b7"
>DMI.MasterDMI().In_AcknOfOSMode.InputInformation.Disable()</Action><Action
 Guid="5d08e1db-7caa-444c-9127-90562a204aa2"
>Kernel.MissionIsOnGoing &lt;- True</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; UN"
 Guid="a7ec33e2-e7c3-4299-a88b-460aff4d2038"
>
<ReqRef
 Id="35b57760-082d-4302-8b18-b802e5cf93f4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="04eb638b-c1d8-4562-8fa5-4f356fc0388a"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d57b67c-63c0-437f-a486-f1820228ad98"
>
</ReqRef><ReqRef
 Id="64b644e8-aaed-41c9-ab84-f81ea4041d54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f1861286-453b-4e5e-83ac-fc321e6a50a4"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="2092670a-079e-49fd-b30f-8baac2015451"
>Kernel.Modes.ModeTransitions.Condition60()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7538c314-9121-4b7b-ab06-f821f7710269"
>Kernel.Mode &lt;- ModeEnum.UN</Action><Action
 Guid="2182ed1f-2929-4b59-919b-b99284d6b7ef"
>DMI.MasterDMI().In_AcknOfUNMode.InputInformation.Disable()</Action><Action
 Guid="57bff81f-7c98-42f0-8b15-305f0d22b5d6"
>Kernel.MissionIsOnGoing &lt;- True</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Invalid location"
 Guid="f03a2498-f42f-45e8-990d-1f612e6b7804"
>
<ReqRef
 Id="919e7d02-2e67-418e-a8b8-64d02e57674c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b0eb38e9-8e69-4dff-ae06-fd1d29974997"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ded068ce-eeb0-4c3c-a828-8f343fa4d86c"
>
</ReqRef><Comment>Delete the invalid position.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid location"
 Guid="4579db15-0807-4572-a774-8e48743df25d"
>
<PreConditions>
<PreCondition
 Guid="c19c92f6-cc67-4821-98e5-0f4f420c7d52"
>Kernel.TrainPosition.Position.DataState == DataStateEnum.Invalid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ae7b1a82-a63c-4205-ac18-243568e17fa9"
>DeleteInformation(Kernel.TrainPosition.Position)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SB -&gt; SN"
 Guid="bc3d6f34-095a-4d91-b0aa-c548802875f6"
>
<ReqRef
 Id="78a547a1-00ea-4e86-8af7-b0b4cbf45233"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3a11f755-9ad2-454b-baaa-db5dab30ba32"
>
</ReqRef><ReqRef
 Id="9a711b7c-ff6b-448c-a9cd-2aa9669899ad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c8500437-9f2e-40b5-9734-b424f7e21c68"
>
</ReqRef><ReqRef
 Id="84c57300-1791-4e2f-9eba-ad6f95834b74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2c229472-3bb4-4ddf-9d03-828d9a0e928e"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="06cc55f8-2ae8-4e51-b277-5bdcc9c7d925"
>Kernel.Modes.ModeTransitions.Condition58()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c5272313-c116-4ea2-a0f2-94d90d220f35"
>Kernel.Mode &lt;- ModeEnum.SN</Action><Action
 Guid="30193c8b-7c56-45af-9898-eb8838f13bcd"
>DMI.MasterDMI().In_AcknOfSNMode.InputInformation.RequestStatus&lt;- RequestEnum.Disabled</Action><Action
 Guid="7e340a3b-c274-4e06-83cf-fe98531e8b62"
>Kernel.MissionIsOnGoing &lt;- True</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Invalid location"
 Guid="7f81e4ed-d7ae-477c-a2ce-c6aba3c0afd8"
>
<ReqRef
 Id="e2eaea17-d87b-4c36-9589-0db802e46f40"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8ba7fee9-cb03-4985-bc0f-675b1d47f4b9"
>
</ReqRef><ReqRef
 Id="ebe785eb-406c-4459-b678-43e24f9ace82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5bf7ff94-5e46-4049-97bc-7ca47a8d9587"
>
</ReqRef><Comment>Delete the invalid position.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Invalid location"
 Guid="0dd8bfbc-4a1e-4d89-91a9-88a8f53916f7"
>
<PreConditions>
<PreCondition
 Guid="bf37711d-2e55-488f-a2b8-4a62d09d4714"
>Kernel.TrainPosition.Position.DataState == DataStateEnum.Invalid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e8c0934c-39c1-4c6d-9861-0e5670f56a32"
>DeleteInformation(Kernel.TrainPosition.Position)</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PS"
 Guid="6cb74c2b-d983-46e0-834a-3f67f9b875df"
>
<Comment>If the current mode is PS, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="af53a8ee-eaca-4c79-a01d-85f3e0f2daa7"
>Kernel.Mode == ModeEnum.PS</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PS"
 Guid="b9cf1794-8a10-49db-a7ee-949328c299eb"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; IS"
 Guid="78bdb0e0-3aac-4751-9c99-b9e0e6041d00"
>
<ReqRef
 Id="1f7c0bdb-ebd2-43fa-a7d7-9ddb32f18738"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7f4a818-ce04-4e7c-9447-624356bd0c9b"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="47b3331b-bd3d-4f58-bbca-41e6d71f0a22"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1deb49e4-46a1-44d2-8c09-8aeedb85a632"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; NP"
 Guid="78cee89b-d245-46b0-8c2f-63d223f72cbe"
>
<ReqRef
 Id="c992e785-b2fb-481d-9adf-38f344ab139e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aeec60b8-a287-4c94-bb6a-34c72625ac2a"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="c8d3f2a5-05da-4ba7-9af6-ee2365d80775"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4eebe104-8617-40a8-813c-fa8e0b054b94"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; SF"
 Guid="244e49bd-a692-4e21-8b17-81a9ea73870f"
>
<ReqRef
 Id="503d1cae-4c2c-480a-ba5a-c79ff94a27ca"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1bb33acd-8382-47ae-9f4c-05a20fec4574"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="959803d4-c51e-4277-a964-0d522eec48be"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d557dfe1-8174-43e9-984a-77f06bc12f1e"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; SB"
 Guid="6dc2f58f-9416-415f-a317-13cb924527b1"
>
<ReqRef
 Id="472d7f62-d5ee-4eb3-979d-2f947808bfc6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d9a2ae0-7563-4baf-a552-c99d7d0bb448"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="3ca8af34-7f58-459c-9b69-3b4d783eaf52"
>Kernel.Modes.ModeTransitions.Condition22()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7e0e6a1c-b1fc-4558-9e80-92ce7bd95a91"
>Kernel.Mode &lt;- ModeEnum.SB</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; SH"
 Guid="c577b626-6b81-4583-ba00-41cb3993e45d"
>
<ReqRef
 Id="f87aaccc-8a13-471a-8ed9-3316166a0be6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b3b5bd96-7442-40bd-bc42-ee6f3f0415f4"
>
</ReqRef><ReqRef
 Id="796a1b6d-6f3e-4983-b877-eadd0a1f1499"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="19277988-c0d6-422a-8809-5cfa5298ba93"
>
</ReqRef><ReqRef
 Id="45346988-48b3-4cb1-9db8-68a93d916895"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d00a3e4-d344-4c29-aa11-b0b9bb7c0d98"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="f09d7842-891b-4afe-ac8e-3971f801bb33"
>Kernel.Modes.ModeTransitions.Condition23()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e1a55a0a-00e5-401a-923d-91c644f26142"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PS -&gt; SL"
 Guid="79be1153-59b1-4645-b3d7-a10babc7ddbe"
>
<ReqRef
 Id="fda58be2-0a45-4ca6-9aca-dd6ee025561e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="07dc82bd-aca6-4d3c-85fd-3d286f25209f"
>
</ReqRef><ReqRef
 Id="57975d77-7335-4135-bac0-954cd1debb67"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fb31ecfb-034c-405c-ba6d-e1bc1dc061f0"
>
</ReqRef><Comment>Transition to SL.</Comment>
<PreConditions>
<PreCondition
 Guid="e80eaf7c-d367-49ca-82dc-132ada05d49e"
>Kernel.Modes.ModeTransitions.Condition14()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0c3b7701-d294-4cbe-9b23-b120ab1bf4ab"
>Kernel.Mode &lt;- ModeEnum.SL</Action><Action
 Guid="cdecfa16-06e3-4ee2-a9fb-13f92d29907d"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SH"
 Guid="4dc91b00-7218-43de-9eb2-350896eaba71"
>
<ReqRef
 Id="d0f2374c-749b-4fbb-9d15-8d758e11d01c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8cb67438-ff0f-4de1-a133-a02390037b69"
>
</ReqRef><Comment>If the current mode is SH, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="e365c02c-bff3-45a5-8fea-b1b644fb7a9c"
>Kernel.Mode == ModeEnum.SH</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SH"
 Guid="0248fb83-ab80-4fb1-9da9-e2704e8e10f4"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; IS"
 Guid="e5f3d8fb-283d-4315-9a01-7e3cc93b76ea"
>
<ReqRef
 Id="4a6919cb-0d87-4576-94c3-599c5fa05650"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf48ca17-402f-4353-837a-e09dd8b22ab2"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="a4560f44-48ff-4eef-80b3-e25d905f5806"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e1d7d77d-dab9-46fa-8f57-5739b41806da"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; NP"
 Guid="2bf03bb9-442d-41f4-9ad5-57c0ae987427"
>
<ReqRef
 Id="61bfa20e-353c-4b04-974f-25613e5ad27a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="06a17352-c5b9-45a3-af34-2d1dc5bec372"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="32ed2b9c-e3d0-4294-b9c3-2832fa07ce89"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6bd4436d-b109-4afa-b427-3905a431dbb4"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; SF"
 Guid="5fbe59b3-068c-4b54-b742-249bc1f13bf7"
>
<ReqRef
 Id="f92b955b-87bf-4b0c-a9a0-d731341bc1fe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55c361df-30ad-4160-94ed-974e476b2f9a"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="e7424ad6-f5f3-41d4-964a-3f7392504da8"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4ca105b6-0e36-4b2f-a2bb-b93c1738a4d2"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; TR"
 Guid="820d809f-d500-4be4-9336-50f378538876"
>
<ReqRef
 Id="fc41523c-34f1-4a78-a5a4-62b34fb0e0be"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a1274fd-4f94-4aa9-8abb-bd9e8ee0320c"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8c751ad2-e917-43f5-86ff-ccd5b3bfd655"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f1d23fd4-6099-46ab-83b5-4b8dd828cfe0"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="a9dd1e2a-da82-4bc0-a5aa-c7373b7bad1e"
>Condition49() OR 
Condition52() OR 
Condition65()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="74adedf0-1ac0-4910-a4fc-4ee8787e43a7"
>
<Comment>Specify the Trip reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Stop if in Shunting"
 Guid="c4971760-f5e1-4451-b6c5-1efb95faa74b"
>
<Comment>Stop if in Shunting</Comment>
<PreConditions>
<PreCondition
 Guid="81487b03-ceca-48e3-843a-80050d9aea99"
>Condition49()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ee23b4f8-cbe6-4483-9508-88cdcceee4d7"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.StopIfInShunting</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Unexpected BG"
 Guid="f4e3fdbf-720e-470c-835f-00a973a83dcc"
>
<Comment>Unexpected Balise Group</Comment>
<PreConditions>
<PreCondition
 Guid="211d1bc2-2b90-4f35-a1da-55028967f995"
>Condition52()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c8e317fb-3331-4c27-b4ba-a774c6fb407a"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.UnexpectedBaliseGroup</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Invalid balise version"
 Guid="4597eaf9-37d9-4d23-af71-1a8e753147b7"
>
<Comment>Invalid balise version</Comment>
<PreConditions>
<PreCondition
 Guid="727cdd0b-4684-4765-9a07-f3fb8b872c1c"
>Condition65()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a4956b04-e84d-4b16-90a6-ec8b14de8c19"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.InvalidBaliseVersion</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="00e194bf-0339-4cff-a095-3b052d8bbc48"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="4d6468d8-7d79-4f0e-b737-a930c7340fe2"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="6aa2cd3b-3475-4776-8e2b-42601bdef416"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="1792e4b9-7ba6-469d-8ed1-6b648d805376"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; SB"
 Guid="2443fcf2-e62c-4e62-917a-0ced32c0c8e2"
>
<ReqRef
 Id="e088d655-dbd3-4873-8a49-2aec0236cc82"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8f7c77ce-37a3-4c14-9017-3c90fb459c8c"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="cbc7c29e-8b45-49e8-a4c7-f16ad04e3cf8"
>Kernel.Modes.ModeTransitions.Condition19() OR Kernel.Modes.ModeTransitions.Condition27() OR Kernel.Modes.ModeTransitions.Condition30()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="34e4fa64-d835-49f0-a949-a4e46ac3ae52"
>Kernel.Mode &lt;- ModeEnum.SB</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; PS"
 Guid="8b2e472e-5768-4619-a414-15914cd171bf"
>
<ReqRef
 Id="d8df644e-eb2f-4c77-a5cb-8dcf39f2b359"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8382edee-1a68-4849-965a-69c4a5971e9a"
>
</ReqRef><ReqRef
 Id="1cd8355b-cc0b-40f9-aa32-323573c96f02"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29e02eff-e306-4a2a-9735-40117ba4f728"
>
</ReqRef><ReqRef
 Id="77f7a3f9-a5a0-4a11-876a-5da84bc879e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6192cac8-245a-4c55-8b6b-9e8f1ec76151"
>
</ReqRef><Comment>Transition to PS.</Comment>
<PreConditions>
<PreCondition
 Guid="473d06b2-e0c7-486c-b4e3-71b838905d05"
>Kernel.Modes.ModeTransitions.Condition26()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2a3a6a88-5726-4389-8d8d-65130efa0e60"
>Kernel.Mode &lt;- ModeEnum.PS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SH -&gt; NL"
 Guid="713883f2-e233-4911-a15c-4248c8b50d72"
>
<ReqRef
 Id="229305b9-59c1-4917-87bf-39e111b6d9d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1e1a6170-58b2-4f6f-bc09-ba7631851b46"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8c1118ae-462e-4ba3-8bdb-29f6768adff1"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="f6423b94-97a7-4a81-bf9e-4f0e32ff9546"
>Kernel.Modes.ModeTransitions.Condition46()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b80cc54e-8c7b-4ffa-83f6-6a3726117f50"
>Kernel.Mode &lt;- ModeEnum.NL</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="FS"
 Guid="8da14eb5-bd44-414b-8e21-06963c27ba89"
>
<Comment>If the current mode is FS, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="36e7f05f-671b-4eb0-bdbc-ae2ca938a6af"
>Kernel.Mode == ModeEnum.FS</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="FS"
 Guid="9abe8cb5-854d-4a01-8001-51f1db7f370a"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; IS"
 Guid="fc44fecf-2fe1-469a-b8b5-f3b3da3ae4bb"
>
<ReqRef
 Id="138c013d-b168-4ba7-9b7d-916df9f51d74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cbc6bf2f-da55-4f43-8005-d30482f2da66"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="2094c8f9-c100-4eca-bd32-67e6ae9a63ac"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5cfe8754-edf7-4d29-9e2d-fb0c97e4c9ca"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; NP"
 Guid="0d43fb93-9342-4a80-a8f4-f42e788d1df6"
>
<ReqRef
 Id="1691397a-86d2-4995-a0ee-3383e8819c37"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d1208568-81b1-42fd-b87b-332af1ffabfd"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="22f08f2b-675e-44d2-b02a-99edcee972ec"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="bd565579-add2-4686-8aec-19d9a432c130"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; SF"
 Guid="83baeaa3-2505-43b6-89ac-cb51a04b5c8c"
>
<ReqRef
 Id="615c21fa-57cd-4b60-b4d1-a578420e7b70"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1693cad5-16d1-4eae-b3ac-964e25954f26"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="f0710968-3b62-404c-8988-b41d040381ac"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6984560d-3165-437e-8831-30773bb71fe2"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; TR"
 Guid="f8f6330e-3c44-4225-b28f-68af16bd2527"
>
<ReqRef
 Id="3a4976e6-64bb-47e3-9c8d-1d7c3e5de73e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="176e7973-de1d-4ab3-8035-842c2d3df330"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b69eafcb-9bcf-4dbe-8c09-5adf84a907e7"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d71600e-f1bb-44b6-a714-52cc8d78421c"
>
</ReqRef><ReqRef
 Id="3520c91c-8938-4bdf-b683-bc1fd7071fd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d139bc7-1fbb-4fd0-afd4-e4b0b650fb7c"
>
</ReqRef><ReqRef
 Id="277ee440-7786-4aac-8364-7e60a82e94a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d402fdbc-cc87-4cee-90d9-9248e3aa2fc6"
>
</ReqRef><ReqRef
 Id="f27f67c3-6ff7-425e-8ab3-f3eb40f14326"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9be1a5a8-4741-4794-ac92-c3bf47be321e"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4199f55a-1e96-4bf7-8464-d7b743a0226d"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="7a25fda4-c429-4fde-8b17-6923aff1259a"
>Condition12() OR 
Condition16() OR 
Condition17() OR 
Condition18() OR 
Condition20() OR 
Condition41() OR 
Condition65() OR 
Condition66() OR 
Condition69()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="e6aa117a-aaf6-43a2-afe9-9b80a8e421ce"
>
<Comment>Specify the trip reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Overpass EOA/LOA"
 Guid="a1c48e6f-b7b7-4a3e-abdb-a615e6e849d5"
>
<Comment>Overpass EOA/LOA</Comment>
<PreConditions>
<PreCondition
 Guid="966a26af-5983-4599-8cf4-11616f161791"
>Condition12() OR Condition16()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="90939073-3f72-40f4-9007-4f411c19535e"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Linking reaction"
 Guid="283f005a-e572-459a-bbfc-7ee09dfd31b9"
>
<Comment>Linking reaction</Comment>
<PreConditions>
<PreCondition
 Guid="2324f3cb-e015-4615-a766-11316b840000"
>Condition17() OR Condition66()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="01c0f8ed-12ba-442a-8c51-d7813c5f21f4"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.LinkingReaction</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="69b68d92-1e3c-4e5d-be5f-eafea9166dc4"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="75a93ffa-eb7d-4e21-9fa7-3f1e650782af"
>Condition18() OR Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0b2a4a1a-4417-41d8-95b9-2fb5407c87f3"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="EURORADIO Max time between message exceeded"
 Guid="df0c5870-47e6-4269-9118-932868dafa95"
>
<Comment>EURORADIO Max time between message exceeded</Comment>
<PreConditions>
<PreCondition
 Guid="a1bc77ec-36f4-4e96-89f2-a814e322e9ec"
>Condition41()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="489bdb8d-f0e4-4a8e-a0f6-5ec58b69de40"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.EURORADIOMaxTimeBetweenMessageExceeded</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Invalid balise version"
 Guid="ec7da354-1762-4d97-a9ab-737d0c770847"
>
<Comment>Invalid balise version</Comment>
<PreConditions>
<PreCondition
 Guid="b5555e33-8f78-4b81-b145-4c375e297ae6"
>Condition65()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1b742e62-f23e-40fd-a82a-b7ed9287ed2b"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.InvalidBaliseVersion</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Front end in rear of the SSP or Gradient"
 Guid="c809b05a-bd53-4ae7-9856-b86d8d4fc2b1"
>
<Comment>Front end in rear of the SSP or Gradient</Comment>
<PreConditions>
<PreCondition
 Guid="9d27ff56-b17b-4817-9c83-6e0f25981d75"
>Condition69()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="02931fc8-af0a-4134-b26e-abea20cb5ee3"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.FrontEndRearOfSSPOrGradient</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="f6eaaeb4-ce67-4f1c-af8b-82c7bd9a7ece"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="c90e6bec-bfff-426a-8e3c-2e64cd9283f9"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="c8624373-cdd3-446c-b989-92fad45c50a7"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="d012256f-1661-4504-b667-c8a72c2ecf58"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; SB"
 Guid="43dcefaa-3529-4a81-8aa7-cb8260234c0c"
>
<ReqRef
 Id="b9e772cb-445b-4ea8-a051-f27762396d9c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6daf7a52-430e-45bf-9393-2caef7070b8b"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="26eeab2c-f29b-45c8-8250-3b3b8b1b76f6"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="963ae532-2468-4447-8b21-64ae0aa012e6"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="24e42029-6b77-47d8-a64b-1ac00f5aeb07"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="93e57994-cc6e-4359-ad2b-2447aead68fe"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="6869cc3f-9c83-4cad-a289-e7fe12ec9459"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; SH"
 Guid="5cace35e-0964-4481-90df-6228ffc41449"
>
<ReqRef
 Id="5cb4bfd5-9942-4b6d-a93b-18ad368e8a49"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="792d8d6b-0880-4abc-93e0-3b2f4a6e73d2"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="57923eff-b2d0-4035-bd55-72bd58ed89ea"
>
</ReqRef><ReqRef
 Id="ff6538d5-0eef-4940-86fb-edb285ba5066"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ff54ac4-d772-41d0-ae60-5a7ddb328661"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="85c2a8dc-5559-4aa2-b095-ea6fe358ac97"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c368623f-1739-455e-9499-b5f0103b6466"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="781f4376-89bd-4cce-aa33-e60775f0ca7c"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition50() OR Kernel.Modes.ModeTransitions.Condition51()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9fe0a95f-f89e-4f08-9e17-cb2bb00c610d"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="0f117e98-f71e-4368-81aa-e52b5dedfc8f"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="54ae2dc2-442f-450a-90c2-a4e49d120c73"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b021cdac-b3df-4542-8495-8bf26f075aba"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="19eb38fd-659c-472e-86a2-6e1ca824dd3a"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="86142fc9-0665-4dd2-8e35-6068bd3339ff"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; LS"
 Guid="fd967174-507b-4ce3-b3ac-d462c4316790"
>
<ReqRef
 Id="3869d856-76b1-4286-8b39-a7c55a10a465"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="97856654-551d-494b-b501-8718a281e9a3"
>
</ReqRef><ReqRef
 Id="887a3be9-9d97-4eb6-9899-061f9b9fed93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="628a7f5e-7cb3-43c1-9da5-bee99413d66e"
>
</ReqRef><ReqRef
 Id="11359b80-21ab-4618-8bc8-d3b7a07f8566"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6a404d75-8159-4e59-ab60-37b425a2a4af"
>
</ReqRef><ReqRef
 Id="0fe12114-3bcd-460f-8e08-ccb61b620101"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ae25a5cf-821f-4428-8551-4e334db8a18c"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="64a7aa58-9909-4960-9625-d3403660c7ac"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="92b9ee60-61ec-4d5a-9ee4-52df1df4ae30"
>Kernel.Modes.ModeTransitions.Condition70() OR Kernel.Modes.ModeTransitions.Condition72()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8ed5d931-ad69-4b26-bae8-126c4719c5aa"
>Kernel.Mode &lt;- ModeEnum.LS</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle driver acknowledgement"
 Guid="194ac6dc-c8bc-4d35-aaa3-2cfcfaed70db"
>
<ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d208187e-9517-42c9-b86f-54ea4480a893"
>
</ReqRef><Comment>Either initiate or disable an acknowledgement for LS mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Driver acknowledged"
 Guid="79aa13b1-e8c4-4b5b-a5cb-9d71876049fa"
>
<Comment>If the mode transition is cause by the driver acknowledging the proposed LS mode, disable the acknowledgement request.</Comment>
<PreConditions>
<PreCondition
 Guid="7fa09ed0-8c74-4f02-b194-14aca5c2e8bc"
>Kernel.Modes.ModeTransitions.Condition70()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d6a741a6-cd1e-4c40-a94f-dac44356f295"
>DMI.MasterDMI().In_AcknOfLSMode.InputInformation.Disable()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Driver didn&apos;t acknowledge"
 Guid="41d9692d-ca38-49d1-a7cf-fa3bde7a77c2"
>
<ReqRef
 Id="5a176c87-642a-4578-be99-2adb345dd932"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="68dc1878-3ca6-4b89-8aa1-df8b24491559"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ee4dec20-0318-4ce8-9aa5-e021245a9a9c"
>
</ReqRef><Comment>If the transition is not caused by the driver, initiate an acknowledgement request.</Comment>
<PreConditions>
<PreCondition
 Guid="e93dd4ae-fecf-4bd9-aac8-b52e6a6e9870"
>Kernel.Modes.ModeTransitions.Condition72()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7e908f68-5ab3-4399-8c5b-2a93cbb89715"
>DMI.MasterDMI().In_AcknOfLSMode.InitiateRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; SR"
 Guid="09ef4d61-cee0-4e43-9886-7de417b2a6bf"
>
<ReqRef
 Id="3660ea98-30cf-4149-bd24-1356e7d0067e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e687701a-9efe-48e4-a259-f9ad3b16ca57"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c97e71ef-f6e8-42e7-a76c-b7a4fbb4ac96"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="0de2f3be-ee91-425d-82f1-fb2eeaff6cfd"
>Kernel.Modes.ModeTransitions.Condition37()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="710496db-b7d6-47d5-9b66-6924aaa03904"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; OS"
 Guid="ce3a5dc5-5cda-4d2f-bb99-1677ea59d6a4"
>
<ReqRef
 Id="3ac36732-c2f7-4d57-a5f2-3f1f3f23a508"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89ffbd95-7757-44ee-815d-44391610192d"
>
</ReqRef><ReqRef
 Id="2ef2992f-43ce-4f58-abf6-55560cf910bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd0265e5-4e52-47f5-b822-2bd4f7894d52"
>
</ReqRef><ReqRef
 Id="de18f207-08ba-467b-a877-d3c5a458123d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="90906141-ce41-4dca-879b-2d0738848344"
>
</ReqRef><ReqRef
 Id="ee3fda90-8914-4b80-8367-51faabd4f1b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="addbe1d5-e210-4802-94ac-f19439161f6f"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29d98964-c4c1-4beb-958b-afdba0fedb18"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="52b24f0e-762f-4c56-8538-25ab52856743"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="fb17d293-54e0-43f9-b77d-8ef9c19d547b"
>Kernel.Modes.ModeTransitions.Condition15() OR Kernel.Modes.ModeTransitions.Condition40()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4a5aafff-cfdc-43fa-a707-173de0e02127"
>Kernel.Mode &lt;- ModeEnum.OS</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Handle driver acknowledgement"
 Guid="3adf6ad1-a3d5-44ef-8e7f-edb23797bbe4"
>
<ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ff8c75be-e72a-456c-a7dc-0db9e4afc3b5"
>
</ReqRef><Comment>Either initiate a acknowledgement of OS mode request.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Driver acknowledged"
 Guid="191ca14b-91f2-4120-8ec2-d3eeff866206"
>
<Comment>If the transition was initiated by the driver&apos;s acknowledgement of the proposed OS mode, disable the request.</Comment>
<PreConditions>
<PreCondition
 Guid="ba8a792d-1354-491c-908f-07308e479026"
>Kernel.Modes.ModeTransitions.Condition15()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f22aebba-3be2-4c2c-9ef5-bdd83eb6ae4f"
>DMI.MasterDMI().In_AcknOfOSMode.InputInformation.Disable()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Driver didn&apos;t akcnowledge"
 Guid="c9df3e3f-fdc5-42e4-8e5a-3d05c24c736d"
>
<ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9952fd82-b71e-4cab-951f-7156618418c0"
>
</ReqRef><ReqRef
 Id="531deda3-99b6-4777-9b59-5e2178833486"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b8cabd8c-07fd-4ccc-9996-03bf9973fc9e"
>
</ReqRef><Comment>If the transition was automatic, initiate an ackowledtgement request for OS mode.</Comment>
<PreConditions>
<PreCondition
 Guid="fb6c4c8b-4bec-451b-a1d8-9093fb536c98"
>Kernel.Modes.ModeTransitions.Condition40()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="fa739839-343c-4c50-99d5-f0acdd7cff28"
>DMI.MasterDMI().In_AcknOfOSMode.InitiateRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; NL"
 Guid="f82cfd51-2ab3-4912-acaf-3e610357ffcb"
>
<ReqRef
 Id="40d46ac2-0ecc-4032-8bcd-450930f78722"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e071392-b877-4d05-95f7-0dacd3abfcbb"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8b37ad29-d5b3-4a62-b83c-5a720ec0b39c"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="1f72b300-d1ee-422c-87b3-8759f536d243"
>Kernel.Modes.ModeTransitions.Condition46()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7adb368b-c277-412b-a337-d049e8f6ca08"
>Kernel.Mode &lt;- ModeEnum.NL</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; UN"
 Guid="dd9889a4-6e0a-410a-887e-c3d194ec2a66"
>
<ReqRef
 Id="5675acff-2868-4d02-bf88-3e36f5bfdec8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0246359-b095-442f-8525-60536e7e97b7"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="26fcdedd-71b4-4927-aef7-5be54a2b6ebe"
>Kernel.Modes.ModeTransitions.Condition21()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="20fa1336-1807-46cd-93de-021b547e767c"
>Kernel.Mode &lt;- ModeEnum.UN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; SN"
 Guid="9e0d08a3-8c91-48b0-bc0b-7637c6b0cbe2"
>
<ReqRef
 Id="94a105c0-29c2-4a6f-927c-11cb22bc4a0e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="65e01d10-4072-42cf-96d7-32a11d43d196"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="fa719332-077f-48b6-8826-649801ec1af9"
>Kernel.Modes.ModeTransitions.Condition56()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9fee2875-8814-483d-b6c4-79d6e6ae5261"
>Kernel.Mode &lt;- ModeEnum.SN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="FS -&gt; RV"
 Guid="598abace-1830-4af6-a90b-b03e097d77c3"
>
<ReqRef
 Id="9083774e-40b2-4882-8d7f-81611bde49de"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c13bf98-6492-4c34-8ea4-cd57b201868c"
>
</ReqRef><ReqRef
 Id="3145c17a-3e8d-4814-a54e-7c42d2781956"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="be077280-3380-45ea-aab4-e1178f1458f7"
>
</ReqRef><ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c28911f8-15cb-4404-b02f-42d7d285eb3c"
>
</ReqRef><Comment>Transition to RV.</Comment>
<PreConditions>
<PreCondition
 Guid="696de9b5-724c-4101-9513-cd6e80fb8d7a"
>Kernel.Modes.ModeTransitions.Condition59()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="629238c8-c022-471f-ba86-bf62fdc40211"
>Kernel.Mode &lt;- ModeEnum.RV</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="LS"
 Guid="c9e218bd-2159-4ccd-8b5f-38f7e34e1493"
>
<Comment>If the current mode is LS, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="2f6c0ff5-2f6f-4859-8efb-d1c02197b864"
>Kernel.Mode == ModeEnum.LS</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="LS"
 Guid="4095e0e7-1ae1-4b3d-b992-cae002476145"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; IS"
 Guid="b6dc5175-0f8e-4ed8-ba41-35bd442eb5e1"
>
<ReqRef
 Id="5de5f028-f64a-40b1-a2bd-db3938f36bd4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="84d9d820-dd06-4551-a656-96202a94d024"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="1dd9f0ee-c458-4f0e-b0fb-25fc9e35d3c3"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="875eea56-c776-484f-a953-c5b5b84333b5"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; NP"
 Guid="7d5485ea-19f2-44e7-be17-f58e5d68aafb"
>
<ReqRef
 Id="a55f9740-6067-4dae-9eeb-99cfa3776aeb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9d9d5f51-1bc7-470c-acf8-ceb41e1a6db0"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="8ff4188f-c652-4922-9a4a-31ee739f83cc"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="eebccfac-cf6a-4a7c-845f-8d8a076e75ae"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; SF"
 Guid="d93759b5-c204-43c2-a757-8aeff59247b3"
>
<ReqRef
 Id="9dcd45e5-c858-40b3-be85-c661b862d38c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b20b4bda-55d8-471c-8d53-67c4129a0e5e"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="067a360f-52ee-4714-98a5-51e7e51f3b0f"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="fe83d849-5a7e-4193-b24d-ed7d481e340a"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; TR"
 Guid="7f3863ae-5b9a-4048-a7fd-ffa5191c16a8"
>
<ReqRef
 Id="9d4bfce8-04ff-4559-817e-90d344267e5f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b6ae13a5-f5fc-4ade-91cd-27295321c209"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8b4886cf-e1d0-4639-98d0-f96679281cb7"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7a8489ca-88c3-4b8d-907e-7c48bc65c9de"
>
</ReqRef><ReqRef
 Id="3520c91c-8938-4bdf-b683-bc1fd7071fd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4c0a3489-3b1c-435c-9e79-e89008cc2c7a"
>
</ReqRef><ReqRef
 Id="277ee440-7786-4aac-8364-7e60a82e94a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cf7d0b87-a463-4807-8d54-aef4ee297a99"
>
</ReqRef><ReqRef
 Id="f27f67c3-6ff7-425e-8ab3-f3eb40f14326"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da88a336-ca1b-494f-a777-e56bcbe34690"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9d26752-5bf7-4a4e-9015-506a3e30eac7"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="02bc785b-12ce-4f94-8304-b9adf4b48440"
>Condition12() OR 
Condition16() OR 
Condition17() OR 
Condition18() OR 
Condition20() OR 
Condition41() OR 
Condition65() OR 
Condition66() OR 
Condition69()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="8a65ab9d-2d6a-4576-b6ca-758ef39afe52"
>
<Comment>Specify the reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Overpass EOA/LOA"
 Guid="e7a40c4a-e282-48e8-8a2e-a8bfb61b3fd4"
>
<Comment>Overpass EOA/LOA</Comment>
<PreConditions>
<PreCondition
 Guid="4c7bec96-defb-4cc5-a9be-3075c727b3ad"
>Condition12() OR Condition16()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c48b4ba2-414c-4d48-94fe-620105d11bbc"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Linking reaction"
 Guid="57083f8c-200f-4802-8dbe-eeef693d3d98"
>
<Comment>Linking reaction</Comment>
<PreConditions>
<PreCondition
 Guid="c59d1d57-3d5b-4e7f-beb8-8cf0ba550634"
>Condition17() OR Condition66()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3e875b20-ef53-48fc-991e-56508006b6d0"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.LinkingReaction</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="780f5d34-0cc5-4e4e-83c5-968bd6fdc7d3"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="ffe5010a-3b9a-4167-a393-3d6df369abae"
>Condition18() OR Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="68eb23da-2ea8-4005-8539-bd5ecb65ba58"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="EURORADIO Max time between message exceeded"
 Guid="9385e092-98b8-4443-8cfe-9dd4c4413ca3"
>
<Comment>EURORADIO Max time between message exceeded</Comment>
<PreConditions>
<PreCondition
 Guid="9522e846-26e3-45c2-ba70-43aab484c763"
>Condition41()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="332e5b07-7b27-4831-ac89-a49e3a5c7827"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.EURORADIOMaxTimeBetweenMessageExceeded</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Invalid balise version"
 Guid="d68d3491-53cf-4104-8e32-d969a2cb56ee"
>
<Comment>Invalid balise version</Comment>
<PreConditions>
<PreCondition
 Guid="4a72b91e-0b37-42a2-88e5-3180d53f9fbf"
>Condition65()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="424cac2a-a003-4f10-88d8-9452963ea964"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.InvalidBaliseVersion</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Front end in rear of the SSP or Gradient"
 Guid="5185fd02-98c1-47d0-885c-61b6e0e27e84"
>
<Comment>Front end in rear of the SSP or Gradient</Comment>
<PreConditions>
<PreCondition
 Guid="287d0019-4090-447f-a442-8b7bba5634bf"
>Condition69()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0c28ed0f-9c71-4fae-a1a0-f37f4bee3a4d"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.FrontEndRearOfSSPOrGradient</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="c95d2981-4e0d-4e60-abb9-549fba42f364"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="a6fb6761-89a8-437a-b5ed-667bef0ba565"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="03ab1fff-37fb-421d-ae46-0e2379874fae"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="8a47645c-8db8-42cd-9090-bfabc3d9e244"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; SB"
 Guid="811dd42b-858e-42c7-b070-84ce1db41de4"
>
<ReqRef
 Id="58433562-235a-432d-915d-e72cc3f70c73"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="81084ef3-a2dd-4047-b5a8-d562ac27631d"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="461d70ea-0565-438e-b42b-c1a1ca3250cc"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9f0351a4-2c75-4b11-a3e0-bacac2250369"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="8bc8247a-c1a9-4784-af8d-837fec157aa9"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4ea4b783-3512-4556-a391-2dc7bc052b17"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="3fc08de2-97aa-4d19-8cf0-828697f34978"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; SH"
 Guid="abb70635-4b1e-4fcf-965f-087e839981ec"
>
<ReqRef
 Id="43137d9a-2c8f-4dd4-95ae-a7d2d32f13f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="494df402-3f21-4f20-8f98-c8d0eac9ce55"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="04eb34ca-3882-4730-a1a3-1db530fb497d"
>
</ReqRef><ReqRef
 Id="ff6538d5-0eef-4940-86fb-edb285ba5066"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4ed6154d-c4a1-42a2-a7e6-b9f1c52695a2"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d902e2c8-23a5-41dc-82cb-c1a325bc87df"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a6cd79a9-cdd7-4a63-839b-d1c19b69a3cf"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0cea37fc-9f34-4919-b731-013bd947cbdd"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="b0260fb4-69f1-4e48-9454-b596fe5b3342"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition50() OR Kernel.Modes.ModeTransitions.Condition51()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b5215a1a-fc01-4533-9260-a393853372c1"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="725abc6e-c160-4a79-aa5f-936d21f77e7f"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21e7f2c1-7b7a-4070-94c8-cc6feee54174"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c86b3337-a7bc-4556-a6e9-93a747b4323f"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="8069183c-bdbf-4c3b-97eb-a68366eed6cf"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="6093bfd7-b034-4498-80ad-942909ee0f07"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; FS"
 Guid="098ff859-18a6-4aa7-a200-1ef676393494"
>
<ReqRef
 Id="4b9d8ab7-07d3-4e50-8bfb-f4317b327e14"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d7929c8-fcd9-466c-97c2-6278afe9fcaa"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5e99fdd9-b663-4e67-818e-1aa2da8401a1"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="ee73f2c1-2384-41d2-844f-dd469cceb7af"
>Kernel.Modes.ModeTransitions.Condition31() OR Kernel.Modes.ModeTransitions.Condition32()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="eef8b759-ec90-4fb9-b77d-fa8bd4502f38"
>Kernel.Mode &lt;- ModeEnum.FS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; SR"
 Guid="12b8f128-c8dc-465d-b42b-1f404c864ced"
>
<ReqRef
 Id="8162358e-10fe-45f4-90f6-aa80df16375b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="39e15aaa-6506-4e20-8cac-79a3139e3088"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5f755202-6ea2-4a76-adc9-da2508233a04"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="92c6b6ff-1742-4e82-94e7-8dc476d40f17"
>Kernel.Modes.ModeTransitions.Condition37()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e9cb6850-4ae4-45c9-ac65-b4b686b8f082"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; OS"
 Guid="d1c92ee2-4dd5-4df0-9a84-70e1e178ecb9"
>
<ReqRef
 Id="57ca4a0f-1b57-41ab-89a5-62d398dd2adb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c3178a85-97cc-4760-aa44-c1483da9508a"
>
</ReqRef><ReqRef
 Id="ee3fda90-8914-4b80-8367-51faabd4f1b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9c93cf87-7893-4d3c-b3e4-bd7fed854718"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2de31cc0-4aa4-45d8-8811-afcd73512054"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fbb6af2b-5d12-4d7e-a04e-d996a10d7c9d"
>
</ReqRef><ReqRef
 Id="de18f207-08ba-467b-a877-d3c5a458123d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="66f1cdd8-9cab-4bb9-a771-90cbd65a0d2b"
>
</ReqRef><ReqRef
 Id="2ef2992f-43ce-4f58-abf6-55560cf910bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="53c527ea-6175-44e9-945e-3f85617edd54"
>
</ReqRef><ReqRef
 Id="b7585752-d7a9-4f7e-a8e0-da0c5c408f3e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e194117d-0119-44d4-91d2-3ceb1c02c054"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="26cd6b08-4a0c-4513-b471-97b59fd8ad90"
>Kernel.Modes.ModeTransitions.Condition15() OR Kernel.Modes.ModeTransitions.Condition73()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e47fa42a-3e9e-4569-a4f2-1b887d8af248"
>Kernel.Mode &lt;- ModeEnum.OS</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Handle driver acknowledgement"
 Guid="403b6e9e-7073-4b6c-b968-8324b23a362b"
>
<ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ee79f7a4-741a-44ab-943b-dfd0fa56808b"
>
</ReqRef><Comment>Initiate or disable the OS mode acknowledgement request.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Driver acknowledged"
 Guid="cc73864e-8909-4dd1-9fb8-260bef4ec1ea"
>
<Comment>If the transition was caused by the driver&apos;s acknowledgement of the OS mode, disable the acknowledgement request.</Comment>
<PreConditions>
<PreCondition
 Guid="394ecd5e-1356-4f33-82b3-ac8a82ba9fb9"
>Kernel.Modes.ModeTransitions.Condition15()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2384bf59-8a5a-47ba-81f1-3b6ec6e75247"
>DMI.MasterDMI().In_AcknOfOSMode.InputInformation.Disable()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Driver didn&apos;t acknowledge"
 Guid="a82a8d54-9ab2-467d-af5a-89af752a9a2c"
>
<ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="733403d5-18f2-4b60-bff3-eb008931eea3"
>
</ReqRef><ReqRef
 Id="531deda3-99b6-4777-9b59-5e2178833486"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a26b823a-d1e9-49b4-9f93-9d2a6654bd9c"
>
</ReqRef><Comment>If the transition to OS mode was cause by entry in a mode profile area, initiate an acknowledgement request for SO mode.</Comment>
<PreConditions>
<PreCondition
 Guid="9176e278-ff61-4199-a792-f2abde8b5ee4"
>Kernel.Modes.ModeTransitions.Condition73()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9542f2bf-0f2e-42b8-bf53-f23aa3a94f4d"
>DMI.MasterDMI().In_AcknOfOSMode.InitiateRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; NL"
 Guid="e837bccc-c82f-405f-9720-4a821a150853"
>
<ReqRef
 Id="42d6a0e1-f614-4e02-98ad-c9ef875fc15e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="990efcbe-aa37-486c-a3c1-d4804c7630ff"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="49fdbf62-85ec-4714-8767-c5cdb55ced1f"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="c99254d7-810a-4d31-a873-880405ad120c"
>Kernel.Modes.ModeTransitions.Condition46()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="6e44fd78-c0f5-4336-85bb-78bfee33303d"
>Kernel.Mode &lt;- ModeEnum.NL</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; UN"
 Guid="21cc1e06-b584-451d-ad8e-21dea2231645"
>
<ReqRef
 Id="2d414365-11d2-4d3c-bc19-d5daac6f13f4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fdb9df69-aaa8-46f7-90b3-29a5a6386e7d"
>
</ReqRef><Comment>Transition to UN</Comment>
<PreConditions>
<PreCondition
 Guid="22801bbc-294d-48b3-870c-c294fd8205ee"
>Kernel.Modes.ModeTransitions.Condition21()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="99f4d4fd-0786-4410-b529-b27fc3e64620"
>Kernel.Mode &lt;- ModeEnum.UN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; SN"
 Guid="d6ef377d-ef94-4905-aa45-884ec92c8b49"
>
<ReqRef
 Id="4f0eacd3-e3cc-46c1-b677-5a2cce04256f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3f8b7e49-15d6-4a25-af39-10c8bebb618a"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="4ff49408-23d8-454f-a89e-bd0ea4f16f81"
>Kernel.Modes.ModeTransitions.Condition56()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2c1be58d-d8e6-4d24-b4dc-f3370fb6f573"
>Kernel.Mode &lt;- ModeEnum.SN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="LS -&gt; RV"
 Guid="cb6239ec-f623-45ca-b6d4-5f48091e50fd"
>
<ReqRef
 Id="a932c422-9b9a-4d56-b222-f61d470605a4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="85361eaf-d124-47f4-bf6e-6707eeaa2964"
>
</ReqRef><ReqRef
 Id="3145c17a-3e8d-4814-a54e-7c42d2781956"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4b680489-d179-4d02-af90-3cbc570e0580"
>
</ReqRef><ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ae3bdae0-79fe-4b8c-a4f1-77fceb147d2e"
>
</ReqRef><Comment>Transition to RV.</Comment>
<PreConditions>
<PreCondition
 Guid="060da22b-56df-45f9-8f56-0ee39a5159ce"
>Kernel.Modes.ModeTransitions.Condition59()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f2884d3e-4cad-472d-be86-4096e70d4729"
>Kernel.Mode &lt;- ModeEnum.RV</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SR"
 Guid="005fb8d1-64d7-4b22-ad82-7ae42149d824"
>
<Comment>If the current mode is SR, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="3de7cd4a-920c-4c9d-962f-d854620d8317"
>Kernel.Mode == ModeEnum.SR</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SR"
 Guid="cbdd84ac-8cb8-4393-98b4-8479e8ddd689"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; IS"
 Guid="56d82c80-b4e7-4a0a-ae4b-22936f3297d1"
>
<ReqRef
 Id="5b1e8f81-9fd7-4a4b-9b22-bc0ddd6fd3c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bab0bad5-5ae6-4e7c-8c7f-669be37fcf1c"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="68ac5a77-6a67-488d-b6ec-8da5d97ec4d0"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="185ca0e5-c635-4a6c-96c9-01e8a5fdc86d"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; NP"
 Guid="8485038d-6768-4c78-8e60-2ea29b87be71"
>
<ReqRef
 Id="477d8abc-1671-45f9-b837-1cb5fbe1a01a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc0a1194-8a5e-4874-b9d3-889ee30495e5"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="1607c293-a79c-49ad-883f-b6ef0d663a91"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d54df452-49c8-48b9-a1aa-648a5da0634e"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; SF"
 Guid="313081fe-bd5e-4c61-89c8-a071c80d9a4b"
>
<ReqRef
 Id="0732bf9b-39d8-40a4-9cc5-e2356bf361d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="608b3e91-3d32-4bfb-8e43-0d33921acc86"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="68be67e5-484b-4561-a9aa-313fbde13ec2"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5ce27f5a-7c96-4dec-b769-9e1081b32ab6"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt;TR"
 Guid="9c9842f5-b2c8-49da-b8ca-d6df2237f224"
>
<ReqRef
 Id="0e28e97d-c11b-470b-99a1-6b4421caad3f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2bacd29f-a3dd-4f20-a79a-e794f33b5193"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef100099-8a90-4bf4-abc4-0778d012d9e6"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8555b571-6618-417d-b2f4-bd4cad4f9f1d"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0758fad6-219c-49ff-9e03-6c539d6144f9"
>
</ReqRef><ReqRef
 Id="b5348bb2-ed11-48b7-89f4-8e3118fd396a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="56bf2faa-6010-4509-8ed0-71a33eec4789"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="344fb8e9-d99f-42e1-a146-e7ced133f1a0"
>Condition18() OR 
Condition20() OR 
Condition42() OR 
Condition43() OR 
Condition36() OR 
Condition54() OR 
Condition65()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="06b04e1a-3bda-41e9-8a84-a8485ef7c3f5"
>
<Comment>Specify the reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="3cf3102f-5089-403f-9c97-68312d4c4937"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="9125b4d0-3119-4225-bde1-517079534d43"
>Condition18() OR Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4e41380b-1962-4a6a-bd05-70a28d8a1a79"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Front end passes the SR distance"
 Guid="66a68767-e2a2-48cd-9856-91d2622ca8af"
>
<Comment>Front end passes the SR distance</Comment>
<PreConditions>
<PreCondition
 Guid="22039ae9-8219-4d2f-a0d2-7f3f6286195e"
>Condition42()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="43afdd31-63c6-4445-a3f9-90dfd2e224b6"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.FrontEndPassesSRDistance</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Overpass EOA/LOA"
 Guid="14e2a52e-53c0-483d-8a54-6b38c37fbb68"
>
<Comment>Overpass EOA/LOA</Comment>
<PreConditions>
<PreCondition
 Guid="536a1614-4ffe-4491-9513-b13693808c1c"
>Condition43()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e6c88391-c945-485a-9137-3148e51de859"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Unexpected balise group"
 Guid="44a05712-6e3a-4d1f-96aa-26049735a7b3"
>
<Comment>Unexpected balise group</Comment>
<PreConditions>
<PreCondition
 Guid="90571b44-e2fb-4c9f-8666-80128600216d"
>Condition36()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="48fadef2-bb0d-4763-95c7-21b7eb2c5bfa"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.UnexpectedBaliseGroup</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Ordered by trackside"
 Guid="d9570de3-e546-455d-bcd6-aedfc66df2d5"
>
<Comment>Ordered by trackside</Comment>
<PreConditions>
<PreCondition
 Guid="ce8ff532-b153-4692-b5d8-3cc9f31be3d3"
>Condition54()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="acce7d05-12e9-460b-8115-fd53630eeec2"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Invalid balise version"
 Guid="e971677c-371c-45b1-9da6-5a1c3cafe790"
>
<Comment>Invalid balise version</Comment>
<PreConditions>
<PreCondition
 Guid="227e338c-d611-470f-bfbf-8eeee260fc86"
>Condition65()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1ced4bd6-3ff3-41de-afd4-802e8d413477"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.InvalidBaliseVersion</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="f5033ac8-329a-40c5-9b75-76c39a0969f1"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="b33ac320-dc8f-44c1-9bd6-af72b99ac6a7"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="299ab252-10ac-4667-a181-8e675ea4565f"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="4c9f2873-5396-49e9-94c2-c6ef9c36a122"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; SB"
 Guid="c57e2f06-f166-4933-8664-4ed012d7f8c9"
>
<ReqRef
 Id="8d16d5b9-0369-47cf-900c-4634dc94a9b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7338303c-f526-49b0-8f5f-ddcffc89d464"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="625fe285-1bf1-466a-a7fa-6f99dbfeb343"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="13bfc921-027b-4adc-85bf-e110d6529c83"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="49252c6f-c7ba-4143-a1c8-69cc76e70ae8"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a3e8fc6a-8129-4726-8d80-60fb09633636"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="b3ab42be-c628-4c0e-81ec-c447a7b1b0a4"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; SH"
 Guid="2698b4d1-eff2-43bb-af04-e11272560dd2"
>
<ReqRef
 Id="b366ce5b-9b49-46f2-bd09-34c38e3865dc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d65b3c7-aeb4-49cb-a4c4-fb9cc120ae91"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9101f796-e2e0-48ff-a4d9-1d0ae9120d56"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e1c99814-67d4-45ea-a506-c76163c1b892"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b831225c-ceeb-4134-a55b-d999f3720a87"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="94b211a0-70c8-4f89-89e0-a74a2566c661"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition51()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="82cc1ef7-931c-4187-a7ac-ff6a9835f7d9"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="1e13309e-45c8-4f4c-935e-860d1bdec875"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="44ca74d0-3f8f-4b09-b5cf-642ca299bb1c"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="211fd506-1fd8-4c0f-b3d4-0b583f6dd08f"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="c7745df5-530a-43fb-9aa0-cad71d35e9b4"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="4ca9ff07-7015-447b-a450-b5f168a09f40"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; FS"
 Guid="081a1c94-6466-4830-b97c-ebd57e34b699"
>
<ReqRef
 Id="0d23a7db-7891-4064-8b85-b435583a12bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e102b718-ee94-4fc4-bd45-32fcfd398999"
>
</ReqRef><ReqRef
 Id="0d23a7db-7891-4064-8b85-b435583a12bb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc4929d2-3f0c-4bce-abd7-c8ecf5ed1298"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="5e668c64-7b73-4ed7-8833-9381b5296f8b"
>Kernel.Modes.ModeTransitions.Condition31() OR Kernel.Modes.ModeTransitions.Condition32()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b74c20ae-7528-4fb4-92ab-b44a2d744b7f"
>Kernel.Mode &lt;- ModeEnum.FS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; LS"
 Guid="0d76bc92-ce05-4c36-8f88-ce384d94fee2"
>
<ReqRef
 Id="c0375c5e-24cd-46cf-b3d1-cd4fb68c8802"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9eb0aabc-35a6-45d9-9e82-d91742f69dfa"
>
</ReqRef><ReqRef
 Id="887a3be9-9d97-4eb6-9899-061f9b9fed93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d5768d63-cc60-4111-b02d-7040d17ba5bd"
>
</ReqRef><ReqRef
 Id="11359b80-21ab-4618-8bc8-d3b7a07f8566"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c1d87865-e871-4433-bdfc-f59b8d8892a5"
>
</ReqRef><ReqRef
 Id="5a176c87-642a-4578-be99-2adb345dd932"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="773118f3-9013-4a12-b2a2-fad41b2a6337"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="29111bc9-bda4-4da9-93d9-241527231ee1"
>
</ReqRef><ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bb0e7262-85d7-4e74-b488-daf1f5527c54"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="06027005-9b60-4151-987d-f6688c138a98"
>Kernel.Modes.ModeTransitions.Condition72()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4c840344-d9cf-4223-ad71-0750c092e32f"
>Kernel.Mode &lt;- ModeEnum.LS</Action><Action
 Guid="d51269c6-e0cd-4dc2-9e45-5eca391e69b7"
>DMI.MasterDMI().In_AcknOfLSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; OS"
 Guid="474fb245-fb33-4b94-8c03-3f0a889a01c7"
>
<ReqRef
 Id="e101abc0-5b9d-4350-851a-7f45e5806438"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a8cb22bb-81fd-4d0e-bc48-ea2fa4ae98ff"
>
</ReqRef><ReqRef
 Id="2ef2992f-43ce-4f58-abf6-55560cf910bd"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9a72d322-ff70-407e-be31-9e7a5412ccea"
>
</ReqRef><ReqRef
 Id="de18f207-08ba-467b-a877-d3c5a458123d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="88e3ba6a-837a-45dd-bc05-e7c4aa3957c7"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1395e160-b145-4f0c-9e51-1a8b2178281f"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="babf769b-0614-4316-a9e5-76942a6f4520"
>
</ReqRef><ReqRef
 Id="531deda3-99b6-4777-9b59-5e2178833486"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="061fccb9-c819-4c9a-9b32-1cffd23ec2c6"
>
</ReqRef><ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e6c543e8-6271-4d84-a163-9cbdefb73ba9"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="6509f97a-a1ad-4236-9bab-6a61eb957e72"
>Kernel.Modes.ModeTransitions.Condition40()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="af0ed0bb-a5dd-4609-a5e8-23db04de20d2"
>Kernel.Mode &lt;- ModeEnum.OS</Action><Action
 Guid="3d5160f0-1b0d-4e8e-a21a-15df79e87404"
>DMI.MasterDMI().In_AcknOfOSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; NL"
 Guid="048e006d-229f-41fa-87a8-e7e700865f3a"
>
<ReqRef
 Id="b554920f-0cf6-409c-88f4-f24a01bb6e9e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad577c56-ec13-475c-ac17-1d3422479be6"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ef54f216-e478-4af5-bf1b-1b0c6cae77f3"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="b6447c47-8d91-4c8a-9d31-332f1f478e15"
>Kernel.Modes.ModeTransitions.Condition46()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ab773132-5797-4b06-94c6-143748f6768e"
>Kernel.Mode &lt;- ModeEnum.NL</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; UN"
 Guid="8c5c0c75-4a74-4d34-8754-fd8632c785df"
>
<ReqRef
 Id="11fe6af0-667c-4392-a9e2-f5105973c4a7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dd47855d-f043-427c-928a-a2fbf722272f"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="1d5dd5ff-233a-42d8-9ae8-e08d5d393eac"
>Kernel.Modes.ModeTransitions.Condition21()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="534643f8-cfce-479c-898d-de4a260aa139"
>Kernel.Mode &lt;- ModeEnum.UN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SR -&gt; SN"
 Guid="2a1806fb-4055-4280-90c0-0d457166bb9b"
>
<ReqRef
 Id="d07b55e5-ebaa-4ba0-9ca3-b921cba28142"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f30f3285-1913-45e3-bf8f-a77e08b9fbc6"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="4501bbc1-8fda-4148-96d9-36f4044968b6"
>Kernel.Modes.ModeTransitions.Condition56()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8e217703-f528-4888-943a-2e9ddae94db0"
>Kernel.Mode &lt;- ModeEnum.SN</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OS"
 Guid="5d4f668f-61e3-4601-ba66-e617dda230d8"
>
<Comment>If the current mode is OS, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="f48cc7ea-a6d2-44bb-9a69-81aa7d019ced"
>Kernel.Mode == ModeEnum.OS</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="OS"
 Guid="f360822a-0c12-4872-a892-43aa833a4f47"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; IS"
 Guid="bc339b62-36d5-4b13-a24f-6ac597c71b85"
>
<ReqRef
 Id="62a6769a-e44f-4ccd-9cb8-31b4d18125d1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e618f3d8-a71a-45e6-aaf3-ad7d370cd871"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="0794a90b-ed72-4653-96ed-a9359164879e"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8330fe14-fb3f-4891-bf8f-3b12b60c1304"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; NP"
 Guid="d03e1de9-3cbe-40ab-8964-65532b498e0d"
>
<ReqRef
 Id="0e7ff772-b301-4ac4-9086-fc421997f72a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="97d00649-9d7c-4631-b03f-8c84b283b155"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="a7084a77-4c1f-491b-8852-4827d90fdd49"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ee61c8f5-868a-47dc-a616-103a8ebe33c3"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; SF"
 Guid="55715a72-c47a-42fb-ab3e-725066b2bc07"
>
<ReqRef
 Id="7622137f-1c5c-4eb2-8ad6-ca7c39dba3cb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="75191c47-98e8-42bc-99cb-183f7e21a51d"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="ea85ccbc-6e86-4914-a0a9-ce7cb66af011"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="17e05713-e86b-4c41-b8e8-1ded9e4c4411"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; TR"
 Guid="06bbc296-8038-473c-a15c-94ddfa0f5d15"
>
<ReqRef
 Id="090127fe-7eaa-42a6-9a5a-c3e2274cd4f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc2e19ec-c8a5-4da9-b400-62e7038b0552"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="608a3644-cbb3-4346-9e87-e568c50a31f4"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3bd249a6-0bcf-442d-9a8c-6dd4262e7313"
>
</ReqRef><ReqRef
 Id="3520c91c-8938-4bdf-b683-bc1fd7071fd7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c13ee4da-b459-4cbb-8a9d-cfc24d65a3c0"
>
</ReqRef><ReqRef
 Id="277ee440-7786-4aac-8364-7e60a82e94a1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b66fab51-b6b5-4711-b0b8-9277a82095df"
>
</ReqRef><ReqRef
 Id="f27f67c3-6ff7-425e-8ab3-f3eb40f14326"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="437d0119-2c40-4352-acf2-f927523b91ac"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="666229b9-97e4-4986-b25e-7ce5b48e1b26"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="1acdfc30-8e69-4cf3-acda-37c28507dfe3"
>Condition12() OR 
Condition16() OR 
Condition17() OR 
Condition18() OR 
Condition20() OR 
Condition41() OR 
Condition65() OR 
Condition66() OR 
Condition69()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="4b5aa3c8-f1ad-46e0-9064-c3421f4a353e"
>
<Comment>Specify the trip reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Overpass EOA/LOA"
 Guid="c995c047-f3aa-4b8b-99fb-7af17b710707"
>
<Comment>Overpass EOA/LOA</Comment>
<PreConditions>
<PreCondition
 Guid="0bd33c29-6daa-43e0-ab1a-58132fcadcc0"
>Condition12() OR Condition16()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="973da89a-7fea-43f4-9a03-60f037d1b405"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Linking reaction"
 Guid="ebfeb7c3-25bf-4bfc-ac8b-16358c49d476"
>
<Comment>Linking reaction</Comment>
<PreConditions>
<PreCondition
 Guid="73917956-84fd-44b5-95a3-db28fb912a57"
>Condition17() OR Condition66()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="90d1cfa7-4fd4-4507-b29b-637996476675"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.LinkingReaction</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="208e1ebf-0a3e-412c-92d5-b0e5930d0ed9"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="2485c53b-e20d-4f79-9515-9ed83a2275c8"
>Condition18() OR Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d34a21a3-96c8-4060-b714-32ef1d3144f3"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="EURORADIO Max time between message exceeded"
 Guid="1d5dd465-7963-4a18-b3c5-d5e211fe17e3"
>
<Comment>EURORADIO Max time between message exceeded</Comment>
<PreConditions>
<PreCondition
 Guid="2cbab21a-6bf5-4b8e-80cc-546c3c321327"
>Condition41()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ad2e7b5e-2f25-43c3-a0f8-3a3546d8ae1d"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.EURORADIOMaxTimeBetweenMessageExceeded</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Invalid balise version"
 Guid="0b0ce0a0-d792-4cfa-93c6-be4506af723e"
>
<Comment>Invalid balise version</Comment>
<PreConditions>
<PreCondition
 Guid="77e4ce4c-efab-455b-8f2a-991267d260be"
>Condition65()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="76249c81-16e1-48f5-80b0-55671d3c1a19"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.InvalidBaliseVersion</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Front end in rear of the SSP or Gradient"
 Guid="921e763b-0879-4e5f-bcb9-4e4deff68068"
>
<Comment>Front end in rear of the SSP or Gradient</Comment>
<PreConditions>
<PreCondition
 Guid="07d2eeaa-0962-431f-92f8-1e926e7606ad"
>Condition69()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="faf3e26f-5470-4296-88ee-1704b898c757"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.FrontEndRearOfSSPOrGradient</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="ef4f1aef-5566-4de8-996e-abc3d7ec3da9"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="af52e706-bb5e-4809-a883-9b2f677a9b4f"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="ca501143-d7d6-4534-9ae6-964d164292aa"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="48ebf807-405f-4901-9ef9-7f30063360bd"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; SB"
 Guid="e28ad88e-baa2-405c-aafc-e1024f054a73"
>
<ReqRef
 Id="421522e5-1b20-4946-b2ee-ba9123903548"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8beb2265-4824-40c5-a810-b6bbe8d9da92"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="47a4418f-ab9c-4df9-8360-7ce565ae1518"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7160ecba-876a-4d8d-b755-a6a36ba4c080"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="6eab0dfa-1d5d-41f7-9e51-5a6e73929adb"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="19d3e929-6a5f-4a29-97fc-797fb370c6c7"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="ff5abac9-f739-4db6-8ddf-355083d9b07b"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; SH"
 Guid="25487b44-da16-403b-b77c-e885525ec6e4"
>
<ReqRef
 Id="4b8049c9-2ecc-4d09-970e-bce48e5828dc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bbcebf2e-5dd5-49f6-a871-c6f6c749ca3d"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="611c5090-4ace-4080-b99e-3d877048f3c1"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4e7079a4-a9da-4d7c-965e-5f54fd5ea430"
>
</ReqRef><ReqRef
 Id="ff6538d5-0eef-4940-86fb-edb285ba5066"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1e05ec88-b7fb-4d54-b45b-ddfc62b3eb11"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a2a0239b-e7bd-4c07-996b-512f5caa9c9d"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="57d0e192-5159-4cb6-8676-4ef08c56185d"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="3f4e1c27-6763-4585-94c3-a83784bd243d"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition50() OR Kernel.Modes.ModeTransitions.Condition51()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0c866550-24d3-48f6-a67a-7944f909d0e3"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="07e825d2-fe7f-40d4-ad29-a1efa613debf"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1ab24d9c-91c6-44c7-99a5-040ca54498c8"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0d727e46-54e3-443b-8b88-8e368fe66e51"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="a691478e-cab9-4f01-8823-b2573b4c6a42"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="b4f28c72-df74-408b-982d-be7f401e42ed"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; FS"
 Guid="e553b4fc-3dc8-425f-9d04-c1f5a6665e08"
>
<ReqRef
 Id="8aac77f0-70e8-41a9-87db-4b8872cd312b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="17152ea2-82ca-4a66-816b-cb3cb7229018"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="918d64c0-6c29-49ee-b5ba-732fdf62e407"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="ffe64669-4ff8-4119-8653-d9450e4edfc2"
>Kernel.Modes.ModeTransitions.Condition31() OR Kernel.Modes.ModeTransitions.Condition32()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="17287fb1-833c-4b40-b586-ca52f4276551"
>Kernel.Mode &lt;- ModeEnum.FS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; LS"
 Guid="ff7b62d0-17c1-4752-83c8-29578a3ebc4b"
>
<ReqRef
 Id="bfac188a-37e4-4dd6-917e-0bcada96e02a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bc1977f1-64c6-498c-85b2-5fce11f82038"
>
</ReqRef><ReqRef
 Id="ca1dfc14-8644-4e33-ac2a-f86dc141e49b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="597e7563-c1f5-4220-b7da-16e172e40ea8"
>
</ReqRef><ReqRef
 Id="887a3be9-9d97-4eb6-9899-061f9b9fed93"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="da2ba644-f6f3-4472-964c-a7bd6f2ade0e"
>
</ReqRef><ReqRef
 Id="11359b80-21ab-4618-8bc8-d3b7a07f8566"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f94f5f7f-4491-42fd-9e6d-9b4425b61e3d"
>
</ReqRef><ReqRef
 Id="0fe12114-3bcd-460f-8e08-ccb61b620101"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="aeccb227-8298-48dc-9dc1-5d93684953f9"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="55e29007-529c-4b8b-b38f-2f56ae2d9dd1"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="d21fe523-3042-4dda-892f-2b73087ccffd"
>Kernel.Modes.ModeTransitions.Condition70() OR Kernel.Modes.ModeTransitions.Condition74()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ea2646e0-08cd-4c99-9f78-94a3751f2b29"
>Kernel.Mode &lt;- ModeEnum.LS</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle driver acknowledgement"
 Guid="89416f19-851f-4b1a-a9e8-1aedce022ba9"
>
<ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="221eb9ee-1db5-48f2-b44e-f0d0de542eb3"
>
</ReqRef><Comment>Either initiate of disable an acknowledgement request for LS mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Driver acknowledged"
 Guid="2eae626f-eb27-471c-a12d-3be0cf99e021"
>
<Comment>If the transition was initiated by the driver&apos;s acknowledgement of LS mode, disable the request.</Comment>
<PreConditions>
<PreCondition
 Guid="d606140a-2762-40fa-810c-826fb8b5c3be"
>Kernel.Modes.ModeTransitions.Condition70()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a39567e0-8e40-44f5-9651-f8f1c8c780ef"
>DMI.MasterDMI().In_AcknOfLSMode.InputInformation.Disable()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Driver didn&apos;t acknowledge"
 Guid="c6fac7f7-fdc8-4474-917f-34e713e13915"
>
<ReqRef
 Id="5a176c87-642a-4578-be99-2adb345dd932"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c08cad6d-47fc-40b6-aa41-a07f85a2e5db"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a461e6fc-954f-4eec-a435-f920ff3955ea"
>
</ReqRef><Comment>If the transition was initiated by entry in a LS mode section, initiate the acknowledgement request.</Comment>
<PreConditions>
<PreCondition
 Guid="0cbf1699-c209-44cd-8805-85356b2e9021"
>Kernel.Modes.ModeTransitions.Condition74()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e14a4c73-4dcb-45a4-8c0d-d266a1914149"
>DMI.MasterDMI().In_AcknOfLSMode.InitiateRequest()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; SR"
 Guid="faf01cc1-61e8-4c97-b3ee-11dce33e8031"
>
<ReqRef
 Id="0c0bfe1d-a42d-4634-a892-abc2093508c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3e754ddc-0005-47d9-a275-c274e512baaa"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ba09b385-4a82-47ce-b06f-51e4de0e3fe6"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="ff7b551c-4727-4a98-b414-2620d9f4160b"
>Kernel.Modes.ModeTransitions.Condition37()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="54178808-2fce-4e35-b0c9-a834a37967ea"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; NL"
 Guid="4617de75-162b-402e-ac1b-f83fbdb477bb"
>
<ReqRef
 Id="d2e03d3b-c97f-434c-bf8e-ef345b1d381b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3e1098ef-b3ed-4e87-8a8a-db392c5a36f6"
>
</ReqRef><ReqRef
 Id="3dc13432-6940-45f5-8e63-04ea48480aea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bfa6812e-a039-4ec2-9975-9fd97bed828e"
>
</ReqRef><Comment>Transition to NL.</Comment>
<PreConditions>
<PreCondition
 Guid="e8367d01-377d-4df0-b8b3-b314d643b745"
>Kernel.Modes.ModeTransitions.Condition46()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7815435e-150c-4822-8986-441a5ca20223"
>Kernel.Mode &lt;- ModeEnum.NL</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; UN"
 Guid="d2592213-7836-4a7d-9019-4059bcaa6a2a"
>
<ReqRef
 Id="f6540f01-b54c-40a1-9344-cecf1d0d586d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="389b5d2e-969b-4e87-ada8-c9926b5e3add"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="e25030d9-b204-4c94-81cb-e96d336ca59c"
>Kernel.Modes.ModeTransitions.Condition21()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="dd5300c6-f872-4045-91fe-8900fd4f5e2e"
>Kernel.Mode &lt;- ModeEnum.UN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; SN"
 Guid="51e3a713-01a5-45d5-99c9-1829f105f3e8"
>
<ReqRef
 Id="efd5fe61-75e8-4f75-aab1-1ea9cc36166c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7cd5603-5b29-4a41-8905-4032749aaf28"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="8e3c2347-679e-47ab-96f9-c651e211fdff"
>Kernel.Modes.ModeTransitions.Condition56()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3ee88f53-b96b-4509-a6f4-2d10635fec15"
>Kernel.Mode &lt;- ModeEnum.SN</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="OS -&gt; RV"
 Guid="5b6cf51b-054d-4ae3-836b-3ed5576e7d7e"
>
<ReqRef
 Id="928b58a0-89ec-42b7-a044-562c5aa0ed3c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="941b6df7-ae00-4463-8151-07a3606dccb5"
>
</ReqRef><ReqRef
 Id="3145c17a-3e8d-4814-a54e-7c42d2781956"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e0b45bd3-6f6c-4318-884e-a0cf9c09d771"
>
</ReqRef><ReqRef
 Id="e9db5333-b289-4dc4-a0ff-2523b0f32009"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bedb5964-2b64-453f-8118-2806ec9006cb"
>
</ReqRef><Comment>Transition to RV.</Comment>
<PreConditions>
<PreCondition
 Guid="200a7b5c-30a4-4626-a1fc-55018842fc27"
>Kernel.Modes.ModeTransitions.Condition59()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="21240c8f-5498-4fa1-8826-904165792208"
>Kernel.Mode &lt;- ModeEnum.RV</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SL"
 Guid="3a1133dd-e649-46e6-9e43-a8b2b158e4aa"
>
<Comment>If the current mode is SL, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="d5cccc85-6b47-48f6-9d7d-b1ed6a8009ff"
>Kernel.Mode == ModeEnum.SL</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SL"
 Guid="5954bbb1-68c7-45af-aa60-f7fed4420c28"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SL -&gt; IS"
 Guid="75c738e5-4e58-4ed9-93f7-268cd636a09f"
>
<ReqRef
 Id="3044fb60-9fad-48e0-8862-b2d792afd26f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a91b1903-18d9-4a87-bbb7-381fc3f01dff"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="9512dbc2-5659-48e7-acb9-f48f9632278d"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="59d2c6a7-b391-499c-8319-bbde89950868"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SL -&gt; NP"
 Guid="a839134f-a3e8-4369-a91e-4827256e3571"
>
<ReqRef
 Id="9b66058c-a111-4bd3-a821-b9827b27997b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2aa53947-001a-469a-b002-8affc0a00af7"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="1e04cbf4-0cad-40cd-b086-8dc7c33a9f20"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d1d7c0a8-f217-4acb-9266-6a5b4a7701e5"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SL -&gt; SB"
 Guid="bcb38ffc-03ee-4a51-a802-056bbe6f1392"
>
<ReqRef
 Id="650b6323-0467-4531-a782-5623c48a2224"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="73cd09ef-e014-4f1a-b6be-0bc0ef774f12"
>
</ReqRef><ReqRef
 Id="793df248-b41b-4ac2-a3cf-dcd071acf349"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3564272f-fbab-437d-ba80-521e71eb5815"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="1697949a-3746-4165-947c-956078442021"
>Kernel.Modes.ModeTransitions.Condition2() OR Kernel.Modes.ModeTransitions.Condition3()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="29cdcf0c-0f35-460e-9dcf-80b4731bc284"
>Kernel.Mode &lt;- ModeEnum.SB</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NL"
 Guid="563fbb5c-4e37-494e-b64e-5c219d5a3e27"
>
<Comment>If the current mode is NL, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="d9747df3-cfdd-49ce-bceb-47661c99d496"
>Kernel.Mode == ModeEnum.NL</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NL"
 Guid="171b3f24-87ac-4413-8b7e-ab32e6514341"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="NL -&gt; IS"
 Guid="eeec105a-5195-413f-9a88-dca2e6df8ccc"
>
<ReqRef
 Id="d14dba28-a97c-48fd-8485-e9fac27221c2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="558368b2-9305-4ad2-b43e-727c9e3cb53f"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="213e6b4d-17c5-468a-8974-0bfeb4189959"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="91ba698b-c98c-461c-aa3d-6e240081c6bb"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="NL -&gt; NP"
 Guid="c344a9d0-97cf-4d8c-a398-57b594383889"
>
<ReqRef
 Id="d083fef9-e8ca-439c-8b7f-02d5686a523e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c58e7e2e-feed-4beb-80db-ad0644e1bbb6"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="dc18af3d-d0e9-4361-bd5b-b3aa7031ae5d"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4a9f79ce-d9a5-46e1-9d38-a49401cdaf64"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="NL -&gt; SB"
 Guid="1cdb23ec-d69f-44de-9e01-c052c2769bcc"
>
<ReqRef
 Id="05ed373d-818e-4031-a474-4dae9b4c6e52"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a9d62540-3e2b-4427-af5c-4049069bf4c3"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7591d01b-e109-47de-88ad-e37c1dcb5b71"
>
</ReqRef><ReqRef
 Id="d637f451-65e2-4f3f-af0e-aa6858ee6f29"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f8e9116d-111b-4fae-8763-308a2fcd3fc9"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="4a417493-54a7-49f1-87c7-eb99c35f61d0"
>Kernel.Modes.ModeTransitions.Condition28() OR Kernel.Modes.ModeTransitions.Condition47()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3d11cfba-57de-4314-a94d-d3e8c0157dea"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="9bd4ba9b-979b-4cdb-832b-e0dda64c4f93"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="UN"
 Guid="3c9c54b8-c361-4416-9db4-2d985528a149"
>
<Comment>If the current mode is UN, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="0f62ee0c-4e18-4353-bc36-5edc9ae12e2e"
>Kernel.Mode == ModeEnum.UN</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="UN"
 Guid="fa9cd252-3b35-4a55-88af-850deac4a3f3"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; IS"
 Guid="9a1d05b2-5d7f-4b8d-bfff-264e18033981"
>
<ReqRef
 Id="3f85a834-84ec-41cd-81e0-75444cb96933"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5104b87e-3a10-4e92-91de-67a167ac2bc6"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="c831f378-1368-48fc-b1a4-aa253469e36c"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4c0fbb9a-7054-49ea-8f3e-c2c53875209e"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; NP"
 Guid="c2c1fb65-d7b5-4083-9931-96e4f06152cd"
>
<ReqRef
 Id="bfe2d8b8-c978-48a8-abea-af40d942c4b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2d961fd-e97f-4215-9db7-9db11dca4195"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="7c6e938a-1b81-4642-bd5d-aeeb86a34cb9"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4e3da8b5-56dd-4203-b2ca-168756e50aad"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; SF"
 Guid="fd2ea5a4-77fd-4492-a5f2-31f1664911b1"
>
<ReqRef
 Id="d5f003f6-206b-46de-90f1-998373ecd81f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="96139ddd-c03e-4dd4-9d73-466f64a28825"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="862ab3be-a2e3-4c3d-a60c-ff0c89c73cce"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="342f36d6-9443-4c25-9657-3e9b457af0c8"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; SR"
 Guid="5beadb52-c546-4254-863c-0c89e78846c2"
>
<ReqRef
 Id="e31df8ad-91cc-48d8-b1bc-08033015869b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5357fc7b-2641-473e-af50-4c27f6d8c09e"
>
</ReqRef><ReqRef
 Id="c8b3f989-1504-46c0-84e3-3b54fdc4e132"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dbc84b3a-c644-4057-b74e-6a878a9df29a"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="2b0419d9-d60b-4ef0-a07f-56973f923662"
>Kernel.Modes.ModeTransitions.Condition44() OR Kernel.Modes.ModeTransitions.Condition45()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5de5ffb4-33d8-4901-93ea-8d9aeb2c82a3"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; TR"
 Guid="18d705a6-0cd3-4848-b88e-afdaf6eb3190"
>
<ReqRef
 Id="1d3ac371-95f2-4f69-9161-19f399ae1991"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6ba00cbd-7ea3-4526-8d97-b6ce94fb2c29"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8606c501-cc31-469f-9864-63b3a65056e9"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fe65b6d9-5e45-4436-a13f-bcfc20074a47"
>
</ReqRef><ReqRef
 Id="eb5aeb5a-ad87-4472-bf20-a249e1f525d2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="be79a499-70aa-4af5-beb0-9ed1855b203c"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="880598c3-df04-4ec2-add1-3ed98931ab98"
>Condition67() OR 
Condition39() OR 
Condition20()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="c205c4c9-a694-42ca-a59d-966514942764"
>
<Comment>Specify the trip reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Trip ordered by trackside"
 Guid="d7cdb12f-6c95-416d-8e99-b490ec17b1cf"
>
<Comment>Trip ordered by trackside</Comment>
<PreConditions>
<PreCondition
 Guid="6c5cd4fb-78e6-4e54-9d18-78b8aa25402c"
>Condition67()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="27394781-b5c8-4d7a-b113-9289fa4c4ee0"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No MA"
 Guid="41463aab-a433-4a96-9d31-59c76e0d1daf"
>
<Comment>No MA</Comment>
<PreConditions>
<PreCondition
 Guid="253e961a-aea5-4d59-b24b-e380d58215d3"
>Condition39()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d6804b12-f220-414b-a9db-21bd8dfe005d"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="4d3020f5-e1e4-4da1-8961-62bb4aabfc04"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="7a2cd4de-8d85-41f2-a0ba-8f5283a8271d"
>Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2709cc7e-1f29-4b72-9470-18432b5a6b17"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="fdce5637-1746-4e9b-9c6e-0e64e6f2544f"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="10e12030-213e-4a92-87fb-3abf46ea19f4"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="7ce6aec0-0048-40db-b33c-031568c18ddf"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="93b0cc46-1569-48d9-844a-35f31476cdc8"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; SB"
 Guid="a38cebfd-7636-49a1-a031-3584c34d4ec3"
>
<ReqRef
 Id="f4c66acf-9a8f-4ef9-ad0a-e5bb49bbd748"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df7ec9c1-f701-4dba-930a-440858eb0c9a"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5d5ef683-e671-4885-8769-33e4b3006913"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e6f37ccc-e205-479d-b04a-4d9c552d82ab"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="1544fd6e-beb1-4d89-a452-886ec36423f3"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c923caf2-7f09-4a29-a752-542ab4ac0661"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="42833db6-4ff7-4c84-b4d4-246e41cd6446"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; SH"
 Guid="4cc59f59-e9e1-40d7-8096-6b975d94716c"
>
<ReqRef
 Id="dbc95622-e7a6-4a4e-be43-fbcedaef2ba0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d4b39db-c41f-49e1-a63e-0cc047e76b98"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c7adf56a-3d95-4f3c-bfe8-9bfa5837af8a"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bfc9960b-a340-4fe6-be25-ba97990cbdea"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46090e38-6e17-4819-96cd-1108e5e202de"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="057879a5-ba5e-441c-bf11-cfd40b584a2c"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition61()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="269fd4a9-45eb-4a45-9008-9c5f70eef35e"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="c01f4bdb-56e0-462f-9a0f-3601a8db82d0"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a677d4c1-cc52-4760-b79e-2cd29edf2f62"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bb665fc1-c1ed-4a74-82e7-cbbe39bf0ec0"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="f538ee32-ff16-42bd-9d31-7ad644dbf0fa"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="c1752bdc-e814-47e1-9f5c-b21c07023147"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; FS"
 Guid="6d15d805-3240-4dc0-8e56-49aa70f1dfde"
>
<ReqRef
 Id="d195f45e-45c6-4d08-96a5-7870171df6c0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cdc71fa5-52ea-4895-81e9-d321cbbd81f6"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="29d25d21-6d54-4adc-adde-fe0245a396b1"
>Kernel.Modes.ModeTransitions.Condition25()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="9d894321-6eff-4e33-923b-e3220149572f"
>Kernel.Mode &lt;- ModeEnum.FS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; LS"
 Guid="18ba2fce-540f-4004-9449-d51774ddae8b"
>
<ReqRef
 Id="aea82474-7eaa-4f11-a960-50b8e988f6e5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="25ad280b-3d6c-4707-939c-98b71c7bbe5a"
>
</ReqRef><ReqRef
 Id="5a176c87-642a-4578-be99-2adb345dd932"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c8aae72-f3c1-4763-9fb4-d4e234f51d79"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="11a7a512-3b39-45b6-b10f-f3c7a67afd45"
>
</ReqRef><ReqRef
 Id="dbd12b73-87dc-4f8b-aad5-7e3cb90fa5b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6cd20c58-92c1-46c5-b151-ce473fb145c9"
>
</ReqRef><ReqRef
 Id="7cba24fb-f8f0-411d-b295-e943d3f930c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8b445954-8077-402c-888d-c7ce7993f3d6"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="cf83d47e-1514-4e29-a48d-7d1e381d54e4"
>Kernel.Modes.ModeTransitions.Condition71()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4a2fecb9-7f60-4c36-aaa9-6917cc42e9a1"
>Kernel.Mode &lt;- ModeEnum.LS</Action><Action
 Guid="0e2930ae-a2a5-40b1-8f2c-d9cd93434271"
>DMI.MasterDMI().In_AcknOfLSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; OS"
 Guid="7a776941-078b-4b82-ae5b-95dca24e0f4c"
>
<ReqRef
 Id="f5aa9b27-0e44-4ca1-9175-bcfbf0cbf5aa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fa7c7b98-0806-428f-9f2c-d98cdab68541"
>
</ReqRef><ReqRef
 Id="531deda3-99b6-4777-9b59-5e2178833486"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="820ac570-77e2-4007-9e0e-281b457d2bca"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5f64532f-6a88-4159-9207-893fc655f972"
>
</ReqRef><ReqRef
 Id="25c1b633-d7e9-42a2-be80-037ff105dcd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="85fbdbc4-42bd-4e63-99d5-d77fafc9317c"
>
</ReqRef><ReqRef
 Id="6e265aec-2ccf-45a4-8713-34d7ea277c53"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3eef5666-7964-40f3-9174-fdaed0e7707f"
>
</ReqRef><ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ce577db7-1288-42bf-8c11-f0449d914539"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="ea1a3385-97f9-493e-bebc-9b4f6cc85f7e"
>Kernel.Modes.ModeTransitions.Condition34()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1bbfef7a-2e2f-4b99-a229-24c1008fd599"
>Kernel.Mode &lt;- ModeEnum.OS</Action><Action
 Guid="27afde8d-3f8b-4eae-97ad-0068b9529bea"
>DMI.MasterDMI().In_AcknOfOSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="UN -&gt; SN"
 Guid="f8ec82d4-d471-4044-88ec-b478e3d9e1f2"
>
<ReqRef
 Id="b564fe22-f6ba-4b6b-a9c6-95f96832bf05"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="35ba8402-2fb4-4858-bea1-30e84bf26bcb"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="13dcf43f-87d0-463e-b7ba-1cacac880553"
>Kernel.Modes.ModeTransitions.Condition56()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f7ba3168-98ae-452d-94c3-ae0857216d29"
>Kernel.Mode &lt;- ModeEnum.SN</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TR"
 Guid="591212aa-575e-4b4c-81ae-5a0080303fca"
>
<Comment>If the current mode is TR, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="37cfe800-193f-46a8-976c-6e2afad3c523"
>Kernel.Mode == ModeEnum.TR</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="TR"
 Guid="1350fd63-8918-4a59-82a6-b6db6b1311b0"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; IS"
 Guid="19848ac8-02b0-410c-845d-6f792263b36d"
>
<ReqRef
 Id="54229e6d-e154-4925-b3d9-9a5240d4afad"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="21944f4a-8da7-4afc-ae72-87cb8c7a39e8"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="1ed988db-ad79-4c7c-a99b-186a66c3b681"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e1a35e2b-8336-4f74-9644-6a1fb26d22ed"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; NP"
 Guid="8c25c6c0-4f09-474f-89ad-6e86170e6524"
>
<ReqRef
 Id="ad2e9df1-b565-46f9-82b1-f282e230acac"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="03ef0f96-b004-4075-a5fa-6bfbbf11c4bf"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="7743b89e-50ae-47e1-b807-2ded67e3382a"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="c1725c5e-58f1-43b1-b542-b73f2ce9d168"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; SF"
 Guid="2e4540ab-c8cf-493e-aaee-3c5f805dda41"
>
<ReqRef
 Id="54b43012-6a8a-4239-8e39-912d5796873b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3c7fe6da-b0d9-4103-8c44-829410b4a3b3"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="d895ff0e-fb9d-456b-a6b6-3bafca4bd0e8"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a0e8904c-98dd-4c65-abd4-1b2e67deb5fe"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; SH"
 Guid="80110002-4495-4b49-b989-787900e975f1"
>
<ReqRef
 Id="7e0abbf2-8851-45f0-b77d-f61140dccd18"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ce4e0909-eecc-45c4-ae8f-71acf4790078"
>
</ReqRef><ReqRef
 Id="97a651d7-2517-48ce-8d06-d2c205c7cc1d"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1b56b2fe-0ae9-4203-92a1-94742e752d12"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cc4666c0-d9e3-4b2c-a8c1-42f3105a486e"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="9cc3a3e1-536c-4f23-b66d-e8e4ff264236"
>Kernel.Modes.ModeTransitions.Condition68()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="00c19f05-2a30-44a6-84d4-99d1afb27c6f"
>Kernel.Mode &lt;- ModeEnum.SH</Action><Action
 Guid="3aba4a7b-6bd6-4e4e-afc9-cf564928f397"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; UN"
 Guid="a1b0fc5c-53b2-4269-8de5-0e4fd0dabb1f"
>
<ReqRef
 Id="81bf7685-d78e-483f-b456-dc98541a3778"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c9f41ce7-8463-4784-8eb0-95d71a0d8642"
>
</ReqRef><ReqRef
 Id="ad5e8878-4a8a-4a39-9072-970084488dfa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a0498d4d-a6e1-4184-9384-5df1a1721179"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="17cb3ef3-1c3b-4448-a128-ccf8b938cac6"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="3ce17c39-f6e6-4d69-9968-f089b80f2cf8"
>Kernel.Modes.ModeTransitions.Condition62()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="29c43483-ffec-42c2-97cc-0b9890299e29"
>Kernel.Mode &lt;- ModeEnum.UN</Action><Action
 Guid="f46dd9eb-eb24-45c4-8e7f-32808b0cf673"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; PT"
 Guid="dfb9bbeb-4b12-4709-ba76-af562e84e341"
>
<ReqRef
 Id="6273524a-17fb-4ca9-9667-0b0b8769285c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="988326b1-eec9-4750-8b44-9cd747907ba9"
>
</ReqRef><ReqRef
 Id="458c52b6-b128-424e-b29e-05cf4a057a91"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="740eaff3-aec9-43f7-b26e-e7d06fc73111"
>
</ReqRef><ReqRef
 Id="a7faf903-999e-4ba6-87e3-e88f11355da6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14d846a0-0590-47e5-a335-a4101e42e052"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f9fd35c9-838c-4619-804c-0eec2b97b2c1"
>
</ReqRef><Comment>Transition to PT.</Comment>
<PreConditions>
<PreCondition
 Guid="5bfa2492-6ad3-4a3c-b9e2-c0659f783065"
>Kernel.Modes.ModeTransitions.Condition7()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="694ffd28-9a9e-4839-a8cd-cdd75be71e1d"
>Kernel.Mode &lt;- ModeEnum.PT</Action><Action
 Guid="9af31329-6766-4c1c-b1fc-c90b2e327f2f"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip.D110</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="TR -&gt; SN"
 Guid="8b47de22-dde9-4758-a6ad-df8c9fb93af0"
>
<ReqRef
 Id="14f9382b-f922-45fb-bafa-db768d3188e6"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d6a59bd2-daf3-439f-9f70-c21f084b5c7e"
>
</ReqRef><ReqRef
 Id="c66d9504-6139-4a0b-b411-04a20973be2e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="01da241a-1d63-440a-b99c-aa7f0cbf7adb"
>
</ReqRef><ReqRef
 Id="1f20f64e-8527-4f24-baf7-584ee7c5f841"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="83d5d0de-cc1f-41be-8dd7-12d9bd4a7189"
>
</ReqRef><Comment>Transition to SN.</Comment>
<PreConditions>
<PreCondition
 Guid="19626ad6-e19c-46d2-b2ea-40cfdc2c0a37"
>Kernel.Modes.ModeTransitions.Condition63()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="b2bfe329-a4e6-4715-9c56-f6f6fe5ffcc2"
>Kernel.Mode &lt;- ModeEnum.SN</Action><Action
 Guid="2b1d5435-d255-4eb3-8d53-5395de3a4b7f"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PT"
 Guid="e6a9ee59-451d-46d2-ac62-0d7c4227baed"
>
<Comment>If the current mode is PT, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="7ea60917-9844-4b3a-bf33-2ee50741f88a"
>Kernel.Mode == ModeEnum.PT</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PT"
 Guid="51abec45-dee7-44b3-aaa3-be3545e25b26"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; IS"
 Guid="026c777e-05c4-4d42-a276-8cdd0f95be03"
>
<ReqRef
 Id="d35b0b7e-e1de-4111-a3e3-780d989ac3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2ecdeb9-99fb-44db-bdce-05d4d604ff4f"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="f53e2f75-659e-4fcf-913e-a1e61009c0f7"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d9216efc-63a0-4585-a028-d64f5fb5a567"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; NP"
 Guid="4ea3065e-0fe5-4215-94ca-814bf42a7e18"
>
<ReqRef
 Id="4d0e5b3c-5b4e-42ee-a570-54c62de89d6f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="858dbe2a-59a2-4b06-8500-5754216d179c"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="60267878-2b24-4987-8fc4-2bc4c9df36c7"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5bc6a317-98a8-4153-976a-b60da0e39030"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; SF"
 Guid="3f7dd41a-3989-4272-8ca8-2dadbd2f25cf"
>
<ReqRef
 Id="deea4e59-66a9-4321-8d0c-2f5f7994be96"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b82c3b7a-e4a6-4a97-8434-7e9c33a4273e"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="096c5e0b-8e82-4d41-b95b-a46a0889af54"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f019fcff-c09d-443d-871c-36c808ffd428"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; SB"
 Guid="8dfef591-3d5a-48d6-93f0-d8a923dfcbb9"
>
<ReqRef
 Id="6f7efe7f-a33e-4292-8d9c-3f3831c8b55a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fc6c734f-79f6-424c-8f99-48fa68b71a32"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a5eb91a1-78ff-475e-a64b-73e9ef5b9a58"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="208e82dc-5eea-446a-a0f8-eb0312443a97"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="9a87bc06-3dbd-43f5-9336-458f1e58705b"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="076eedcf-7582-4a55-92a3-469ccb8c9d74"
>Kernel.Mode &lt;- ModeEnum.SB</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="End of mission"
 Guid="738fb34e-ed51-487a-8b20-4ea4a637db25"
>
<Comment>End the current missionupon entry in SB mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="End of mission"
 Guid="ec453194-cfde-4be6-ba00-ac69c7557be5"
>
<ReqRef
 Id="3ba5dbe5-9173-493a-8783-5c9e28734244"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="cf99d6a6-c785-4689-98a1-8d05bb616d19"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d811dd2-88ed-4446-bbc7-536ca68e4d15"
>
</ReqRef><PreConditions>
<PreCondition
 Guid="c8bcedbd-32d5-462d-a928-1d185f5c5ccb"
>Kernel.MissionIsOnGoing == True</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2a011a69-9d1d-4409-bae3-0859a4f91350"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; SH"
 Guid="b6f6dbb8-592b-421a-9901-1cc98fb61afa"
>
<ReqRef
 Id="2e0c84d2-0a38-4279-a53c-c8611c5254f9"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5ef70b8e-771c-4309-b084-68f45748c267"
>
</ReqRef><ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5b710908-d045-4c27-abe8-4c719ac7bc95"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b1b17c21-b602-4289-8d62-d5a2bef40836"
>
</ReqRef><ReqRef
 Id="a83acd4f-5228-4bcd-9ab5-74e560d16467"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="94bf00a0-d530-4e35-ac24-27a0f23ba28a"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="22674eda-8293-4bb0-aa91-2a0e25be4235"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition6() OR Kernel.Modes.ModeTransitions.Condition50_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ea5b92b7-bc51-4dff-b9c4-f5f319ab86c3"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Acknowledgement of SH"
 Guid="00cdbaba-90cb-4ad6-ae68-89b383116e9e"
>
<Comment>If the transition was initiated by the driver&apos;s acknowledgement of SH mode, disable the request.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Acknowledgement of SH"
 Guid="dae7e7c1-5a89-4f64-9409-012c662e8e0a"
>
<PreConditions>
<PreCondition
 Guid="bf7a6231-1ad5-4f91-9d35-0f840a592af9"
>Kernel.Modes.ModeTransitions.Condition50_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="f6c94a77-b4b3-4ee1-b59f-22c6ddb17c91"
>DMI.MasterDMI().In_AcknOfSHMode.InputInformation.Disable()</Action><Action
 Guid="817aa53c-4f63-4284-979a-1e646d1c27cf"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="End of mission"
 Guid="9323f165-2fa3-41e0-bd7c-063c6dabeb10"
>
<ReqRef
 Id="3df563f2-b5be-4707-9c14-fed9bce37577"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a7d71d75-6331-4cc7-89e8-850d84bd1059"
>
</ReqRef><ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3134241d-aa94-4872-81b2-7227ab65a918"
>
</ReqRef><Comment>Entry in SH from PT is considered as end of mission of there is an on-going mission. The case of entry in SH initiated by driver is handled in Kernel.HandleModeChangeSM.ShuntingInitiatedByDriver procedure.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="End of mission"
 Guid="f66d74fc-c4b4-499a-b6db-b3ec8763983e"
>
<PreConditions>
<PreCondition
 Guid="77a7d354-ef26-4e74-9aea-07f7e53242a3"
>Kernel.MissionIsOnGoing</PreCondition><PreCondition
 Guid="0af3d9ca-f7a6-4822-ad36-7ba874f35cdd"
>NOT (Kernel.HandleModeChange in Kernel.HandleModeChangeSM.ShuntingInitiatedByDriver)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="2de70f99-afea-40c5-a5d6-6cbd9be1cf03"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; FS"
 Guid="31276b3c-cdc5-48e9-a253-817f9eca2684"
>
<ReqRef
 Id="254ef049-c7a5-4620-8a6b-f261c4c8ab14"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5b0026dc-c7a3-4b85-9449-3e7aa6ef016c"
>
</ReqRef><ReqRef
 Id="6ed812c6-f711-468a-8c0f-0843bf2384be"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="26543d3c-15b6-441f-b2b5-7d6d06499e7d"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="4d923018-3239-41cf-abc1-e7117846df34"
>Kernel.Modes.ModeTransitions.Condition31_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="8384575e-6553-4ba9-9b0a-0b58070fb664"
>Kernel.Mode &lt;- ModeEnum.FS</Action><Action
 Guid="5482a40a-4385-4217-98cf-c8eed5b5fc2e"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; LS"
 Guid="559e1d42-8b31-4d33-a813-7d33f43e4180"
>
<ReqRef
 Id="19dd00cd-7950-4666-8087-15057ab249d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2f664898-3089-43f7-956f-f2223969177e"
>
</ReqRef><ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b2a887b2-94a5-4b88-b4a0-59bc82f516e2"
>
</ReqRef><ReqRef
 Id="92edb3f6-1eeb-4b7c-bea6-f58f1cd5e70a"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9703df26-9640-414f-a2d5-9255c367267a"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="32337793-8f78-4809-af72-2647cda35753"
>Kernel.Modes.ModeTransitions.Condition70_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d1b0f51b-01e7-4f35-8b91-cd90455e7067"
>Kernel.Mode &lt;- ModeEnum.LS</Action><Action
 Guid="ffbf191c-1c71-4800-be9d-a646a22b0343"
>DMI.MasterDMI().In_AcknOfLSMode.InputInformation.Disable()</Action><Action
 Guid="0b206b75-fdbb-4598-af28-83fe3421144c"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; SR"
 Guid="e05637c3-0680-4eac-b0ed-033c1d1444a2"
>
<ReqRef
 Id="f6078523-0b26-4b2e-ab6f-49f64224e74f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c53a7f8-377b-436a-82f5-2106e1813acf"
>
</ReqRef><ReqRef
 Id="5c82bf92-4b63-4853-aa34-f9d3e2648b54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0c198f77-af53-40a6-99aa-7aee7a61f6f7"
>
</ReqRef><ReqRef
 Id="6cb79caf-9664-41f0-8a62-909fbaf148e0"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="edba3a96-efd8-4213-a1bc-e5e0689c83af"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="5fc8fa8f-9129-4db1-806c-fb71f074fab6"
>Kernel.Modes.ModeTransitions.Condition8_PT() OR Kernel.Modes.ModeTransitions.Condition37_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="024e9551-6a68-407a-b56d-26bdf360beff"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Post actions"
 Guid="2baba89e-9101-4bd7-8c37-6c48dbf10873"
>
<Comment>Additional actions tied to the mode change.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="E180: Driver acknowledged SR"
 Guid="67e07a25-b7c4-439b-82b6-b47f36d77db5"
>
<ReqRef
 Id="5c82bf92-4b63-4853-aa34-f9d3e2648b54"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eba8fcba-a21c-48e8-8190-398354ddad97"
>
</ReqRef><Comment>If the driver acknowledged SR mode, disable the acknowledgement request.</Comment>
<PreConditions>
<PreCondition
 Guid="06a3fa7a-d580-4b3a-9d16-7ee44277c5ca"
>Kernel.Modes.ModeTransitions.Condition8_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="fd88537c-6a79-41ec-b72a-b39c9bcde7a6"
>DMI.MasterDMI().In_AcknOfSRMode.InputInformation.Disable()</Action><Action
 Guid="47b1e10e-814a-4511-8d12-0ac9cdcc3d95"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Loss of open session"
 Guid="c1d5835a-b6fb-4334-9730-1dbf30bccb66"
>
<ReqRef
 Id="988a3e55-0b0a-467b-a0e7-398bad5bf268"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5b413c0a-ccca-4e90-86c5-554dad24c16c"
>
</ReqRef><ReqRef
 Id="b6c74cc9-fab4-4443-8044-94744d509710"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4caa4f2c-c64f-4df4-b353-31d79ae71149"
>
</ReqRef><Comment>If SR was entered because the driver selected &apos;Override&apos;, initiate the Override procedure.</Comment>
<PreConditions>
<PreCondition
 Guid="275fb7a6-27cf-4dd0-ac36-382520be5909"
>Kernel.Modes.ModeTransitions.Condition37_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a4141a9c-e35d-4008-8f47-f0ddf87b262e"
>Kernel.Override.EnterInOverride()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="PT -&gt; OS"
 Guid="f19ef215-b4ac-482f-8877-65470b7dd9c2"
>
<ReqRef
 Id="92fda9c3-1299-4f09-8e8f-4566c4e3de5b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4f3cc460-67c9-41cf-b46b-027c16f92994"
>
</ReqRef><ReqRef
 Id="af1d067a-7dc9-45dc-9ce8-dcbd2fe36941"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="71b8e3b3-b748-41a7-a058-df43c2e056ed"
>
</ReqRef><ReqRef
 Id="c7fa380e-0e91-4109-8b8c-36f672fbb5d3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="46d3efc9-44b7-4ed1-b9b4-cabe2dc87a2a"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7b912761-acba-441e-9f9b-d2cc3d144869"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="57368aa7-c649-4742-bbe9-65205b777295"
>Kernel.Modes.ModeTransitions.Condition15_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="97a7f9d5-8f23-49dd-98e4-03e542791e15"
>Kernel.Mode &lt;- ModeEnum.OS</Action><Action
 Guid="9830d5cb-6ee9-4d48-b29b-9d321753b759"
>DMI.MasterDMI().In_AcknOfOSMode.InputInformation.Disable()</Action><Action
 Guid="ac721fb1-402f-43c7-a022-b2e946076ca9"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.NoProcedure</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SF"
 Guid="9054633c-4c5a-4325-87ab-2767ea940521"
>
<Comment>If the current mode is SF, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="5ddfc4f0-99e1-447d-87db-c4200984e80b"
>Kernel.Mode == ModeEnum.SF</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SF"
 Guid="5b4c5b53-4e9f-4340-950c-028a5bb200ec"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SF -&gt; IS"
 Guid="109fb41b-b5f5-4209-98d3-3b102885c10a"
>
<ReqRef
 Id="a6c3478f-e089-4569-8973-16c76241eca3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c2eaf554-2e6e-4b86-93f1-9419e2ab320c"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="9b8331f0-de36-402f-9f9b-44ab1e477169"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="33c477bb-6a5f-41a0-88ac-d20031d5e81c"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SF -&gt; NP"
 Guid="04aff819-1dab-4b69-b783-2dbd6607d3d5"
>
<ReqRef
 Id="b111af45-5fa9-4ae6-ba61-00f143e0a1a7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="df90781c-a05c-4e32-9a05-9a114ac7055e"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="7035d1fc-72b2-4e63-bb0e-1b3683f4082d"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="855958a8-869e-45f1-a4d2-a129f383b70c"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="IS"
 Guid="e44913d8-e2c9-4d52-8f68-a451c020bb76"
>
<Comment>If the current mode is IS, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="9bc9968f-5c84-42ec-b404-3aa18a08f13a"
>Kernel.Mode == ModeEnum.IS</PreCondition></PreConditions>
<Actions>
</Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SN"
 Guid="407aae1f-3c10-4dde-bc0b-bf88ebf381fe"
>
<Comment>If the current mode is SN, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="97358ff8-ee94-4de8-b68e-ed00b790fda3"
>Kernel.Mode == ModeEnum.SN</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SN"
 Guid="11d4a76d-6e99-4c89-93a2-9c089b37d032"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; IS"
 Guid="e4cef143-6353-4f53-b980-2281d3a763ba"
>
<ReqRef
 Id="d5157e76-5a0d-487d-9035-ff699b6e36f2"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="35755561-032e-4f1a-862d-9e4fc4c48dc8"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="54937e3e-6200-4e9a-82cf-5b38ee6f633c"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0d5e00ca-b0f7-416a-9724-01aed7b1309d"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; NP"
 Guid="d6f121d6-c92e-4a78-8b23-bacfc218e625"
>
<ReqRef
 Id="29e2b40b-d1c1-4e16-bda1-18982f829d27"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c70b4ce-1bb9-49f2-a6aa-5a080c8346fe"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="40b87b52-32c5-4a2f-a088-05c1f01a3f22"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="eca02fcc-0a52-40f6-afb3-6b0366e128b3"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; SF"
 Guid="d6739c0a-d2a1-4ac6-80a2-36f22852e8ec"
>
<ReqRef
 Id="b40132c6-8f62-4373-bc2a-67be1fd68683"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5c315456-47da-4df1-9d07-600d166458f1"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="00a1dabf-d5b5-4c72-a020-7b606a90b69a"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="759c7540-5df7-4966-a8e3-76d599ea0d64"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; SR"
 Guid="743ac4b5-247d-4c01-a8a8-e017f28e8ccd"
>
<ReqRef
 Id="155e7556-7d15-4a61-b6c6-8ea5b8fb8bed"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4123d5c4-6d81-402c-a3e3-c1323e76e96f"
>
</ReqRef><ReqRef
 Id="c8b3f989-1504-46c0-84e3-3b54fdc4e132"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1ea8bb87-2b7c-4f17-9774-498e8e885eb9"
>
</ReqRef><Comment>Transition to SR.</Comment>
<PreConditions>
<PreCondition
 Guid="5a0abec2-4f36-4869-a421-cbe2197b90bf"
>Kernel.Modes.ModeTransitions.Condition44() OR Kernel.Modes.ModeTransitions.Condition45()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a8d07cf8-ee86-44e1-b78c-c23c2f8261d7"
>Kernel.Mode &lt;- ModeEnum.SR</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; TR"
 Guid="c2439e17-6d50-46d3-85f6-fafe01919528"
>
<ReqRef
 Id="3720ab0e-cf20-48b2-a9d8-ed6611ebc008"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="14cdb978-0cf5-4420-8d4b-f42ab499f091"
>
</ReqRef><ReqRef
 Id="7a800db1-0312-49df-8a67-3d61c0b8c37b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="bf69c6a8-d8d8-497c-8248-31df9c1b2951"
>
</ReqRef><ReqRef
 Id="57170c34-fdd6-4c7a-96b4-267f63401692"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="715f1bf1-6cdd-4ed5-aa97-7bca01b796fe"
>
</ReqRef><Comment>Transition to TR.</Comment>
<PreConditions>
<PreCondition
 Guid="933b3f5f-4666-41b5-8fd4-bf7d2c47f2b6"
>Condition67() OR 
Condition39() OR 
Condition38() OR 
Condition35() OR 
Condition20()</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Specify the reason"
 Guid="20fb89a7-047f-4776-a26a-4409c7e4652f"
>
<Comment>Specify the trip reason</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Trip ordered by trackside"
 Guid="b198a225-e4ff-4146-b3cb-403a5c720884"
>
<Comment>Trip ordered by trackside</Comment>
<PreConditions>
<PreCondition
 Guid="f66f6ac1-b8f7-418b-83fa-3848af27abdb"
>Condition67()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a5a289d7-082a-453f-bbd3-7c87e9894a63"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="No MA"
 Guid="7158473a-ac70-4d03-adad-d3ee345f878d"
>
<Comment>No MA</Comment>
<PreConditions>
<PreCondition
 Guid="36a989c6-e1a5-4c1c-bce7-3357daa9f2e8"
>Condition39()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0ffb75a6-47cd-4ff8-9908-3a28547e2b8b"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OverpassEOAorLOA</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Trackside order"
 Guid="cb679112-8ab3-435c-a31a-91890792dcb2"
>
<Comment>Trackside order</Comment>
<PreConditions>
<PreCondition
 Guid="e81bb34f-5e99-41a4-a83f-472e84055912"
>Condition20()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="06d374ef-2636-4d6e-9a85-d26c37c380b5"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.OrderFromTrackside</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="National trip"
 Guid="57dca527-eb4c-4ce8-967f-e33f87c38210"
>
<Comment>National trip</Comment>
<PreConditions>
<PreCondition
 Guid="afe2a5b9-0cdd-4efc-8f04-a41dffe645fb"
>Condition38() OR Condition35()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="492ac718-c4aa-4458-a596-809d867c8dea"
>Modes.Trip.TripReason &lt;- Modes.Trip.TripReasonEnum.TripOrderedByNationalSystem</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="0de54a59-34e4-44fb-9e63-074b361374c3"
>
<Comment>Switches to TR mode</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Switch to TR"
 Guid="d3e31524-0018-491c-b040-3992f7c11689"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="78e02f9b-5ca6-4829-b6ab-3e05d10c32f3"
>Kernel.Mode &lt;- ModeEnum.TR</Action><Action
 Guid="4c9e2e1e-d905-46e0-a632-1f2ac397e01a"
>Kernel.HandleModeChange &lt;- Kernel.HandleModeChangeSM.TrainTrip</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; SB"
 Guid="6633f862-30af-4ca3-b6d0-16e94f477ef4"
>
<ReqRef
 Id="31d73ed8-140f-4efc-b588-b314cca8ab51"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="7d6aec12-bd3d-40d3-87a0-95985cfd79d1"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ad7a31b9-465d-425d-a0f1-b71840bd7962"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8045a4a1-d774-4af4-b084-68a494e636b0"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="81522f1e-d7bc-441b-a339-cef2e7f7eb30"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="dd1cd4a5-2a2b-4f77-933d-cbbd37e52694"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="4f35bb84-df30-4b4c-9679-1db13764b84f"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; SH"
 Guid="858e757d-33ac-4531-8c0a-1c6abaf46e6a"
>
<ReqRef
 Id="0d319080-3cb9-488e-b0fa-100e1f8d8364"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6392d218-4a5e-4c21-975d-0a8f1887f2b8"
>
</ReqRef><ReqRef
 Id="21984b69-0068-4a67-b99c-ffceb9070f60"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="939ecc83-4a80-4146-9bc1-3203ca47c4bd"
>
</ReqRef><ReqRef
 Id="9802040a-5388-4af0-8605-01cd7d0816f3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c91c7de2-55b2-4157-8506-b53d3d2deb97"
>
</ReqRef><ReqRef
 Id="d758396f-ddb9-4d8c-bf3c-a1a542db11d8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="5164f464-c7ae-426c-bea2-8d964f484e0f"
>
</ReqRef><Comment>Transition to SH.</Comment>
<PreConditions>
<PreCondition
 Guid="9a453f22-6bef-42ec-a26c-ea80dd93b4a0"
>Kernel.Modes.ModeTransitions.Condition5() OR Kernel.Modes.ModeTransitions.Condition61()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="904b5ada-2482-458a-b8eb-b9a738e6781e"
>Kernel.Mode &lt;- ModeEnum.SH</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="7382f569-7b97-45b9-bb1d-118bb73403ad"
>
<ReqRef
 Id="33a7fb0f-f8e5-43db-a250-1d176afdcb55"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="ecf2d37e-a2fc-4f73-b9cc-dd951f9fab4a"
>
</ReqRef><ReqRef
 Id="39ae88ad-20ca-43d1-8c3f-5f7172777b6e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="15425550-7d52-4cbe-8d10-0e4b6e2afab4"
>
</ReqRef><Comment>Executes actions related to entry in SH mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle entry in SH"
 Guid="8e812b18-add1-4e8a-880f-cc484adc08e6"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="ca43fef5-06ae-495e-a011-41d323e6a49a"
>Shunting.HandleEntryInSH()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; FS"
 Guid="9ef1909a-7f81-4e39-a103-659317ffbd4f"
>
<ReqRef
 Id="1ea6ca9d-8bb0-40bf-9110-bd56666c16c8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="c648ea8a-626c-4f8b-b65a-abdd1191ec5c"
>
</ReqRef><Comment>Transition to FS.</Comment>
<PreConditions>
<PreCondition
 Guid="78edfde5-f919-4a51-8717-f83eb125ba74"
>Kernel.Modes.ModeTransitions.Condition25()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ad8fab30-df72-4863-b2a1-d3b92dcb3583"
>Kernel.Mode &lt;- ModeEnum.FS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; LS"
 Guid="aeef7d93-e5bf-4f5e-aff7-0bfdd7ea2c85"
>
<ReqRef
 Id="170a51bd-8844-47bb-876a-8b88f76e8fbc"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fde3cbde-3abf-4015-a18d-40d4bb0722ea"
>
</ReqRef><ReqRef
 Id="5a176c87-642a-4578-be99-2adb345dd932"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2d9a9bd4-44f9-44f2-b526-0c558c68d418"
>
</ReqRef><ReqRef
 Id="dbd12b73-87dc-4f8b-aad5-7e3cb90fa5b1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="754cfce0-b485-4dc8-bcf1-c9f0952697d2"
>
</ReqRef><ReqRef
 Id="7cba24fb-f8f0-411d-b295-e943d3f930c1"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d46b51ee-adc3-4a13-bc3f-2f27700e722a"
>
</ReqRef><ReqRef
 Id="8c7eb4ff-2716-4d9f-a6f2-bd52aacc416b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d99fbc73-4391-4c98-8196-fc54201c67a7"
>
</ReqRef><Comment>Transition to LS.</Comment>
<PreConditions>
<PreCondition
 Guid="fe8cb30c-3cef-407f-80bd-17d3310fac19"
>Kernel.Modes.ModeTransitions.Condition71()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="4067aa5e-a57f-41f3-8d6a-8e10e7fe2500"
>Kernel.Mode &lt;- ModeEnum.LS</Action><Action
 Guid="231bf4ed-ea40-4eee-8423-9b537733d58c"
>DMI.MasterDMI().In_AcknOfLSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; OS"
 Guid="465b4cf6-15e2-41d8-b5bd-52db4073624d"
>
<ReqRef
 Id="a72a47f0-2f3f-441e-ade0-eca81753b1a5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="999abad1-fb27-4d7c-a560-35d3878d24bb"
>
</ReqRef><ReqRef
 Id="1650d44a-fe6b-42d3-b8a8-77f7a93f90b8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="9e2993f6-d1d2-49c1-8973-729174d039e5"
>
</ReqRef><ReqRef
 Id="6e265aec-2ccf-45a4-8713-34d7ea277c53"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8e8d2832-0a64-4e35-bb75-6b15207b9340"
>
</ReqRef><ReqRef
 Id="4ebd4845-9d08-4721-8788-6991ab66d3eb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="59119823-4f10-42af-82be-1363b86c7066"
>
</ReqRef><ReqRef
 Id="b9d9261f-b143-4904-a8d5-14e3c58d7737"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a5fa1cb7-31f2-4fdc-afc7-fb6fec9f9309"
>
</ReqRef><ReqRef
 Id="531deda3-99b6-4777-9b59-5e2178833486"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2f8f5ce3-c903-4772-82a4-601600140e82"
>
</ReqRef><ReqRef
 Id="25c1b633-d7e9-42a2-be80-037ff105dcd8"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="4d33047e-577f-4c1b-ae15-2ae2a667497f"
>
</ReqRef><Comment>Transition to OS.</Comment>
<PreConditions>
<PreCondition
 Guid="49a8e609-3642-47ba-a76c-5cd22cc451bb"
>Kernel.Modes.ModeTransitions.Condition34()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1d352d9c-4b06-429a-a738-a773484211fb"
>Kernel.Mode &lt;- ModeEnum.OS</Action><Action
 Guid="c45b50d9-6abc-4bea-b924-e0316b4ee103"
>DMI.MasterDMI().In_AcknOfOSMode.InitiateRequest()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="SN -&gt; UN"
 Guid="ef594761-93e3-495e-ac2f-07b4bc9e6bb6"
>
<ReqRef
 Id="088e6e2d-a7b6-4941-97db-9ad42d464c75"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0cdf632f-b637-4bf6-a633-43eab1ca4bfc"
>
</ReqRef><ReqRef
 Id="bf8f8704-ab96-4ceb-a58e-dca57715e14f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="660c7bf4-bd95-44d6-a100-92287f24b4b5"
>
</ReqRef><Comment>Transition to UN.</Comment>
<PreConditions>
<PreCondition
 Guid="12652de2-18f7-4045-8c95-5726df2bc918"
>Kernel.Modes.ModeTransitions.Condition21()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="cee54f2d-4a81-4185-b85a-6c3390e4e3a2"
>Kernel.Mode &lt;- ModeEnum.UN</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RV"
 Guid="39e97960-9622-40dd-9ade-9595beb90307"
>
<Comment>If the current mode is RV, handle the transitions.</Comment>
<PreConditions>
<PreCondition
 Guid="290576b6-d4ec-4291-9e01-20482e7c53a1"
>Kernel.Mode == ModeEnum.RV</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="RV"
 Guid="9f5a5471-fa4c-40d6-accc-a7992bdbf96f"
>
<Comment>Select transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="RV -&gt; IS"
 Guid="368693cf-bbbd-4128-bb61-d09d00f2d75d"
>
<ReqRef
 Id="94866026-9f8e-4b6c-98c7-da843f4112c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d29a9be4-72f3-4035-b35f-7673dda0ab67"
>
</ReqRef><Comment>Transition to IS.</Comment>
<PreConditions>
<PreCondition
 Guid="4d26cb73-fdeb-47cd-bf63-2cb18b9c8920"
>Kernel.Modes.ModeTransitions.Condition1()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="093b819b-51d0-42f1-9c56-8d4984e96560"
>Kernel.Mode &lt;- ModeEnum.IS</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="RV -&gt; NP"
 Guid="a3a0cc2d-d7c5-4934-aea4-735169e23403"
>
<ReqRef
 Id="a76ce38e-7855-4fe4-9313-95fb6dd10331"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="6c09ae0c-9a34-4c45-8066-3c4ca9221a7b"
>
</ReqRef><Comment>Transition to NP.</Comment>
<PreConditions>
<PreCondition
 Guid="ad506849-0a78-41d2-ab18-f67db00b74f0"
>Kernel.Modes.ModeTransitions.Condition29()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0d1a41f5-3ce2-42e1-91f6-8d827e57abcb"
>Kernel.Mode &lt;- ModeEnum.NP</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="RV -&gt; SF"
 Guid="48fbcfca-00e9-4bc4-b399-f09a6c0f385f"
>
<ReqRef
 Id="3cca6c78-9013-49e8-8010-1606980ce83e"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="537abea1-9be5-448c-8ca8-1e9226cbdaa9"
>
</ReqRef><Comment>Transition to SF.</Comment>
<PreConditions>
<PreCondition
 Guid="7a7d2177-7599-4e52-a21a-370c5289d600"
>Kernel.Modes.ModeTransitions.Condition13()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="a9ac7011-81fc-4b0a-94b2-77eb43271c16"
>Kernel.Mode &lt;- ModeEnum.SF</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="RV -&gt; SB"
 Guid="15fa3fb0-a171-4be5-8bf7-099aff963f70"
>
<ReqRef
 Id="0672f8c5-4d85-4db1-b848-eac14dc07baa"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0670fb25-6a3a-49ee-a04c-47f94c55d579"
>
</ReqRef><ReqRef
 Id="d27a51c4-55a3-44c2-a184-442af52831fb"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="51c272b5-8e17-4ad6-b1e5-89611483d980"
>
</ReqRef><ReqRef
 Id="3bbe8b30-5f49-4646-8040-ea133b6f95c4"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="2803fa05-df75-4e64-aff7-9080c0da0f14"
>
</ReqRef><Comment>Transition to SB.</Comment>
<PreConditions>
<PreCondition
 Guid="4200927a-a727-4528-8629-da14f579559b"
>Kernel.Modes.ModeTransitions.Condition28()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="7fae856a-be74-40e3-9210-d5f2d3e8771b"
>Kernel.Mode &lt;- ModeEnum.SB</Action><Action
 Guid="8ec0888a-aa39-42c0-9c93-6e75566ad705"
>Kernel.HandleModeChange &lt;- HandleModeChangeSM.EndOfMission</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Handle mode change"
 Guid="0b787eb6-bf30-4444-ac77-ff45ec4b8ed4"
>
<Comment>Handles the different actions that have to be executed after the mode change.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="The mode has changed"
 Guid="92f4a069-2bf7-4f00-a916-e4a621c4db81"
>
<PreConditions>
<PreCondition
 Guid="abbfdc97-d610-4441-847d-12a8ba8b1a3a"
>Kernel.Mode != Kernel.Modes.ModeTransitions.PrevMode</PreCondition></PreConditions>
<Actions>
<Action
 Guid="71616f33-5f53-4261-ac0b-92804f08980f"
>Kernel.Modes.ModeTransitions.ModeRules.HandleStoredInformation()</Action><Action
 Guid="d37f20e1-98c7-47ce-8ec2-f4783b377864"
>Kernel.Modes.ModeTransitions.ModeRules.HandleModeRelatedEBCommand()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="SL"
 Guid="320a22e3-bd1d-410f-9762-62bec15dde1b"
>
<ReqRef
 Id="1346f2e0-2754-4999-9ddd-41e3b9c2a912"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="40824ca3-1544-44e6-8983-7c7a05ca0b13"
>
</ReqRef><ReqRef
 Id="d6f73100-506e-4f75-965b-5329798ae04c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d2b49703-278c-440b-8c2a-5e17c5072874"
>
</ReqRef><ReqRef
 Id="017df1d1-bab0-458e-994d-eabdf0b3136c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eecfbf4c-f7a8-4ae1-95c9-a8b12b3fca57"
>
</ReqRef><Comment>Connect to the RBC when entering or leaving SL mode in levels 2/3.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Entering or exiting SL, level 2/3"
 Guid="cd67b8f6-4006-4f51-889f-4b3ca8fb51a3"
>
<PreConditions>
<PreCondition
 Guid="58542aca-0898-4eea-9437-50175e65bc57"
>Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]</PreCondition><PreCondition
 Guid="803992df-272e-44be-ae5d-0ca02c53a945"
>Kernel.Mode == ModeEnum.SL
  OR  
Kernel.Modes.ModeTransitions.PrevMode == ModeEnum.SL</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3fc3fdc4-a55e-460d-b562-e9e19afbc77a"
>EURORADIO.RBCConnection.CurrentRBCConnection().SendInitiationOfCommunicationSession()</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="SH"
 Guid="eb0aa2b7-693d-474e-a461-8cb6afdbc1fb"
>
<ReqRef
 Id="bfa19147-2761-42df-ba10-9c9270fb2bb5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8e135644-46b9-4511-83a3-e18ad3ef1911"
>
</ReqRef><ReqRef
 Id="772e0087-dcb8-45bf-a888-56863cd592af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="65eeb4c1-52af-4f62-9488-163d674a3f46"
>
</ReqRef><Comment>End the override procedure</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SH"
 Guid="1b0edab6-3fc7-49ff-872e-1c1b318f1cc8"
>
<PreConditions>
<PreCondition
 Guid="404ac5b2-ae79-45ad-98d4-bc52a6848844"
>Kernel.Mode == ModeEnum.SH</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Cancel override"
 Guid="f5917e32-07ff-425b-b77d-d29f5dae55c9"
>
<Comment>If  the override function is active, it is ended.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Cancel override function"
 Guid="f8b127e6-479c-4571-8a60-72b6f5c4592e"
>
<PreConditions>
<PreCondition
 Guid="d749325c-0704-49c7-ab5a-9bd2fcbccc29"
>Override.OverrideIsActive()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ee358f3f-d928-46e8-ac43-a1dd68c8eb36"
>Override.EndOverride()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="SR"
 Guid="aca2dab1-2c2b-4dcb-ab3e-9f95bc4e94ee"
>
<ReqRef
 Id="77289e9b-8c64-4406-8d33-fcf9d018e94c"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fd47390c-e46f-4098-8177-23bf79715f25"
>
</ReqRef><ReqRef
 Id="03cde0ce-fb7a-4c71-83d9-e32bb757174f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0f56c8d0-70ff-4fea-b79f-b74ffc058eab"
>
</ReqRef><Comment>When the SR mode is entered:
 keep a record of the train&apos;s position for the max allowed distance to run in SR mode
 revoke all emergency stops if the transition was caused by selecting override (in Level 2 or 3)</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SR"
 Guid="542a293f-0bbe-4b7e-8564-f58bb6df0072"
>
<PreConditions>
<PreCondition
 Guid="d1fb763d-8eb4-449e-b9fb-3ab9c203ce8f"
>Kernel.Mode == ModeEnum.SR</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Override selected"
 Guid="7865b98a-29c1-41d8-a330-dc5b2956b1f7"
>
<Comment>If the driver has selected &quot;Override&quot;, trigger the procedure &quot;Override&quot;.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Override selected"
 Guid="5820ec18-a1ea-4c39-8ad7-edfcfb72111a"
>
<PreConditions>
<PreCondition
 Guid="c6fe72fa-111f-4ee5-bc98-fee5bfd679f6"
>Kernel.Modes.ModeTransitions.Condition37()
  OR
Kernel.Modes.ModeTransitions.Condition37_SB()
  OR
Kernel.Modes.ModeTransitions.Condition37_PT()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="d81738e0-3328-4d77-9265-2d1bb1cbfef2"
>Kernel.Override.EnterInOverride()</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Override emergency stops"
 Guid="e77a41de-011e-4a67-b0b9-f65424882e49"
>
<ReqRef
 Id="f9493d17-4616-4ea8-b1c6-66d4c67d37c7"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="492e0e8e-e162-4200-a804-dc88d5d4ed7c"
>
</ReqRef><Comment>In Level 2 or 3, the transition to SR due to selecting Override revokes all emergency stops.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Override emergency stops"
 Guid="849927c4-8585-4ee7-9926-a83a7087f426"
>
<PreConditions>
<PreCondition
 Guid="3e6ea886-5b5f-4381-be51-f5bbba1f6269"
>Kernel.Level.Value.Value in [LevelEnum.L2, LevelEnum.L3]</PreCondition></PreConditions>
<Actions>
<Action
 Guid="12cd0b21-f7bb-489e-a62c-37d6a11a5429"
>Kernel.BrakeCommands.EmergencyStops &lt;- []</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="SR start distance"
 Guid="d4c717aa-3340-44ce-849c-7ee75429742f"
>
<Comment>Keep the current location for tracking the maximum distance to run in SR.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="SR start distance"
 Guid="b6b6416f-c41a-4755-8eac-3de5193c6825"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="9861dab1-0ea0-474a-a570-5c9f716e8ed6"
>Kernel.TrainPosition.SRStartDistance &lt;- Odometry.NominalDistance</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="OS"
 Guid="d46910df-d4f4-42c3-9db9-05a4b304759d"
>
<ReqRef
 Id="bfa19147-2761-42df-ba10-9c9270fb2bb5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f3870796-87dd-4780-b54a-addf152dd2e2"
>
</ReqRef><ReqRef
 Id="772e0087-dcb8-45bf-a888-56863cd592af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="26710f90-efc9-4c1f-8b2d-49f6ba270cc0"
>
</ReqRef><Comment>Display &quot;Entering in FS/OS&quot; and end the override function.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="OS"
 Guid="990c40bc-7faf-42ab-97ec-1fb71dd0ce06"
>
<PreConditions>
<PreCondition
 Guid="710695f4-e0d4-4472-9df0-8f99ee86f7dc"
>Kernel.Mode == ModeEnum.OS</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Cancel override"
 Guid="3760b6a6-b9eb-465a-b9ea-3c89070db9cf"
>
<Comment>If  the override function is active, it is ended.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Cancel override function"
 Guid="35c0762e-4204-4660-bcfa-598ccc4255bf"
>
<PreConditions>
<PreCondition
 Guid="7d915a19-6ff8-4447-8d45-7f36e2fbab45"
>Override.OverrideIsActive()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="ba6e3c1d-7690-45df-a0ff-a98a1f8826a4"
>Override.EndOverride()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="TR"
 Guid="4cbef636-daf9-425c-afce-dde7c2cf1197"
>
<ReqRef
 Id="bfa19147-2761-42df-ba10-9c9270fb2bb5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e7660203-c17f-4035-beea-e8e79d63cf1b"
>
</ReqRef><ReqRef
 Id="772e0087-dcb8-45bf-a888-56863cd592af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="0b2aceac-f01f-4736-956b-ed3656c32a6d"
>
</ReqRef><Comment>End the override function.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="TR"
 Guid="129f171a-9ea7-4873-9b58-4c13a05f646d"
>
<PreConditions>
<PreCondition
 Guid="6c469476-d2fa-465d-a71d-a4774e401885"
>Kernel.Mode == ModeEnum.TR</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle information"
 Guid="46a13501-0823-425a-991e-cd37ceb7c4aa"
>
<Comment>If  the override function is active, it is ended.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Cancel override function"
 Guid="5b55fb60-b00a-4184-872e-9e96fc576e6b"
>
<Comment>If override was active, exit the override procedure.</Comment>
<PreConditions>
<PreCondition
 Guid="0ed99111-f747-48ae-818c-d8190878d6e4"
>Override.OverrideIsActive()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="16e40cc4-8592-40b3-849d-0ccd8c8fdbd1"
>Override.EndOverride()</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Delete SR mode-specific information"
 Guid="bd851687-9da4-401e-898e-aa75b0fa193f"
>
<ReqRef
 Id="4194dc47-a12e-4906-99ac-3f43ccf3b796"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="d78cf0b9-1166-451b-82d8-3b5deff7912c"
>
</ReqRef><ReqRef
 Id="98a5c6ab-1a8f-4522-b2ce-57728dc6df86"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="eb0e158a-93b9-465d-98c5-05432d277566"
>
</ReqRef><Comment>Otherwise, if the previous mode was SR, reset the Stop if in Staff Responsible and Unexpected BG passed in SR mode information.</Comment>
<PreConditions>
<PreCondition
 Guid="ecf3a7f8-8fcb-44f9-9cb2-5187ea26bc01"
>Kernel.Modes.ModeTransitions.PrevMode == ModeEnum.SR</PreCondition></PreConditions>
<Actions>
<Action
 Guid="5758c4d1-4828-4a63-bc2b-38026eb82a64"
>Kernel.Modes.StaffResponsible.UnexpectedBGPassed &lt;- Boolean.False</Action><Action
 Guid="2a4319cf-a4a0-46d4-ad46-ce42e9b77d4c"
>Kernel.Modes.StaffResponsible.StopIfInStaffResponsible &lt;- Boolean.False</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Delete SH mode-specific information"
 Guid="dd430b89-54d9-4805-a594-652bc5020fa9"
>
<ReqRef
 Id="14b1efda-ce06-4c66-9dbe-9ec337d4879b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="a2695d6a-9bf6-4a0e-84e3-99ca778b4dee"
>
</ReqRef><ReqRef
 Id="1abefeb3-7b1d-42ba-9102-267a6221a5ea"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="e4c6ae5a-0373-42eb-ab38-3c5bd460998e"
>
</ReqRef><Comment>If the previous mode was SH, reset the Stop if in Shunting and Unexpected BG for SH information.</Comment>
<PreConditions>
<PreCondition
 Guid="a5783e8c-697c-4e09-a78c-a9099e9eae40"
>Kernel.Modes.ModeTransitions.PrevMode == ModeEnum.SH</PreCondition></PreConditions>
<Actions>
<Action
 Guid="558b7c00-1baa-4d7c-bd50-20b0a1c0465e"
>Kernel.Modes.Shunting.StopIfInShunting &lt;- Boolean.False</Action><Action
 Guid="c1487ea5-2419-4909-b15b-eec2c071206c"
>Kernel.Modes.Shunting.UnexpectedBGPassed &lt;- Boolean.False</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="RV"
 Guid="4fed2537-dd03-40b9-976c-a3fbcfa70489"
>
<ReqRef
 Id="291bf774-5d2e-4264-861b-84afd9fb4185"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="dfac0b7a-e328-4c69-8c50-a18b5373aa09"
>
</ReqRef><ReqRef
 Id="6f9b176c-5d2f-4c1e-ac6f-775a0e864dfe"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="fc370a44-5fc4-4f24-8059-8bb01ddd37d6"
>
</ReqRef><Comment>If the train changes its orientation, the temporary speed restrictions and the announced and not applicable geographical references are deleted.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="RV"
 Guid="6a5190eb-a240-4dfc-b092-ef7a2d184e0c"
>
<PreConditions>
<PreCondition
 Guid="bf00fb51-2642-44e1-bed0-64e08637278f"
>Kernel.Mode == ModeEnum.RV</PreCondition></PreConditions>
<Actions>
<Action
 Guid="cfe2c845-a9f2-49cc-a9ac-eb8e870263d8"
>Kernel.TSR.TSRs &lt;- []</Action><Action
 Guid="d76a3771-e75a-4586-aa50-73a70912fd4f"
>Kernel.GeographicalPosition.GeographicalPositionInformation &lt;- []</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="LS"
 Guid="2ae9bd77-7e3a-4a27-9471-8b1b81368446"
>
<ReqRef
 Id="a2ec7ec3-6644-47d6-8ee1-9e4b16650cc3"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="89e454f2-87ae-4393-82c8-50fe4b942793"
>
</ReqRef><ReqRef
 Id="bfa19147-2761-42df-ba10-9c9270fb2bb5"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f1ca309c-2e9f-4e63-ab88-bd0a030d2f84"
>
</ReqRef><ReqRef
 Id="772e0087-dcb8-45bf-a888-56863cd592af"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="3b2ab6cb-daf5-4ace-bc74-e2f4ea1f3d9c"
>
</ReqRef><Comment>When LS mode is entered, the display of the LSSMA will be off.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="LS"
 Guid="82be5964-69bc-427d-95f2-e0caf751a4e4"
>
<Comment>Actions to execute when entering LS mode.</Comment>
<PreConditions>
<PreCondition
 Guid="649da02e-875c-432f-b874-f3716160e2c9"
>Kernel.Mode == ModeEnum.LS</PreCondition></PreConditions>
<Actions>
<Action
 Guid="0aa12865-2a4e-4155-b6cb-66ce493b30d1"
>LimitedSupervision.LSSMADisplayOrder &lt;- Messages.Q_LSSMA.Toggle_off</Action></Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Cancel override"
 Guid="ac3c9c0b-13d5-41e4-8e2e-02e91bf9efc4"
>
<Comment>If  the override function is active, it is ended.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Cancel override function"
 Guid="da9f876c-c72a-4943-bff4-d2037b32adfa"
>
<PreConditions>
<PreCondition
 Guid="eda52951-c21a-4435-84a0-d25a29b0b27b"
>Override.OverrideIsActive()</PreCondition></PreConditions>
<Actions>
<Action
 Guid="1c899d8a-8bc7-4e1c-859a-38868650e6f6"
>Override.EndOverride()</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Exit LS"
 Guid="d1000a61-8234-41b0-9155-b25f0400274d"
>
<Comment>Actions to execute when exiting LS mode.</Comment>
<PreConditions>
<PreCondition
 Guid="4d038c9f-8d44-415c-a173-d27afce88062"
>Kernel.Modes.ModeTransitions.PrevMode == ModeEnum.LS</PreCondition><PreCondition
 Guid="5a104355-8d71-4d02-b786-74a7e6d2eab7"
>THERE_IS aProfile IN Kernel.MA.ModeProfile.Profile | 
(
  aProfile.Mode == ModeEnum.ModeProfile.LS
    AND  
  aProfile.Location + BaseTypes.LengthToDistance(aProfile.Length) &lt;= Kernel.TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min)
)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="3dc9ed1c-bed7-431b-af89-5526173b02a2"
>REMOVE ALL (
  X.Mode == ModeEnum.ModeProfile.LS
    AND  
  X.Location + BaseTypes.LengthToDistance(X.Length) &lt;= TrainPosition.FrontEndPosition(DistanceIntervalEnum.Min)
    AND
  MA.ModeProfile.RemoveModeProfile(X)
)
IN MA.ModeProfile.Profile</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="PS"
 Guid="e678dd57-f8d2-4b47-9d29-c433b99d728a"
>
<ReqRef
 Id="e2b45ab5-ef70-4c71-a023-bb00b22e624f"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="8028d489-9584-4a3e-a5c8-3fa7e585947d"
>
</ReqRef><Comment>Deactivate the &quot;Continue Shunting on desk colsure&quot; function, so that it can only allow one SH -&gt; PS transition.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="PS"
 Guid="cd37f525-9ad6-4412-9df1-914d877aeb74"
>
<PreConditions>
<PreCondition
 Guid="e33521a1-766d-4be5-a28a-ef3ee818bdcf"
>Kernel.Mode == ModeEnum.PS</PreCondition></PreConditions>
<Actions>
<Action
 Guid="95b757a7-c19e-4ffc-ba3d-afbc5c486d8f"
>Kernel.Modes.Shunting.ContinueShuntingOnDeskClosure &lt;- False</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NP"
 Guid="fc0593e9-462b-46ec-bb2a-990b7b72862e"
>
<Comment>Handles actions to execute when the system is powered off.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="NP"
 Guid="8e0262af-a6e5-41e0-9295-f8d9666e4f3a"
>
<PreConditions>
<PreCondition
 Guid="d3ad200d-8c2a-4b0b-8fea-c9d5fca28168"
>Kernel.Mode == ModeEnum.NP</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle National Values"
 Guid="51289335-0078-4c9f-a396-b03b6e7f8dbb"
>
<ReqRef
 Id="540548ea-106d-4851-b5f3-36d8b06b3f85"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="f0ee9df9-70cd-4783-8fb1-a802ccfb7648"
>
</ReqRef><ReqRef
 Id="7de74199-8020-4f5b-8325-39e1710d1852"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b1efced8-84a8-4adf-af29-1b7e09f15b7f"
>
</ReqRef><Comment>When the on-board equipment is switched off, the not yet applicable national values are deleted.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle National Values"
 Guid="bafc6bad-475d-450d-a8ce-3383b9dd2ed4"
>
<PreConditions>
<PreCondition
 Guid="0acdc4bb-6e8b-4d2b-a8b9-df53f392a035"
>Available(Kernel.NationalValues.NotApplicableNationalValues)</PreCondition></PreConditions>
<Actions>
<Action
 Guid="26dbeadc-d871-4a38-80b9-b7a5ecb48f98"
>InvalidateInformation(Kernel.NationalValues.NotApplicableNationalValues)</Action></Actions>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 Name="Handle System Version"
 Guid="2c53f757-f900-4cd1-91cb-0e6ccf3c1eda"
>
<ReqRef
 Id="bd2b56c4-9c42-4f86-9e09-659f7bb9659b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="47740edc-8f95-47e2-85cd-61441db6b64e"
>
</ReqRef><Comment>Stores the currently used operated system version.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Handle System Version"
 Guid="4dbac099-8226-4af1-be3d-5b3ecc6dd0e3"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="2d1d8caa-9e23-4c49-8716-7a705c3a293e"
>VersionManagement.PreviousSystemVersion &lt;- VersionManagement.SystemVersionStruct
{
  Value =&gt; VersionManagement.OperatedSystemVersion,
  DataState =&gt; DataStateEnum.Valid
}</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule><Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SB"
 Guid="f03fb66d-4edf-4d3e-904b-f06dac0b579c"
>
<Comment>Handles actions to execute when the system goes to SB mode.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="SB"
 Guid="47d5eaee-3232-4cb5-b856-8b1513f551e0"
>
<PreConditions>
<PreCondition
 Guid="ba8d7456-39a8-48fa-b601-286c85cab24e"
>PrevMode == ModeEnum.NP</PreCondition></PreConditions>
<Actions>
</Actions>
<SubRules>
<Rule
 Priority="Processing"
 X="0"
 Y="0"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Select system version"
 Guid="0b075adc-48cf-4e90-a1a5-8de5cb1f2157"
>
<Comment>Selects the system version to use.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 Name="Stored system version is valid"
 Guid="ffd78bf4-88df-4f62-be74-883966d1b23e"
>
<ReqRef
 Id="bd2b56c4-9c42-4f86-9e09-659f7bb9659b"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="1bf39297-6978-4b53-983c-f3e5e292627e"
>
</ReqRef><Comment>If the system version stored when the system was powered off is valid, use this value.</Comment>
<PreConditions>
<PreCondition
 Guid="eb61b533-86a2-463b-8ef0-8e80432b878a"
>VersionManagement.PreviousSystemVersion.DataState == DataStateEnum.Valid</PreCondition></PreConditions>
<Actions>
<Action
 Guid="e528a1cd-4d2f-4e4e-b743-e5a90ebb6a5e"
>VersionManagement.OperatedSystemVersion &lt;- VersionManagement.PreviousSystemVersion.Value</Action><Action
 Guid="693ba289-6252-4841-a30f-ce682ace298d"
>VersionManagement.PreviousSystemVersion.DataState &lt;- Default.DataStateEnum.Invalid</Action></Actions>
</RuleCondition><RuleCondition
 Implemented="TRUE"
 Name="Otherwise"
 Guid="2275383c-9762-4e62-8320-a6a29f92b5d3"
>
<ReqRef
 Id="cbff537b-4ec2-4fde-8d63-3a46d748cb74"
 SpecId="1725280b-f696-4860-94cc-d85f62c35214"
 Guid="b3e3c8a8-e34d-4779-a5f1-17e8350bdad3"
>
</ReqRef><Comment>Otherwise, use the highest supported system version.</Comment>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="58c213d1-d36a-46a0-b4e2-2a3b99b2cbce"
>VersionManagement.OperatedSystemVersion &lt;- VersionManagement.HighestSystemVersion( aSystemVersions =&gt; VersionManagement.SupportedSystemVersions )</Action></Actions>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></SubRules>
</RuleCondition></Conditions>
</Rule></Rules>
</Procedure></Procedures>
<Variables>
<Variable
 Type="ModeEnum"
 DefaultValue="ModeEnum.Unknown"
 VariableMode="Internal"
 X="120"
 Y="620"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="PrevMode"
 Guid="1c13dfb6-c156-4096-b11b-0b4752ff6ab6"
>
<Comment>Used to detect that the mode of the train has changed.</Comment>
</Variable></Variables>
<Rules>
<Rule
 Priority="CleanUp"
 X="230"
 Y="550"
 Width="100"
 Height="50"
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update previous mode"
 Guid="0576564d-fc54-44ed-8060-cb33f2be942f"
>
<Comment>Updates the previous mode for the following cycles.</Comment>
<SubRules></SubRules>
<Conditions>
<RuleCondition
 Implemented="TRUE"
 NeedsRequirement="FALSE"
 Name="Update previous mode"
 Guid="a6111ffe-d83c-4735-a30f-d9bd063ade90"
>
<PreConditions>
</PreConditions>
<Actions>
<Action
 Guid="bb2c9fea-5c8b-43f5-941d-34c210be91ef"
>Kernel.Modes.ModeTransitions.PrevMode &lt;- Kernel.Mode</Action></Actions>
</RuleCondition></Conditions>
</Rule></Rules>
</NameSpace>
